[["index.html", "Geodados: uma introdução gentil Capitulo 1 Edite esse livro! 1.1 Créditos 1.2 Conjuntos de dados", " Geodados: uma introdução gentil Ben Hur Pintor, Ketty Adoch, Codrina Maria Ilie Capitulo 1 Edite esse livro! Este ebook está disponível atualmente como uma página web - https://gis.escoladedados.org/ - e em um repositório - https://github.com/escola-de-dados/GIS-curriculum/. Caso encontre algum erro ou informação desatualizada, por favor, abra uma issue ou faça um pull request em nosso repositório (https://github.com/escola-de-dados/GIS-curriculum/issues/new/choose). Na versão HTML do livro, você também pode clicar no botão de editar. 1.1 Créditos Autoria: Ben Hur Pintor, Ketty Adoch, Codrina Maria Ilie Tradução e edição em português: Bernardo Loureiro Realização: School of Data/Open Knowledge Ebook: Escola de Dados/Open Knowledge Brasil 1.2 Conjuntos de dados Todos os conjuntos de dados utilizados nesta publicação estão disponíveis no repositório: https://github.com/escola-de-dados/GIS-curriculum/tree/gh-pages/data Se preferir, baixe o arquivo .zip do repositório e localize os arquivos na pasta data: https://github.com/escola-de-dados/GIS-curriculum/archive/refs/heads/gh-pages.zip "],["introdução-suave-a-conceitos-de-gis.html", "Capitulo 2 Introdução suave a conceitos de GIS 2.1 Mapas e coordenadas 2.2 Projeções cartográficas 2.3 Sistemas de referência de coordenadas 2.4 Tipos de dados espaciais 2.5 SIG 2.6 FOSS4G 2.7 Se você quiser ir mais longe", " Capitulo 2 Introdução suave a conceitos de GIS Autor: Ben Hur Este módulo serve como uma introdução suave aos conceitos geográficos necessários para trabalhar com sistemas de informação geográfica (SIG, ou GIS em língua inglesa). Ao final deste módulo, os alunos deverão compreender os seguintes conceitos: projeções cartográficas; sistemas de referência de coordenadas; formatos de dados espaciais (exemplo: vetores e rasters); componentes e funções de um SIG; usos de um SIG; exemplos de uso de GIS e outras aplicações geoespaciais. Além disso, este módulo irá também introduzir alguns conceitos chave de softwares livres e de código aberto (Free and Open Source Software, ou FOSS) e softwares livres e de código aberto para aplicações geoespaciais (FOSS4G). As ferramentas e recursos necessários para este módulo são: computador conexão de internet Pré-requisitos: conhecimento básico de uso de computadores Recursos adicionais: A Gentle Introduction to GIS - https://docs.qgis.org/3.16/en/docs/gentle_gis_introduction/index.html QGIS User Guide - https://docs.qgis.org/3.16/en/docs/user_manual/ QGIS Training Manual - https://docs.qgis.org/3.16/en/docs/training_manual/index.html QGIS website - https://qgis.org/en/site/ OSGeo website - https://www.osgeo.org/ OSGeoLive website - https://live.osgeo.org/en/index.html What is free software? - https://www.gnu.org/philosophy/free-sw.en.html Open source definition - https://opensource.org/osd Vamos começar com um exemplo: Você pode ter ouvido a frase “todos os mapas mentem”, ou você viu uma postagem nas redes sociais afirmando que “O mapa mundi que você conheceu a vida inteira está errado!”. Bem, não é que os mapas estejam deliberadamente querendo mentir para você, mas a realidade é que os mapas não têm como te mostrar toda a verdade. Um exemplo disso são os tamanhos relativos dos países. The True Size Of (“O verdadeiro tamanho de”) (https://thetruesize.com/) é um mapa online (ou aplicativo web) interessante que mostra como os tamanhos relativos dos países são distorcidos em um dos mapas mais comuns que usamos (o mapa que usa a projeção de Mercator). Ele também mostra alguns exemplos de tipos de dados espaciais sobre os quais aprenderemos mais neste módulo. Tente usar esse site para comparar o tamanho do seu país com o de outros. True Size Of Então por que isso acontece? Como você aprenderá neste módulo, é difícil representar a forma tridimensional da Terra em uma folha de papel plana. Para fazer isso, os cartógrafos usam o que é chamado de projeção cartográfica, para projetar os pontos da superfície tridimensional da Terra em uma superfície plana. No entanto, ao fazer isso, eles introduzem alguma distorção. Essa distorção pode ser de forma, tamanho, direção e distâncias dos objetos representados no mapa. Todos os mapas têm pelo menos uma dessas distorções. Por causa dessa distorção, um mapa nunca pode mostrar toda a verdade sobre a Terra. No mapa online que usamos, o mapa de fundo que não muda de tamanho (em cinza) é um exemplo de dados raster. Os dados raster são representações do mundo baseadas em pixels, semelhantes a como fotografias funcionam. Enquanto isso, a forma dos países que podemos mover são exemplos de dados vetor, ou vetoriais. Os dados vetoriais, ao contrário dos rasters, representam o mundo usando objetos discretos (no sentido matemático da palavra), como pontos, linhas e polígonos. 2.1 Mapas e coordenadas Quando as pessoas pensam na Terra atualmente, elas geralmente imaginam uma massa esférica azul, verde, branca e marrom flutuando no espaço. A bola de gude azul É por isso que tradicionalmente usamos globos para representar a Terra. Globo de l’Isle (1765) No entanto, embora o globo seja capaz de capturar a maioria das características da Terra, ele possui duas desvantagens principais: Os globos são pesados e difíceis de transportar. Os globos só podem ser usados em pequenas escalas (por exemplo, encontrar locais de países, as posições relativas de cidades, etc.). Eles são praticamente inúteis para atividades que exigem grandes escalas ou detalhes finos (por exemplo, navegação dentro de uma cidade). É aqui que entram os mapas. Os mapas corrigem essas duas desvantagens dos globos, representando a Terra como uma superfície plana. Ao fazer isso, os mapas se tornam portáteis e adequados para uma infinidade de usos. Dito isso, os mapas também apresentam uma desvantagem própria. Através do processo de conversão de um objeto tridimensional (globo) em um bidimensional (mapa), distorções são geradas, de tal forma que é impossível para um mapa capturar perfeitamente as diferentes características da Terra (ou seja, formas, áreas e direções). 2.2 Projeções cartográficas Uma projeção cartográfica é usada para achatar a superfície da Terra (ou de um globo qualquer) em um plano, a fim de criar um mapa. Este processo de transformação gera distorção. A terra como uma laranja Pense na Terra como uma laranja. Se você descascá-la, poderá deixá-la plana, mas nunca poderá torná-la perfeitamente plana. Você sempre encontrará um dos seguintes problemas: Alongamento - o alongamento da casca (ou superfície) em uma ou mais direções Rasgos - a divisão ou ruptura da casca (ou superfície) Compressão - o encurtamento ou encolhimento da casca (ou superfície) Por causa desses problemas, cada mapa contém distorção em uma ou mais das seguintes características: Forma Área Distância Direção As projeções cartográficas podem preservar (sem distorção) uma ou mais dessas características, mas nunca todas ao mesmo tempo. Outra opção é balancear e minimizar as distorções para todas as características ao mesmo tempo. Isso se deve à natureza das próprias características. Características principais como Forma e Área são mutuamente excludentes e não podem ser preservadas simultaneamente. Enquanto isso, as características secundárias Distância e Direção não têm como estar corretas em todos os lugares do mapa. Ao escolher qual projeção cartográfica usar, é importante que você considere o propósito do mapa. Por exemplo, se deseja realizar análises baseadas em área, é melhor usar uma projeção cartográfica que preserva a área. Existem várias classificações de projeções cartográficas. A primeira é baseada nas características que elas preservam. Projeções de mapa conforme ou ortomórficas são aquelas que preservam a forma ou a conformidade angular. Estes são comumente usados para fins de navegação ou meteorológicos. As formas são preservadas, mas as áreas são distorcidas. Quanto maior a área, maior a distorção. Projeções de mapa de equivalente ou de igual área são aquelas que preservam a proporção ou áreas relativas dos objetos no mapa. Nesse tipo de projeção cartográfica, quanto maior a área mapeada, mais precisa ela será. As projeções cartográficas equidistantes preservam a distância das linhas que originam em um ou dois pontos no mapa ou têm escala adequada ao longo de uma ou mais linhas. As projeções cartográficas azimutais preservam a direção a partir de um ou dois pontos no mapa. São úteis para mapear rotas de aeronaves e embarcações marítimas entre portos. Uma única projeção cartográfica pode preservar mais de uma característica (por exemplo, uma projeção azimutal equidistante que preserva a direção e as distâncias a partir de um ou dois pontos no mapa), mas nem todas delas, como mostrado na tabela abaixo. Conforme Equivalente Equidistante Azimutal Conforme - Não Não Sim Equivalente Não - Não Sim Equidistante Não Não - Sim Azimutal Sim Sim Sim - Tabela: Ambas características podem ser preservadas por um mapa ao mesmo tempo? Existe outra classificação de projeções cartográficas que não preserva nenhuma das características do mapa, mas tenta minimizar todas as distorções no mapa. Estes são chamados de projeções Erro Mínimo (Minimum Error, ou Compromise) (mapas que não preservam a forma nem a área são chamados de Afiláticos). Uma maneira de visualizar a distorção é usando o que é chamado de indicador de Tissot. Este indicador caracteriza as distorções locais usando círculos e mostrando como esses círculos são transformados ao longo do mapa. Projeção conforme Figura 3. Projeção conforme com seu índice de Tissot. Os círculos permanecem como círculos por todo o mapa, mas suas áreas aumentam a medida que os círculos se movem do equador em direção aos pólos. Projeção equivalente Figura 4. Projeção equivalente com seu índice de Tissot. Os círculos tornam-se elipses, mas suas áreas permanecem as mesmas. Projeção equidistante Figura 5. Projeção equidistante com seu índice de Tissot. Observe que as alturas dos círculos são iguais, o que significa que a escala / distâncias ao longo dos meridianos são preservadas. Projeção azimutal equidistante Figura 6. Projeção azimutal equidistante com seu índice de Tissot. Observe que os círculos estão todos apontando para o centro do mapa e as alturas dos círculos são todas iguais. Outra maneira de classificar as projeções do mapa é pela superfície desenvolvível (“developable surface”) usada para criar o mapa. Uma superfície é desenvolvível se ela puder ser planificada sem introduzir distorções. As superfícies mais comumente usadas são: Cilindros (Figura 7), Cones (Figura 8) e Planos (Figura 9). Cilindro como uma superfície desenvolvível Figura 7. As projeções cilíndricas têm meridianos (longitude) e paralelos (latitude) encontrando-se em ângulos retos com as distâncias entre os meridianos sendo iguais. Cone como superfície desenvolvível Figura 8. As projeções cônicas têm meridianos retos indo para um ponto nos pólos. Os paralelos são arcos. Plano como superfície desenvolvível Figura 9. As projeções planas (comumente usadas em projeções azimutais) têm meridianos retos semelhantes às projeções cônicas, mas seus paralelos são círculos em vez de arcos. Existem inúmeras outras superfícies desenvolvíveis que podem ser usadas para transformar um globo em um mapa. Eles podem ser uma variação das superfícies comuns, como no caso de projeções pseudo-cilíndricas e pseudo-cônicas ou podem ser superfícies únicas e diferentes, como no mapa Dymaxion, que usa um icosaedro (poliedro com 20 faces), ou a Projeção de Cahill-Keyes que usa um octaedro (poliedro com 8 faces). A projeção de um mapa também pode ser classificada de acordo com seu aspecto (Figura 10) ou o modo como a superfície desenvolvível está posicionada no globo: Normal, Transversal ou Oblíqua. Aspectos de uma projeção cartográfica Figura 10. Aspectos de uma projeção cartográfica 2.3 Sistemas de referência de coordenadas Um Sistema de Referência de Coordenadas (SRC, ou CRS na sigla em inglês) é usado para especificar a localização de um objeto na superfície da Terra por meio do uso de coordenadas. SRCs podem ser classificados em dois: Sistemas de referência de coordenadas geográficas usam graus de latitude e longitude como coordenadas para se referir à posição. Sistemas de referência de coordenadas projetadas usam unidades lineares (por exemplo, metros, pés, quilômetros) de leste e norte como coordenadas. O conhecimento dos sistemas de referência de coordenadas é importante porque mesmo que dois mapas (ou camadas) mostrem o mesmo local, as coordenadas das localizações nesses mapas serão diferentes se os SRC que eles usam forem diferentes. Veja este exemplo: Mapa A e Mapa B mostram a mesma área e extensão. Eles são basicamente o mesmo mapa. A única diferença é o sistema de referência de coordenadas que eles usam. O Mapa A usa SRC X e o Mapa B usa SRC Y. Digamos que obtivemos a coordenada do Ponto 1, que é (10, 10), do Mapa A. Se olharmos para a coordenada (10,10) no Mapa B, é possível que o Ponto 1 não esteja lá, pois o Mapa B usa um SRC diferente. Ou, se você sobrepor os mapas um ao outro usando uma referência comum, os objetos dos dois mapas não coincidirão. Este conhecimento de sistemas de referência de coordenadas é importante para qualquer tipo de GIS. As versões do QGIS anteriores à versão 3 tinham a opção de ativar o que é chamado de “OTF” ou “Transformação On-The-Fly (em ‘tempo real’)”. Isso permitia que camadas com diferentes SRC fossem projetadas na tela do mapa como se estivessem no mesmo SRC. Com o QGIS 3 em diante, esta opção é ativada automaticamente como comportamento padrão do QGIS. QGIS também executa esta ação automaticamente para tarefas de processamento. Isso é muito importante porque se as camadas não estiverem no mesmo SRC, os resultados das consultas espaciais e do processamento como junções espaciais, clipes, etc. podem ser comprometidos. Você pode notar que alguns Sistemas de Referência de Coordenadas são referidos por seu Código EPSG. Este código se refere ao código do SRC no conjunto de dados de parâmetros geodésicos EPSG, que é um registro de dados geodésicos, sistemas de referência espacial, elipsóides terrestres, transformações de coordenadas e unidades de medida relacionadas. A maioria dos GIS, incluindo QGIS, referem-se ao código EPSG para identificar sistemas de referência de coordenadas, projeções e realizar transformações entre esses sistemas. Alguns códigos EPSG comuns incluem: EPSG: 4326 - WGS 84, sistema de coordenadas de latitude / longitude baseado no Sistema de Posicionamento Global (GPS) entre outros. EPSG: 3857 - Projeção Web Mercator usada para exibição por muitas ferramentas de mapeamento baseadas na web, como OpenStreetMap e Google Maps EPSG: 31973 a EPSG: 31974 e EPSG: 31978 a EPSG: 31985 - Universal Transverse Mercator (UTM) Zonas 19N a 20N, e 18S a 25S. Zonas UTM usadas no Brasil EPSG: 4674 - Sistema de Referência SIRGAS 2000, utilizado nas Américas a partir do ano 2000 2.3.1 Quiz Que tipo de projeção é melhor para os seguintes casos? um mapa de uso geral que precisa ter uma aparência agradável um mapa mostrando uma análise de área por unidade entre diferentes locais um mapa que mostra uma comparação de uma zona de 10 km de raio de diferentes locais Que tipo de sistema de referência de coordenadas (geográfico ou projetado) é melhor utilizado para os seguintes casos? mostrar a localização de pontos usando GPS calcular a distância entre dois pontos Verdadeiro ou falso - É possível preservar as seguintes características do mapa juntas em um único mapa: Área e forma Distância e direção 2.4 Tipos de dados espaciais Em sua essência, um Sistema de Informação Geográfica (SIG) deve ser capaz de modelar objetos, informações e fenômenos do mundo real, como limites de lotes, rios, estradas, temperatura, etc. Ele faz isso por meio de modelos de dados espaciais. Os modelos de dados espaciais são compostos de dois componentes principais que, quando combinados, modelam a realidade. Esses componentes são: Feições espaciais (ou geometria) Atributos Modelo de dados espaciais Existem dois modelos principais de dados espaciais: raster e vetorial. Embora qualquer objeto do mundo real possa ser representado por qualquer um dos dois modelos de dados, um deles é geralmente melhor para representar certos objetos do mundo real do que o outro. 2.4.1 Dados raster Os dados raster são mais utilizados para representar fenômenos contínuos, como elevação ou temperatura. Um raster é uma representação de objetos do mundo real composta de linhas e colunas de células ou pixels, no qual cada célula ou pixel representa uma área geográfica (pense em uma fotografia ou imagem). O valor da célula representa o valor de um atributo na referida área geográfica. O tamanho da área depende da resolução espacial do raster. Rasters são bastante úteis para modelagem de adequação de locais (suitability modelling), pois você pode combinar rasters por meio de operações matemáticas (álgebra de raster). Modelo de dados raster Figura 12. Um raster consiste em pixels de tamanhos iguais em linhas e colunas. Um pixel raster pode conter apenas um valor de cada vez. Assim, um raster pode modelar apenas um objeto ou fenômeno por vez. 2.4.2 Dados vetoriais Os dados vetoriais são mais utilizados para representar objetos discretos. Os dados vetoriais possuem três formas: ponto, linha e polígono. São mais preciso que rasters porque pontos, linhas e polígonos são modelados usando coordenadas bem definidas, tornando-os melhores na representação de objetos discretos do que rasters. Os vetores são comumente usados quando necessitamos precisão com comprimentos, áreas e distâncias. Eles também são úteis ao realizar análises de rede (por exemplo, encontrar o caminho mais curto um ponto a outro em uma rede de vias). Modelo de dados vetoriais Figura 13. Um vetor consiste em feições com seus atributos correspondentes. Comparado aos pixels raster, uma feição vetorial pode conter mais de um valor por vez. Esses valores são armazenados como colunas na tabela de atributos. Cada feição é armazenada como uma linha. 2.4.3 Quiz Qual tipo de dado pode representar melhor os seguintes objetos/fenômenos: estradas casas densidade populacional perigo de inundação 2.5 SIG As informações geográficas e de localização tornaram-se onipresentes no século 21 em todos os níveis de granularidade. Temos satélites, aeronaves e até drones comerciais que são capazes de capturar grandes quantidades de dados brutos em grandes áreas por longos períodos de tempo. Existem também sensores que coletam e reúnem informações de localização, como o GPS e outros aplicativos em nossos telefones e dispositivos. Com todos esses dados à nossa disposição, é fundamental saber gerenciá-los, analisá-los e apresentá-los. É aqui que entram os Sistemas de Informação Geográfica, ou mais comumente conhecidos como SIG, ou GIS. SIG é uma ferramenta / framework / sistema que nos permite trabalhar com informação geográfica (ou espacial) e sua correspondente informação de atributo (não espacial). Em particular, um GIS deve ser capaz de: Coletar, armazenar, editar, manipular, ou em termos mais gerais, gerenciar dados espaciais. Analizar os dados usando seu componente espacial (onde os dados estão) ou atributo (o valor dos dados). Apresentar os dados e análises como informações significativas por meio de mapas, gráficos, plotagens e outras visualizações. SIG não é apenas mapeamento. Embora a elaboração de mapas seja um dos aspectos mais importantes e comumente conhecidos do SIG, ela ainda é apenas uma parte de seus muitos recursos. Podemos ver a estrutura SIG moderna como sendo composta por: Dados - referem-se às informações utilizadas pelo SIG que podem ou não conter informações de localização (por exemplo, nomes de lojas, localizações de lojas). Tecnologia - inclui os componentes de hardware e software de um SIG - as máquinas, instrumentos e computadores com os aplicativos de software usados para fazer o trabalho geoespacial. Métodos e análises - referem-se à ciência e matemática em SIG, que permitem realizar consultas e cálculos espaciais e não espaciais (de atributos). Visualização - embora semelhante aos métodos e análises, a visualização pode ser considerada como um componente separado, pois se refere especificamente aos meios pelos quais um SIG representa os dados graficamente. Isso inclui não apenas mapas, embora seja o caso mais comum, mas também tabelas, gráficos, etc. Pessoas - são as pessoas e / ou grupos de pessoas que estão envolvidas no uso, desenvolvimento, ensino e manutenção de SIG. Todas as partes da estrutura SIG moderna - dos dados às pessoas - são essenciais para garantir seu sucesso. 2.5.1 Quiz Verdadeiro ou falso: Um SIG só pode ser usado com dados geoespaciais. Um mapa é sempre o resultado ao se usar um SIG. Aprender SIG é difícil e caro. 2.6 FOSS4G QGIS é apenas um exemplo de software livre e de código aberto para uso geoespacial (FOSS4G). Outros exemplos de FOSS4G são GRASS, PostGIS, GeoServer, GeoNode, etc. Esses aplicativos FOSS4G são ótimas ferramentas para trabalhar não só porque são confiáveis, mas também porque, sendo gratuitos e de código aberto, têm uma barreira de entrada menor e são altamente personalizáveis para qualquer necessidade. Você pode encontrar uma variedade de softwares geoespaciais gratuitos e de código aberto para cada necessidade e para cada parte do “stack” geoespacial. Stack de aplicativos de software livre e de código aberto para geoespaciais (FOSS4G) Figura 14. Uma amostra de stack geoespacial de código aberto (ou FOSS4G) (de Simon Nitz (https://twitter.com/si_nitz?lang=en)) 2.6.1 Software grátis Livre como em liberdade e não apenas grátis. Software livre é o software que adere às Quatro Liberdades Essenciais do Software Livre, que são: A liberdade de executar o programa como desejar, para qualquer propósito (liberdade 0). A liberdade de estudar como o programa funciona e alterá-lo para que ele faça o que você deseja (liberdade 1). O acesso ao código-fonte é uma pré-condição para isso. A liberdade de redistribuir cópias para que você possa ajudar outras pessoas (liberdade 2). A liberdade de distribuir cópias de suas versões modificadas para outros (liberdade 3). Ao fazer isso, você pode dar a toda a comunidade a chance de se beneficiar com suas mudanças. O acesso ao código-fonte é uma pré-condição para isso. 2.6.2 Código aberto Softwares de código aberto são aqueles que possuem licenças que permitem uso sem precisar pagar royalties e que permitem a reutilização do software, juntamente com acesso livre ao código-fonte. Por convenção, essas licenças de código aberto são aquelas que estão em conformidade com a definição de código aberto prevista pela Open Source Initiative. O código-fonte aberto não só garante acesso gratuito ao software e código-fonte, mas também a capacidade de redistribuir o software sem custos adicionais. Por causa da natureza aberta do software de código aberto, ele também é um ótimo modelo de desenvolvimento de software, no qual todos são livres para atualizar, melhorar, modificar e compartilhar suas modificações com a comunidade. 2.6.3 OSGeo Existem muitos softwares geoespaciais de código aberto e, às vezes, a parte mais difícil é saber onde e como começar a trabalhar com esses softwares. Felizmente, a Open Source Geospatial Foundation (OSGeo) (https://www.osgeo.org/) existe para ajudar a promover a adoção global de tecnologia geoespacial aberta e apoiar o desenvolvimento dessas tecnologias. 2.7 Se você quiser ir mais longe Se você quiser testar usar aplicativos FOSS4G facilmente, experimente o OSGeoLive (https://live.osgeo.org/en/index.html) que é uma distribuição Linux (sistema operacional) que vem pré-instalado com QGIS, GRASS e outros aplicativos FOSS4G. "],["introdução-ao-qgis.html", "Capitulo 3 Introdução ao QGIS 3.1 Introdução ao QGIS e à interface do QGIS 3.2 Instalando o QGIS 3.3 Complementos QGIS 3.4 Configurações QGIS 3.5 Formatos de arquivo do QGIS 3.6 Se você quiser ir mais longe", " Capitulo 3 Introdução ao QGIS Autor: Ben Hur Este módulo serve como uma introdução ao QGIS. No final deste módulo, os alunos devem estar familiarizados com: O que é o QGIS Interface do QGIS Configurações do QGIS Complementos do QGIS Eles também devem aprender: Como instalar e abrir o QGIS As diferentes partes e recursos da interface do QGIS Como editar o layout e o tema da interface As diferentes configurações do QGIS, como alterá-las e como elas afetam o QGIS O que são perfis de usuário e como usá-los O que são complementos e como instalá-los O módulo também irá discutir algumas nuances do QGIS e o que o torna único ou diferente de outros softwares GIS, como formatos de arquivo QGIS. As ferramentas e recursos necessários para este módulo são: Computador Conexão de internet QGIS 3.16 instalado no computador (https://qgis.org/en/site/forusers/download.html) Pré-requisitos: Conhecimento básico de informática Recursos adicionais: Manual do usuário QGIS - https://docs.qgis.org/3.16/en/docs/user_manual/ Manual de treinamento QGIS - https://docs.qgis.org/3.16/en/docs/training_manual/index.html O mapa abaixo (https://flic.kr/p/2jFfGJP), de Andrés Felipe Lancheros Sánchez, mostra partes da cidade de Bogotá na Colômbia feitas no estilo da pintura “Noite estrelada” de Vincent van Gogh. Mapa de Bogotá, Colômbia no estilo Noite Estrelada Este próximo mapa (https://flic.kr/p/2jAsphv) mostra dados de rastreamento de tempestade da NOAA (o órgão de metereologia do governo dos EUA) entre 1851 e 2020 feitos por Fajr Alim. Dados de rastreamento de tempestade entre 1851 a 2020 Este próximo (https://flic.kr/p/FA9TiR) é um mapa da Ilha Kerguelen, feito por Heinrich Lingnau Schneider. Mapa da Ilha Kerguelen Este último (https://flic.kr/p/2kqVzsg) é de tentativas de arremessos de quadra e pontos marcados por tentativa durante a temporada 81 do Torneio de Basquete Masculino UAAP em as Filipinas por Ben Hur Pintor. Tentativas de arremessos de quadra e pontos marcados na temporada 81 do UAAP O que todos esses mapas têm em comum? Todos eles foram feitos usando o QGIS. Os mapas mostrados acima foram todos criados no QGIS (https://qgis.org/en/site/), um Sistema de Informação Geográfica (SIG, ou GIS) gratuito e de código aberto. O QGIS pode ser usado com todos os tipos de dados espaciais (como dados de basquete no último exemplo) e não apenas com dados geoespaciais relacionados à Terra. As pessoas são capazes de criar mapas maravilhosos e surpreendentes, como os exemplos acima, porque o QGIS é gratuito, de código aberto e possui recursos poderosos de gerenciamento de dados, análise e apresentação. 3.1 Introdução ao QGIS e à interface do QGIS 3.1.1 O que é o QGIS QGIS, conhecido como Quantum GIS antes de seu lançamento 2.X, é um Sistema de Informação Geoespacial (GIS) maduro, multiplataforma, gratuito e de código aberto. É um GIS de nível enterprise que possui recursos para coletar, armazenar, analisar, apresentar e gerenciar dados espaciais e não espaciais. Ele também se integra bem com outras tecnologias geoespaciais existentes e serve como parte integrante de qualquer pilha (stack) FOSS4G (Software Livre e de Código Aberto para Geoespacial). Por ser multiplataforma, o QGIS pode ser executado em GNU / Linux, macOS, Windows e até mesmo Android. 3.1.2 Ciclo de lançamento e versões Os lançamentos e o desenvolvimento do QGIS seguem um cronograma / roteiro baseado no tempo (https://www.qgis.org/en/site/getinvolved/development/roadmap.html). Uma versão do QGIS é especificada por três números (X.Y.Z). Por exemplo, QGIS 3.16.4. X refere-se à versão principal. Neste caso, QGIS 3. Y refere-se à versão de lançamento. Neste caso, a versão 16. As versões de lançamento são sempre números pares, pois os números ímpares são reservados para versões de desenvolvimento. Z refere-se ao Point Release (PR) dessa versão. Para 3.16.4, isso significa que é o quarto ponto de lançamento da versão 3.16. Existem três ramificações (ou branches) principais do QGIS que os usuários podem instalar. Estas são a ramificação Long Term Release (LTR), a ramificação Latest Release (LR) e a ramificação Development (Nightly). Long Term Release (LTR) tem esse nome porque é mantido e recebe correções de bug até o próximo LTR ser lançado. Atualmente, isso significa um (1) ano. Em fevereiro de 2021, o LTR atual é 3.16.4. Está programado para ser substituído pelo QGIS 3.22.4 em fevereiro de 2022. Última versão (LR) refere-se a versão de lançamento do QGIS que contém os recursos mais recentes ou mais recentes. Um novo LR é lançado a cada quatro (4) meses. Por exemplo, um novo LR 3,18 foi lançado em fevereiro de 2021. O próximo LR (3.20) será lançado 4 meses a partir de agora, ou seja, em junho de 2021. Atualmente, cada terceiro LR se torna o próximo LTR. Por exemplo, o LTR de fevereiro de 2021 é a versão 3.16. O terceiro LR de 3.16 é 3.22, portanto, o próximo LTR será baseado na versão de lançamento 3.22. Development / Nightly é baseado na versão mais recente do código-fonte QGIS, mas é útil se você deseja testar, depurar ou ajudar no desenvolvimento do QGIS. Então, qual versão você deve usar? Depende. Se você precisa de uma versão que é mantida por mais tempo e não precisa necessariamente de novos recursos à medida que são lançados, a versão LTR pode ser a versão para você. Se você precisa dos recursos mais recentes e não se importa em fazer uma atualização a cada poucos meses, a versão LR pode ser ideal para você. Às vezes, também é bom dar uma olhada nas versões de desenvolvimento ou noturnas, especialmente se você estiver curioso ou animado com os próximos recursos do QGIS. Para obter mais informações, visite: https://bnhr.xyz/2020/10/26/about-qgis-versions-release-cycle-english.html 3.1.3 Exemplos de mapas QGIS QGIS Map Showcase Figura 1.1. Demonstração do mapa QGIS Para mais mapas criados com o QGIS, visite: https://www.flickr.com/groups/2244553@N22/pool/with/50355460063/ 3.2 Instalando o QGIS QGIS é multiplataforma e funciona em Linux, Windows e macOS. Sendo de código aberto, você pode construir e instalar o QGIS a partir de seu código-fonte, disponível em https://github.com/qgis/QGIS/. Instaladores e instruções de instalação também estão disponíveis em https://qgis.org/en/site/forusers/download.html ou https: //qgis.org/en/site/forusers/alldownloads.html. Para Linux (ou GNU / Linux), o QGIS geralmente está disponível no gerenciador de pacotes de sua distribuição. Para usuários Debian / Ubuntu, o QGIS tem repositórios para os ramos LR, LTR e Desenvolvimento (Development), bem como versões do QGIS com dependências do PPA ubuntugis-unstable. O QGIS também está disponível como pacote Flatpak ou no Conda. Para Windows, os usuários podem escolher entre o instalador de rede OSGeo4W ou os instaladores independentes. Há um instalador independente para a versão LTR e LR. Os instaladores autônomos são os mais fáceis de instalar e são recomendados para iniciantes. Várias versões do QGIS podem ser instaladas em seu computador ao mesmo tempo. Isso significa que você pode ter ambas as versões QGIS 3.16 e 3.18 instaladas. O OSGeo4W Network Installer é um pouco mais avançado e complexo do que os instaladores autônomos, mas também oferece a capacidade de atualizar e atualizar sua versão do QGIS no local, o que significa que você não precisará desinstalar uma versão mais antiga se quiser instalar um mais novo. Em alguns casos, você precisará de direitos de administrador para instalar o QGIS, portanto, se estiver instalando em um computador onde o seu usuário não possui direitos de administrador, pode ser necessário pedir ao seu administrador de TI ou escritório para instalar o QGIS para você. A instalação no Windows também vem com QGIS com GRASS (outro GIS Livre e de Código Aberto). Observe que o QGIS está removendo lentamente o suporte de 32 bits para Windows, então é melhor para instalar o QGIS em um computador que executa um sistema operacional de 64 bits. Para o macOS, existem instaladores oficiais “All-in-one” assinados para macOS High Sierra (10.13) e mais recentes. O QGIS ainda não foi autenticado conforme exigido pelas regras de segurança do macOS Catalina (10.15). Na primeira inicialização, clique com o botão direito no ícone do aplicativo QGIS, segure a tecla Option e escolha Abrir. 3.2.1 Partes da interface do QGIS Depois de instalar o QGIS, você pode executá-lo ou abri-lo como faria com qualquer programa em seu computador. Ao abrir o QGIS, você será saudado com a Interface do Usuário (IU, ou UI em inglês) padrão que se parecerá com a abaixo. A interface QGIS Figura 1.2. A interface QGIS em uma nova instalação Existem seis partes principais da interface de usuário do QGIS - barra de menu, tela do mapa, barra de ferramentas, painéis, barra de status e localizador. No centro da interface está uma tela de mapa. Painéis e barras de ferramentas podem ser posicionados em torno dessa tela. Os painéis também podem ser acoplados para criar um painel com várias abas. Existem também outras partes da interface, como a interface Python, janelas de complemento, etc. Barra de menus - a barra de menus é um menu hierárquico simples que fornece acesso às funções e comandos do QGIS. Geralmente está localizado na parte superior da interface. Tela do mapa - a tela do mapa é onde as camadas carregadas no QGIS são mostradas. Este é também o local onde os filtros, seleções, e simbologias criadas pelo usuário são refletidas. Mais de uma tela de mapa pode estar presente a qualquer momento. Um usuário pode aplicar zoom, panorâmica e até mesmo girar a tela do mapa. Uma tela de mapa também pode mostrar dados 3D. Barras de ferramentas - as barras de ferramentas mostram botões de acesso fácil aos comandos, recursos, complementos do QGIS. Eles podem ser movidos e encaixados na tela do mapa. A lista de barras de ferramentas pode ser encontrada, ativada e desativada na barra de menus em Exibir &gt; Barras de ferramentas. Exemplos de barras de ferramentas são a barra de ferramentas de atributos e a barra de ferramentas de digitalização. Painéis - os painéis são semelhantes às barras de ferramentas, mas, em vez de botões, fornecem uma interface para funções e recursos mais complexos. O painel de camadas e o painel do navegador são dois exemplos. Semelhante às barras de ferramentas, eles podem ser movidos e encaixados na tela do mapa. A lista de painéis pode ser encontrada, ativada e desativada na barra de menus em Exibir &gt; Painéis. Barra de status - a barra de status é comumente encontrada na parte inferior da interface e mostra informações relevantes, como CRS, escala, notificações, etc. Barra Localizadora - a barra Localizadora é encontrada no canto inferior esquerdo da interface do QGIS. Ele permite que o usuário acesse facilmente camadas, campos, algoritmos de processamento e outras funcionalidades no QGIS. Este é um dos recursos mais poderosos do QGIS. Partes da interface QGIS Figura 1.3. Partes da interface QGIS Uma das belezas do QGIS é a personalização ele que oferece aos seus usuários. Essa personalização começa com a interface do usuário. Ao editar algumas configurações e mover algumas partes da interface, você pode ter um QGIS semelhante a este abaixo: Interface QGIS com algumas personalizações Figura 1.4. A interface QGIS com algumas personalizações 3.2.2 Tutorial/Exercício: Mudando a aparência e layout da interface QGIS Abra o QGIS Clique no menu Visão Abra o QGIS e clique no menu Exibir Observe o menu Painéis Observe o menu Painéis Observe o menu Barras de ferramentas Observe o menu Barras de ferramentas Selecione as Barras de ferramentas e Painéis que você deseja mostrar na interface do usuário. Alguns dos painéis úteis incluem Estilização de camadas e Caixa de Ferramentas de Processamento. Mova as Barras de Ferramentas e Painéis para as posições que fizerem mais sentido para você Resetando a interface QGIS Para redefinir sua tela para as configurações padrão, vá para Configurações &gt; Opções &gt; Guia Sistema &gt; Configurações &gt; Botão Redefinir e reinicie o QGIS. 3.2.3 Quiz Verdadeiro ou falso: Você pode ter várias telas de mapa - Verdadeiro Você pode mostrar ou ocultar painéis e barras de ferramentas - Verdadeiro Você só pode colocar painéis no lado esquerdo ou direito da tela do mapa - Falso (você também pode colocar painéis acima ou abaixo da tela do mapa) 3.3 Complementos QGIS A capacidade de adicionar, criar e estender a funcionalidade do QGIS por meio de complementos (ou plug-ins) é um de seus recursos mais poderosos. A partir do QGIS 3.16.3, existem mais de 700 complementos disponíveis para o usuário baixar e melhorar. Esses complementos variam do complexo ao simples. Os complementos QGIS podem ser classificados como: Complementos core - integrado à sua versão do QGIS, não pode ser desinstalado Complementos externos - manualmente instalados por meio de busca em um repositório externo (ou seja, QGIS Official Plugin Repository) ou através do código-fonte. Os complementos podem ser instalados de três (3) maneiras: Através da caixa de diálogo Gerenciar e instalar complementos (Complementos &gt; Gerenciar e instalar complementos) Instalando do ZIP, que pode ser acessado na guia Instalar do ZIP na caixa de diálogo Gerenciar e instalar complementos. Adicionando manualmente o código-fonte na pasta de complementos do seu perfil QGIS. Essa pasta geralmente pode ser encontrada em: Linux: .local/share/QGIS/QGIS3/profiles/default/python/plugins Mac OS X: Biblioteca/Aplicativo/Suporte/QGIS/QGIS3/profiles/default/python/plugins Windows: C:\\Usuário\\&lt;Nome&gt;\\AppData\\Roaming\\QGIS\\QGIS3\\profiles\\default\\python\\plugins Menu Gerenciar e Instalar Complementos Figura 1.5. Acessando a caixa de diálogo Gerenciar e instalar complementos Diálogo Gerenciar e Instalar Complementos A caixa de diálogo Gerenciar e instalar complementos se conecta ao repositório de complementos oficiais do QGIS (ou qualquer repositório que você indicar na guia Configurações) para buscar complementos disponíveis para sua versão do QGIS. Possui cinco (5) abas: Aba Tudo - mostra TODOS os complementos disponíveis para sua versão QGIS, incluindo aqueles que já estão instalados em sua máquina Aba Instalados - mostra apenas os complementos instalados em sua máquina Aba não instalado - mostra os complementos que não estão instalados em sua máquina Aba Instalar a partir do do ZIP - permite que você instale complementos de um arquivo ZIP Aba Opções - oferece opções sobre quando verificar se há atualizações de complementos, incluir ou não complementos experimentais e obsoletos ou adicionar / alterar o repositório para buscar complementos Se o complemento que você está procurando está marcado como experimental ou obsoleto, você precisa marcar Mostrar complementos experimentais e Mostrar complementos obsoletos na guia Opções. A Barra de Pesquisa permite que você pesquise complementos encontrados no(s) repositório(s) de complementos aos quais você está conectado. Caixa de diálogo Gerenciar e instalar complementos Figura 1.6. A caixa de diálogo Gerenciar e instalar complementos 3.3.1 Tutorial/Exercício: Instalando um complemento QGIS Abra a caixa de diálogo Gerenciar e instalar complementos em Complementos &gt; Gerenciar e instalar complementos na barra de menus. Isso abrirá a caixa de diálogo Gerenciar e instalar complementos. Abrir caixa de diálogo Gerenciar e instalar complementos Caixa de diálogo Gerenciar e instalar complementos Instale os complementos a seguir procurando por eles na guia Todos e clicando em Instalar complemento no canto inferior direito da caixa de diálogo Gerenciar e instalar complementos. Memory Layer Saver Instalar o plugin Memory Layer Saver QuickOSM Instalar plugin QuickOSM Verifique se os complementos foram instalados com sucesso. O plugin Memory Layer Saver deve estar disponível em Complementos &gt; Memory Layer Saver na barra de menus, enquanto o plugin QuickOSM deve estar disponível em Vetor &gt; QuickOSM na barra de menus. 3.3.2 Quiz Verdadeiro ou falso Você pode remover ou desinstalar os complementos do Core - Falso Você pode adicionar complementos que não são encontrados no repositório oficial de complementos do QGIS - Verdadeiro 3.4 Configurações QGIS Configurações do sistema e do projeto As configurações do QGIS permitem que você edite e gerencie coisas diferentes sobre o QGIS, como perfis de usuário, estilos, sistemas de referência de coordenadas, atalhos de teclado, a interface do usuário, cores padrão, etc. As configurações do sistema podem ser encontradas no menu Configurações e são as configurações padrão usadas pelo QGIS, a menos que sejam substituídas pelas configurações de um projeto. As configurações do projeto podem ser encontradas em Projeto &gt; Propriedades e referem-se às configurações ou propriedades do projeto atual. Esses valores substituem os padrões do sistema. As Configurações do Sistema Figura 1.7. As configurações do sistema Configurações do projeto Figura 1.8. Configurações do projeto Mudando o tema QGIS Você pode alterar a aparência do QGIS em Configurações &gt; Opções &gt; Aba Geral. Você pode escolher entre três temas - padrão (default), Blend of Grey e Night Mapping. Você também pode alterar o tamanho dos ícones, a fonte usada pelo QGIS e outros padrões do sistema. Configurações gerais do QGIS Figura 1.9. Configurações gerais do QGIS Para algumas configurações no QGIS, pode ser necessário reiniciar o aplicativo para que tenham efeito. Perfis de usuário QGIS 3.X introduziu o conceito de Perfis de Usuário QGIS. Um perfil de usuário é uma coleção de configurações para complementos instalados, barras de ferramentas habilitadas, organização da interface do usuário e outras configurações. QGIS vem com um Perfil de Usuário padrão chamado default. Perfis de usuário permitem que o usuário crie configurações diferentes para análises específicas (por exemplo, um perfil de usuário específico para gestão de recursos hídricos, digitalização de dados, cartografia, etc.), projetos particulares ou mesmo clientes. Perfis de usuário podem ser criados e acessados na barra de menus em: Configurações &gt; Perfis de usuário. O perfil de usuário ativo é mostrado com [Perfil do usuário] na barra de título. Acessando perfis de usuário Figura 1.10. Acessando perfis de usuário Os perfis de usuário são salvos em um diretório em seu computador que pode ser acessado clicando em Configurações &gt; Perfis de usuário &gt; Abrir pasta de perfil ativo. 3.4.1 Tutorial/Exercício: Criando um perfil de usuário Vá para Configurações &gt; Perfis de usuário &gt; Novo perfil … Opção novo perfil Dê um nome ao seu novo perfil de usuário. caixa de entrada ‘novo nome de perfil’ Uma nova janela QGIS deve abrir com seu novo perfil de usuário. Observe que o nome do seu perfil é mostrado na barra de título do QGIS. Você percebe alguma diferença no novo perfil do usuário? Verifique a interface do usuário, os complementos e as configurações do perfil antigo e do novo perfil que você criou. 3.4.2 Quiz Verdadeiro ou falso Você só pode ter um perfil de usuário no QGIS. - Falso (você pode ter vários perfis de usuário) Você não pode substituir as configurações e propriedades do sistema. - Falso 3.5 Formatos de arquivo do QGIS 3.5.1 Arquivo de projeto QGIS (QGS / QGZ) Projetos QGIS estão para QGIS como arquivos .mxd são para ArcMap. Esses arquivos vêm como QGS (.qgs) ou QGZ (.qgz). A principal diferença entre os dois é que o formato QGZ é um arquivo compactado (zip) contendo um arquivo QGS e um arquivo QGD. O formato QGS é um formato XML para armazenar projetos QGIS. O arquivo QGD é o banco de dados sqlite associado do projeto QGIS que contém dados auxiliares para o projeto. Se não houver dados auxiliares, o arquivo QGD ficará vazio. Um arquivo de projeto QGIS contém tudo o que é necessário para armazenar um projeto QGIS, incluindo: título do projeto CRS do projeto a árvore de camadas configurações de ajuste relações a extensão da tela do mapa modelos de projeto legend docas mapview (2D e 3D) as camadas com links para os conjuntos de dados subjacentes (fontes de dados) e outras propriedades da camada, incluindo extensão, CRS, junções, estilos, renderizador, modo de mesclagem, opacidade e muito mais propriedades do projeto Os arquivos do projeto QGIS podem ser salvos em um banco de dados GeoPackage ou PostGIS. Salvar o arquivo do projeto junto com o arquivo de estilo e as camadas correspondentes em um único GeoPackage facilita o compartilhamento de projetos QGIS. 3.5.2 Definição da camada QGIS (QLR) Um arquivo de definição de camada QGIS (QLR) é um arquivo XML que contém um ponteiro para a fonte de dados da camada, além das informações de estilo QGIS para a camada. Atualmente, um arquivo QLR corresponde a uma única camada apenas. O caso de uso para este arquivo é simples: ter um único arquivo para abrir uma fonte de dados e trazer todas as informações de estilo relacionadas. Os arquivos QLR também permitem definir a fonte de dados subjacente em um arquivo fácil de abrir. Um exemplo de uso de QLR é para abrir uma camada de um banco de dados PostGIS. Em vez de se conectar ao banco de dados, encontrar a camada e aplicar um filtro, você pode apenas abrir um arquivo .qlr que aponta para a camada PostGIS correta com seu estilo e filtro correspondentes. 3.5.3 Arquivo de estilo QGIS (QML) QML é um formato XML para armazenar estilos de camadas. Um arquivo QML (.qml) contém todas as informações que dizem ao QGIS como renderizar geometrias de feições que incluem definições de símbolos, tamanhos e rotações, rótulos, opacidade, modo de mesclagem e muito mais. Um arquivo .qml deve ter o mesmo nome da fonte de dados a que ele corresponde. Quando ele for encontrado no mesmo diretório ou pasta da fonte de dados, carregar a fonte de dados também carregará automaticamente seu estilo, conforme definido no arquivo .qml. Por exemplo, se você tiver um GeoJSON chamado regioes.geojson e um arquivo QML chamado regioes.qml, carregar as regioes.geojson no QGIS aplicará os estilos definidos em regioes.qml na camada carregada. Ao usar GeoPackages (.gpkg), um arquivo .qml muitas vezes não é necessário, pois você pode salvar o estilo de uma camada diretamente no geopacote. 3.6 Se você quiser ir mais longe Você pode tentar criar seu próprio plugin QGIS. Se não houver um complemento que faça o que você deseja, você pode criar um você mesmo. O Plugin Builder é um plugin que cria um modelo que pode servir como ponto de partida para o desenvolvimento do plugin QGIS para que você não precise criar um desde o início. Você pode instalá-lo na caixa de diálogo Gerenciar e instalar complementos. Claro, você sempre pode criar um plugin do zero. Se você estiver interessado em criar seu próprio plugin, pode verificar a documentação oficial do QGIS (https://documentation.qgis.org/). Para complementos Python, é uma boa ideia verificar o PyQGIS Developer Cookbook (https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/). Para obter mais informações, consulte: https://bnhr.xyz/2018/10/08/qgis-plugins-3.0.html 3.6.1 Para praticar suas novas habilidades, tente… Altere o tema e a aparência da interface do usuário QGIS de acordo com sua preferência. Instale outros complementos QGIS. Altere outras configurações do QGIS. Crie um sistema de referência de coordenadas personalizado Adicione uma tela inicial personalizada (https://bnhr.xyz/2020/09/05/custom-splash-screen-qgis.html) "],["camadas-no-qgis.html", "Capitulo 4 Camadas no QGIS 4.1 Tipos de dados, formatos de arquivo, o painel do navegador e o painel de camadas 4.2 Propriedades da camada 4.3 Metadados geoespaciais 4.4 O gerenciador de fonte de dados e conexão com serviços remotos 4.5 Exportando camadas, camadas na memória (temporárias) e camadas virtuais 4.6 Para praticar suas novas habilidades, tente…", " Capitulo 4 Camadas no QGIS Autor: Ben Hur Este módulo irá ensinar-lhe os conceitos básicos das camadas no QGIS e como carregá-las. No final deste módulo, os alunos devem estar familiarizados com: as diferentes fontes de dados e formatos de arquivo que podem ser carregados no QGIS as diferentes maneiras que os dados podem ser carregados no QGIS alguns formatos de arquivo de dados comuns Eles também devem ser capazes de: carregar camadas (vetores e rasters) usando o painel do navegador e o gerenciador de fonte de dados conectar o QGIS a serviços remotos trabalhar com camadas temporárias e virtuais instalar alguns plug-ins que carregarão outros conjuntos de dados no QGIS mostrar propriedades da camada, como metadados informações salvar e exportar camadas As ferramentas e recursos necessários para este módulo são: computador conexão à Internet QGIS 3.16 instalado no computador (https://qgis.org/en/site/forusers /download.html) Pré-requisitos: conhecimento básico de operação de um computador familiaridade com formatos de dados espaciais e a interface QGIS (conclusão dos Módulos 0 e 1) Recursos adicionais: QGIS User Guide - https://docs.qgis.org/3.16/en/docs/user_manual/ Manual de treinamento QGIS - https://docs.qgis.org/3.16/en/docs/training_manual/index.html Basemaps no QGIS - https://bnhr.xyz/2018/10/07/basemaps-in-qgis.html Conectando o QGIS ao Serviços remotos - [https://bnhr.xyz/2018/10/12/connecting-qgis-to-remote-services.html] (https://bnhr.xyz/2018/10/12/connecting-qgis-to -remote-services.html) Spreadsheet Layers Plugin - https://bnhr.xyz/2018/07/27/plugin-fridays-spreadsheet-layers-plugin.html Análise de múltiplas camadas em GIS Figura 2.1. Uma sobreposição de mapa contendo diferentes camadas e tipos de dados (https://saylordotorg.github.io/text_essentials-of-geographic-information-systems/s11-02-multiple-layer-analysis.html) Aprendemos nos módulos anteriores que modelos de dados espaciais, como vetores e rasters, são modelos de objetos do mundo real e fenômenos e, embora seja perfeitamente normal ter uma única camada que modele uma única coisa (por exemplo, elevação, temperatura, localização de residências, zoneamento, etc.), na prática, se quisermos realizar análises úteis ou criar um modelo que reflita o mundo real melhor, então, precisaríamos usar vários dados e camadas juntos. Sobrepor vários mapas temáticos da mesma área, colocando-os uns sobre os outros, é uma das técnicas de análise geográfica mais antigas e comuns. A imagem acima nos dá um exemplo simples e concreto disso. Imagine que você é um consultor GIS encarregado de encontrar a melhor localização para uma nova escola. Para fazer isso, você precisaria reunir as informações relevantes que o ajudariam a decidir. Isso pode incluir informações sobre as ruas da cidade, lotes de terreno, localização e distribuição de possíveis estudantes, a topografia da área, uso do solo, etc. Esses conjuntos de dados podem vir em diferentes tipos e formatos. Alguns podem ser arquivos vetoriais, enquanto outros podem ser raster. Alguns podem estar no mesmo sistema de referência de coordenadas, enquanto outros podem estar em sistemas de referência de coordenadas diferentes. Alguns podem ser arquivos locais encontrados em seu computador, enquanto outros só podem ser carregados pela Internet. Por causa das muitas possibilidades do tipo de dados que você precisaria para sua análise espacial, um bom GIS deve ser capaz de manipular e gerenciar uma variedade de fontes de dados. 4.1 Tipos de dados, formatos de arquivo, o painel do navegador e o painel de camadas 4.1.1 Tipos de dados e formatos de arquivo comuns Além dos modelos de dados espaciais (rasters e vetores) discutidos no primeiro módulo, a familiaridade com formatos de arquivo geoespaciais e seus prós e contras também é importante para qualquer pessoa que faça análise espacial. A maioria das pessoas que são novas em GIS geralmente são apresentadas aos dados espaciais por meio de shapefiles. A maioria das pessoas nunca supera esse formato e usa shapefiles para todos os tipos e formas de dados vetoriais. Isso é semelhante a como uma marca específica como a Coca Cola começa a ser usada como o termo geral para refrigerantes. Isso não é necessariamente errado, mas é lamentável, pois os shapefiles são apenas um dos muitos tipos de formato de dados vetoriais. Na verdade, há muitos outros formatos de vetor como geopackage, geojson, topojson e flatgeobuf. O formato do shapefile, embora onipresente, tem algumas limitações significativas, como: Não é apenas um arquivo único. Na verdade, um shapefile consiste em vários arquivos, 3 dos quais são obrigatórios: .shp, .shx, .dbf. Todos os outros arquivos são chamados de arquivos secundários (sidecar). Tem um limite de tamanho de 2 GB para cada arquivo individual. Os nomes dos campos são limitados a 10 caracteres. Colunas de atributos são limitadas a 255 colunas. Não há suporte para alguns tipos de dados, como tempo. Não armazena explicitamente topologia. Outros formatos de dados, como GeoPackage, GeoJSON, TopoJSON e flatgeobuf, corrigem essas limitações dos shapefiles. Na verdade, QGIS e GRASS GIS mudaram para GeoPackage como o formato de arquivo vetorial padrão ao importar ou exportar camadas e, embora GeoPackage também tenha algumas limitações, é um formato completamente aberto e permite que a comunidade ajude a moldar o futuro do formato. Então, se não shapefiles, o que você deve usar? Não há nada de errado em usar shapefiles, especialmente se for adequado ao seu caso de uso. Se você não precisa de um conjunto de dados que vai além de 2 GB; se não houver problema em ter um limite de 10 caracteres para os nomes dos campos; ou se você estiver trabalhando com um pequeno número de arquivos localmente, um shapefile é totalmente adequado. No entanto, se você deseja empacotar seu projeto QGIS junto com todas as camadas (vetores, rasters), estilos e modelos; ou você deseja compartilhar vários tipos de camadas e dados espaciais em um único arquivo, vale a pena dar uma olhada em um GeoPackage. GeoPackages e GeoJSONs também são compatíveis com a web e podem ser usados diretamente por bibliotecas de mapeamento da web, como Mapbox e Leaflet. Você pode ler mais no link abaixo: https://bnhr.xyz/2018/12/12/i-choose-geopackage.html Enquanto isso, qualquer formato que pode ser representado como uma grade de pixels ou células pode ser lido pelo QGIS como dados raster. Isso inclui formatos de imagem como PNG (.png) e JPEG (.jpg). É importante notar que embora todos os formatos de arquivo de imagem possam ser lidos como rasters, nem todos são georreferenciados ou contêm informações geoespaciais que nos permitem localizá-los corretamente na Terra. Para instâncias como essa, podemos usar o que é conhecido como um arquivo mundial (ou world) (https://en.wikipedia.org/wiki/World_file). Um arquivo world é um arquivo de dados de texto simples separado, cujo nome é o mesmo do arquivo raster ao qual pertence e cuja extensão de arquivo tem a letra w adicionada ao final. Por exemplo, o arquivo world para world.png será nomeado world.pngw ou world.pgw. Alguns formatos de arquivo de imagem contêm georreferenciamento e informações explícitas e não precisam de um arquivo word. Alguns exemplos são GeoTIFFs (.tif ou tiff) e formato de arquivo ERDAS Imagine (.img). Para obter mais informações sobre formatos de arquivo, você também pode acessar: https://saylordotorg.github.io/text_essentials-of-geographic-information-systems/s09-03-file-formats.html Os Dados geoespaciais também podem vir no formato de bancos de dados geoespaciais. Eles podem ser bancos de dados de nível empresarial, como o Postgres, gratuito e de código aberto, com extensão PostGIS (https://postgis.net/) ou ArcSDE, proprietário da ESRI. Existem também bancos de dados geográficos de arquivos que podem armazenar diferentes tipos de dados (por exemplo, vetores e rasters) dentro deles. Alguns exemplos são o OGC GeoPackage, gratuito e aberto (.gpkg) (https://www.geopackage.org/) e o formato patenteado File Geodatabase da ESRI (.gdb). 4.1.2 Tipos de fontes de dados Um dos recursos mais poderosos do QGIS é sua capacidade de conectar, carregar e usar diferentes dados espaciais e não espaciais de uma variedade de fontes. O QGIS pode abrir: arquivos raster e vetoriais bancos de dados locais arquivos e bancos de dados na Internet por meio de seu identificador de recurso uniforme (URI) ou localizador de recurso uniforme (URL), serviços da web (serviços da web OSGeo e serviços da web ArcGIS), tile services e portais de dados como GeoNode e muitos mais… O QGIS também pode conectar e carregar dados de serviços como dados SRTM da NASA, imagens do planeta, SentinelHub, Google Earth Engine e OpenStreetMap através de plug-ins. Isso torna o QGIS um componente integral para qualquer infraestrutura ou fluxo de trabalho de dados espaciais. 4.1.3 Carregando camadas no QGIS Existem várias maneiras de carregar camadas no QGIS. Estes incluem: Arraste e solte a camada na Tela do Mapa QGIS ou no Painel de Camadas. Esta pode ser a maneira mais fácil de carregar uma camada no QGIS, mas não é a abordagem recomendada, pois há várias coisas que podem dar errado ao usar esta abordagem, como ao carregar dados tabulares não espaciais, por exemplo CSVs. Usando o Painel do navegador. Usando o Gerenciador de fonte de dados. Usando a barra de ferramentas do Gerenciador de fonte de dados e a barra de ferramentas Gerenciar camadas. NOTA: Ao carregar camadas, as cores padrão de suas camadas podem ser diferentes das cores padrão mostradas neste módulo. 4.1.4 O painel do navegador O Painel do navegador exibe uma árvore de arquivos que mostra os arquivos e pastas do seu computador, bem como as conexões com bancos de dados e servidores web. Por padrão, ele é encaixado no lado esquerdo da interface do usuário QGIS junto com o Painel de Camadas. O painel do navegador expõe muitas funcionalidades para conectar, carregar e mostrar informações sobre camadas. Você também pode criar conexões para diretórios favoritos e marcadores espaciais no painel do navegador. Para saber mais sobre o painel do navegador, acesse: https://docs.qgis.org/3.16/en/docs/user_manual/introduction/browser.html 4.1.4.1 Tutorial/Exercício: O painel do navegador Abra o QGIS. Verifique o painel do navegador (Figura 2.2). Se você não conseguir encontrar o painel do navegador, pode torná-lo visível em Exibir &gt; Painéis &gt; Painel do navegador na barra de menus. O painel do navegador QGIS Figura 2.2. O painel do navegador Observe como os drives e pastas podem ser expandidas para mostrar as subpastas dentro delas. Localize a pasta Módulo 2 - Camadas no QGIS (Figura 2.3) na árvore de arquivos (observe onde você salvou ou baixou o arquivo). Você deve ser capaz de ver os dados necessários para esta pasta de trabalho. No meu exemplo à direita, vinculei a pasta mencionada a um dos meus Favoritos para acessá-la facilmente no painel do navegador. Você pode adicionar um diretório favorito ao Painel do navegador clicando com o botão direito em Favoritos e adicionando o diretório. Verifique os arquivos dentro da pasta (Figura 2.3). Existem vários deles. A partir da própria árvore de arquivos, já podemos ter uma ideia dos arquivos e camadas que podemos carregar no QGIS. Os ícones à esquerda dos nomes indicam se os dados são um vetor , um raster , um banco de dados ou dados tabulares simples . Arquivos do módulo 2 no painel do navegador Figura 2.3. Os arquivos do módulo no painel do navegador Existem 5 arquivos na pasta de dados: um GeoPackage (data/module2/br_rj.gpkg) que contém um arquivo vetorial (br_rj_hospitais) e raster (br_rj_srtm_dem); um GeoJSON (data/module2/br_ufs.geojson); um arquivo kml (data/module2/br_rj_municipios.kml); um arquivo de forma (data/module2/br_pais.shp); e um arquivo de valores separados por vírgula (CSV) (data/module2/br_rj_escolas.csv). Clique com o botão direito em br_pais.shp e clique em Propriedades da camada (Figura 2.4). Isso abre a janela de propriedades da camada (Figura 2.5). Observe as informações fornecidas na janela. Qual é a geometria da camada? Qual CRS é usado? Quantos recursos existem na camada? Verificando as propriedades da camada Figura 2.4 Verificando as propriedades da camada Propriedades da camada no painel do navegador Figura 2.5. Propriedades da camada no painel do navegador Além de fornecer metadados nas camadas, você também pode visualizar a geometria e os atributos da camada na janela de propriedades da camada. Você pode carregar uma camada do painel do navegador: clicando duas vezes na camada clicando com o botão direito na camada &gt; Adicionar camada ao projeto arrastando a camada para a área do mapa Tente carregar as camadas br_pais, br_ufs e br_rj_municipios usando qualquer um dos métodos acima. As camadas vetoriais carregadas no QGIS Figura 2.6. As camadas vetoriais carregadas no QGIS 4.1.5 O painel de camadas O painel de camadas lista todas as camadas atuais no projeto. Ele ajuda a gerenciar sua visibilidade e ordem e pode ser usado para mostrar as propriedades da camada. O painel de camadas pode ser ativado em Exibir &gt; Painéis &gt; Painel de camadas ou usando o atalho CTRL + 1. Ele também é chamado de legenda do mapa. Se você carregou todos os vetores do exercício anterior, seu painel de camadas deve aparecer como abaixo: Painel de camadas Figura 2.7. O painel de camadas A visibilidade de uma camada pode ser controlada marcando ou desmarcando a caixa à esquerda do nome da camada. Ao arrastar as camadas para cima ou para baixo no painel Camadas, sua ordem pode ser alterada. Semelhante ao software de manipulação de imagem como GIMP ou Photoshop, as camadas listadas perto do topo são desenhadas sobre as camadas listadas abaixo. Portanto, se duas camadas mostrarem a mesma área, a camada mais alta no painel camadas será desenhada no topo da camada inferior e pode ocultar a camada inferior na tela do mapa. É importante notar esse ponto porque pode haver casos em que pensamos que uma camada não aparece no QGIS quando na realidade está sendo coberta ou escondida por uma camada em cima dela. NOTA: A ordem Z das camadas no Painel de camadas pode ser substituída pelo Painel de ordem das camadas. O painel de camadas também permite ao usuário renomear e remover camadas, filtrar a visibilidade da camada, criar e gerenciar grupos de camadas e visualizações de mapas. A tabela de atributos de uma camada vetorial também pode ser aberta no painel Camadas clicando com o botão direito do mouse na camada &gt; Abrir tabela de atributos. Para saber mais sobre o painel de camadas, acesse: https://docs.qgis.org/3.16/en/docs/user_manual/introduction/general_tools.html#layers-panel 4.2 Propriedades da camada Clicar com o botão direito em uma camada no painel Camadas e selecionar Propriedades da camada abrirá a caixa de diálogo Propriedades da camada. A caixa de diálogo Propriedades da camada Figura 2.8. A caixa de diálogo Propriedades da camada Existem várias guias na caixa de diálogo Propriedades da camada que permitem ao usuário ver informações e até mesmo editar / modificar propriedades relacionadas à camada. A guia Informações mostra uma representação somente leitura de informações resumidas e metadados da camada atual, incluindo: o provedor de dados metadados geometria ou informações de campo A guia Fonte mostra as configurações gerais para uma camada vetorial. Abas como Simbologia, Rótulos, Máscaras e Visualização 3D permitem que o usuário modifique a simbologia e o estilo da camada. Outras guias permitem que os usuários realizem junções com a Camada (Junção), obtenham informações sobre os campos de atributos (Campos), adicionem Formulários personalizados para adicionar novos dados (Formulários de Atributo) e muito mais. Outra guia que vale a pena mencionar é a guia Metadados, que fornece ao usuário a capacidade de criar e editar um relatório de metadados na camada. Isso inclui informações sobre: Identificação de dados: atribuição básica do conjunto de dados (dado pai, identificador, título, resumo, idioma …); Categorias às quais os dados pertencem, como categorias ISO e personalizadas; Palavras-chave para recuperar os dados e conceitos associados seguindo um vocabulário padrão; Acesso ao conjunto de dados (licenças, direitos, taxas e restrições); Extensão do conjunto de dados, seja espacial (CRS, extensão do mapa, altitudes) ou temporal; Contato do(s) proprietário(s) do conjunto de dados; Links para recursos auxiliares e informações relacionadas; e História do conjunto de dados. Um resumo das informações preenchidas é fornecido na guia Validação e ajuda a identificar possíveis problemas relacionados ao formulário de metadados. Atualmente, os metadados são salvos no arquivo de projeto, mas também podem ser salvos em um arquivo .qmd separado ao lado das camadas baseadas em arquivo ou em um banco de dados .sqlite local para camadas remotas. Para saber mais sobre as propriedades da camada vetorial, acesse: https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/vector_properties.html Para saber mais sobre as propriedades da camada raster, vá para: https://docs.qgis.org/3.16/en/docs/user_manual/working_with_raster/raster_properties.html 4.3 Metadados geoespaciais Metadados são simplesmente dados sobre os dados. Eles responde, o “quem, o que, quando, onde e como” dos dados e vem em todas as formas e tamanhos. Para fins de GIS, geralmente estamos preocupados com metadados geoespaciais. Os metadados geoespaciais são descritos pelo US Federal Geographic Data Committee (FGDC) como: “um arquivo de informações, geralmente apresentado como um documento XML, que captura as características básicas de um recurso de dados ou informações. Representa quem, o quê, quando, onde, por que e como do recurso. Metadados geoespaciais comumente documentam dados digitais geográficos, como arquivos de Sistema de Informação Geográfica (GIS), bancos de dados geoespaciais e imagens da Terra, mas também podem ser usados para documentar recursos geoespaciais, incluindo catálogos de dados, aplicativos de mapeamento, modelos de dados e sites relacionados. Os registros de metadados incluem os principais elementos do catálogo da biblioteca, como Título, Resumo e Dados de Publicação; elementos geográficos, como extensão geográfica e informações de projeção; e elementos de banco de dados, como Definições de Rótulo de Atributo e Valores de Domínio de Atributo.” A importância dos metadados é que eles não apenas promovem a transparência, mas também facilitam o compartilhamento de dados e informações. É por isso que é importante sempre adicionar metadados aos nossos conjuntos de dados. Ao adicionar metadados, é igualmente importante seguir padrões - regras e práticas amplamente promovidas, aceitas e seguidas - para que os metadados que criamos sejam interoperáveis. Um desses padrões é a ISO 19115: 2014 “Informação Geográfica - Metadados” da ISO / TC 211 ([https://www.iso.org/obp/ui/#iso:std:iso:19115:-1:ed-1:v1:en] (https://www.iso.org/obp/ui/#iso:std:iso:19115:-1:ed-1:v1:en)) 4.3.1 Tutorial/Exercício: Adicionando metadados Abra as Propriedades da camada da camada br_pais. Verifique as informações mostradas na guia Informações e observe as informações mostradas. Está completo? Podemos adicionar mais informações? Propriedades de informações da camada br_pais Figura 2.9. Propriedades de informações da camada br_pais Vá para a guia Metadados e tente adicionar mais informações sobre a camada, como extensão, categoria de dados, licença, etc. Clique em OK quando terminar. Editando alguns metadados Figura 2.10. Editando alguns metadados Vá para a guia Informações novamente e veja se algo mudou. A guia Informações após a edição de alguns metadados Figura 2.11. A guia Informações depois de editar alguns metadados 4.3.2 Quiz Verdadeiro ou falso: Todos os arquivos vetoriais são shapefiles. - Falso (um shapefile é um formato de arquivo de um arquivo vetorial. Outros formatos de arquivo de dados vetoriais incluem geopackage, geojson e flatgeobuf) Quando renderizado no mapa, uma camada que é superior no painel de camadas sempre cobrirá ou aparecerá no topo de uma camada que está abaixo no painel de camadas. - Falso (quando ativado, a ordem no painel de ordem de camadas substituirá a ordem no painel de camadas) Você pode verificar as informações de metadados sobre uma camada no painel Camadas e no painel do navegador. - Verdadeiro 4.4 O gerenciador de fonte de dados e conexão com serviços remotos 4.4.1 O gerenciador de fonte de dados Se você não quiser usar o painel do navegador para carregar camadas, você sempre pode usar o gerenciador de fonte de dados. O gerenciador de fonte de dados foi introduzido com o lançamento do QGIS 3. É um local único para adicionar e carregar camadas de diferentes fontes de dados no QGIS. Antes de sua introdução, havia janelas separadas para carregar diferentes fontes de dados (ou seja, uma para rasters, outra para vetores, etc.). Ele pode ser acessado via Camadas &gt; Gerenciador de fonte de dados ou CTRL + L. Gerenciador de fonte de dados Figura 2.12. O Gerenciador de fonte de dados 4.4.1.1 Tutorial/Exercício: O gerenciador de fonte de dados Abra o Gerenciador de fonte de dados. Ele contém guias no lado direito que pertencem ao tipo de fonte de dados que você deseja carregar ou conectar. Semelhante ao navegador, você pode carregar e conectar vários tipos de dados do Gerenciador de fonte de dados. Carregando vetores Para carregar vetores, vá para a guia Vetor. Podem ser carregados arquivos, arquivos dentro de um diretório, um banco de dados e até mesmo arquivos remotos por meio de um protocolo como HTTP, nuvem, etc. Vamos carregar o arquivo vetorial (br_rj_hospitais) encontrado dentro do geopackage br_rj. Esta camada é uma camada de pontos das localizações dos hospitais na cidade do Rio de Janeiro. Tipo de fonte: Arquivo Fonte: Selecione o geopackage br_rj usando o botão Clique em Adicionar Se houver mais de 1 arquivo vetorial dentro do geopackage, o QGIS pedirá que você selecione quais carregar. Carregando um vetor dentro de um GeoPackage Figura 2.13. Carregando um vetor dentro de um GeoPackage Carregando Rasters Para carregar um raster, vá para a aba Raster. Arquivos e arquivos remotos podem ser carregados por meio de um protocolo como HTTP, nuvem, etc. Há um raster (br_rj_srtm_dem) dentro do geopackage br_rj. Este raster é um modelo digital de elevação da região da cidade do Rio de Janeiro. Para carregá-lo: Tipo de fonte: Arquivo Fonte: Selecione o geopackage br_rj usando o botão pesquisar Clique em Adicionar Se há mais de 1 arquivo raster dentro do geopackage, o QGIS irá pedir para você selecionar quais carregar Carregando um raster dentro de um GeoPackage Figura 2.14. Carregando um raster dentro de um GeoPackage Carregando CSV e outros arquivos de texto delimitado Além de vetores e rasters, outro arquivo comum em GIS são CSVs e planilhas. Felizmente, é relativamente fácil carregar esses arquivos no QGIS. CSVs e outros arquivos de texto delimitados podem ser carregados por meio da guia Texto Delimitado no Gerenciador de Fonte de Dados, adicionando-os do Painel do Navegador e até mesmo arrastando-os para a Tela do Mapa. No entanto, algumas coisas devem ser consideradas se o CSV que você possui contém informações de geometria (por exemplo, localizações de pontos). A regra geral é: Use o Gerenciador de fonte de dados para carregar CSVs, quer eles contenham ou não informações de geometria. Se os CSVs forem carregados por meio do painel do navegador ou arrastando-os, certifique-se de que haja um arquivo CSVT correspondente para preservar os tipos de dados do campo. Se você encontrar problemas ao preservar os tipos de dados para seus textos delimitados (especificamente CSVs), você pode usar o que é chamado de arquivo CSVT. Você pode ler mais sobre como carregar CSVs no QGIS no seguinte link: https://bnhr.xyz/2018/08/07/specifying-csv-data-types-using-a-csvt-file.html CSVs e planilhas podem ser carregados no QGIS com ou sem informações espaciais ou geométricas. Quando carregados com informações espaciais, são tratados como dados vetoriais. Quando são carregados sem, são tratados como dados tabulares normais. Há um arquivo CSV na pasta de dados denominado br_rj_escolas.csv que contém as localizações das escolas no Rio de Janeiro. Para carregá-lo: Vá para a guia Texto delimitado Nome do arquivo: Selecione o br_rj_escolas CSV usando o botão pesquisar Formato de arquivo: CSV Opções de registro e campos: mantenha o padrão Definição de geometria: Coordenadas de ponto Campo X: longitude Campo Y: latitude Geometria CRS: EPSG: 4326 - WGS 84 Configurações de camada: Marque Olhar arquivo e Usar índice espacial Quando Olhar arquivo é marcado, as atualizações para o CSV local são refletidas automaticamente na camada carregada no QGIS. Usar índice espacial adicione um índice espacial à camada carregada, o que torna o processamento vetorial mais rápido. Carregando um arquivo CSV Figura 2.15. Carregando um arquivo CSV Assim que todas as camadas dos exercícios anteriores forem carregadas, o Painel de camadas deve ser semelhante à imagem abaixo: Painel de camadas com todas as camadas carregadas Figura 2.16. Painel de camadas com todas as camadas carregadas A tela do mapa deve ser semelhante a: Interface QGIS com todas as camadas carregadas Figura 2.17. Interface QGIS com todas as camadas carregadas Sinta-se à vontade para reorganizar as camadas no painel de camadas. 4.4.2 Conectando QGIS a serviços remotos Além de arquivos vetoriais e raster, QGIS também pode se conectar a serviços remotos, como serviços de tiles, OGC Web Services (WMS, WFS), e até ESRI ArcGIS Web Services. Esta conexão pode ser criada a partir do painel do navegador ou do gerenciador de fonte de dados. 4.4.2.1 Tutorial/Exercício: Conectando-se a tiles XYZ Os tiles XYZ geralmente são usados como mapas base e não são utilizados apenas em aplicativos de desktop, mas, mais comumente, em aplicativos da web. Para conectar a um servidor de tiles: Vá para Painel do navegador Clique com o botão direito do mouse em XYZ Tiles &gt; Nova conexão Adicione o seguinte: Nome: ESRI World Imagery URL: https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x} Clique em OK. Adicionando uma conexão XYZ no QGIS Figura 2.18. Adicionando uma conexão XYZ no QGIS Isso deve adicionar um item ESRI World Imagery em XYZ Tiles no painel do navegador. Servidor ESRI World Imagery Tile adicionado ao Painel do Navegador Figura 2.19. Servidor ESRI World Imagery Tile adicionado ao Painel do Navegador Você pode carregar a camada de mosaico XYZ como qualquer outra camada do Painel do Navegador. Camada do mapa base OpenStreetMap carregada no QGIS Figura 2.20. Camada OpenStreetMap carregada no QGIS BÔNUS: Se você deseja adicionar vários mapas de base em tiles XYZ no painel do navegador, siga as instruções nesta postagem: https://bnhr.xyz/2018/10/07/basemaps-in-qgis.html BÔNUS 2: Você pode adicionar os URLs dos tileservers encontrados no site Leaflet Providers (https://leaflet-extras.github.io/leaflet-providers/preview/) como tiles XYZ no painel do navegador. 4.4.2.2 Tutorial/Exercício: Conectando-se a WMS / WMTS e WFS WMS ou Web Map Service é um Open Geospatial Consortium (OGC) (https://www.ogc.org/) padrão de serviço da web de reclamação para exibição de imagens (tiles raster) pela Internet. Quando os dados são fornecidos via WMS, o usuário não pode editar diretamente as informações contidas neles nem alterar seu estilo. Enquanto isso, o WFS ou Web Feature Services é outro serviço da Web compatível com OGC para servir recursos (vetores) pela Internet. Quando os dados são fornecidos via WFS, o usuário tem acesso aos atributos subjacentes e à geometria, permitindo alterar estilos, editar e usar a camada para análise vetorial. Para conectar-se a um WMS: Vá para Painel do navegador Clique com o botão direito em WMS / WMTS &gt; Nova conexão Adicione o seguinte: Nome: Risco de inundação LiPAD 100 anos URL de: https://api.mapbox.com/styles/v1/osmph/cjqrynb300m522sper0emmgs6/wmts?access_token=sk.eyJ1Ijoib3NtcGgiLCJhIjoiY2pxbjF6czN2MGllbTQy4bXVUOW44ZDlMS Clique em adicionar Criando uma nova conexão WMS/WMTS Figura 2.21. Criação de uma nova conexão WMS / WMTS Isso deve adicionar um item de Risco de inundação LiPAD 100 anos nas conexões WMS / WMTS e OWS no painel do navegador. O LiPAD 100-year Flood Hazard WMS adicionado ao painel do navegador Figura 2.22. O LiPAD 100-year Flood Hazard WMS adicionado ao painel do navegador Você pode carregar as camadas WMS como qualquer outra camada do painel do navegador. Mapa de risco de inundação do WMS carregado no QGIS Figura 2.23. Mapa de risco de inundação do WMS carregado no QGIS A conexão com o WFS segue o mesmo procedimento. 4.4.3 Quiz Verdadeiro ou falso: Você só pode carregar arquivos locais no QGIS - Falso (você também pode carregar arquivos remotos, como aqueles armazenados online ou servidos por serviços da web) 4.5 Exportando camadas, camadas na memória (temporárias) e camadas virtuais 4.5.1 Exportando camadas do QGIS Exportar camadas (ou salvar camadas em arquivos) é simples no QGIS. Simplesmente clique com o botão direito do mouse na camada &gt; Exportar para visualizar as opções de exportação da camada. Exportando uma camada do QGIS Figura 2.24. Exportar uma camada do QGIS Salvar recursos como … permite que você salve a camada raster ou vetorial. Quando um filtro está ativo na camada vetorial, apenas os recursos filtrados (aqueles que aparecem na tela do mapa) são exportados. Salvar recursos selecionados como … é uma opção para camadas vetoriais que permite salvar apenas os recursos selecionados atualmente. Salvar como arquivo de definição de camada … cria um arquivo QLR (consulte Módulo 1, Formatos de arquivo QGIS) para a camada Salvar como arquivo de estilo de camada QGIS … salva um arquivo QML (consulte Módulo 1, Formatos de arquivo QGIS) para a camada Ao exportar uma camada, o QGIS oferece a opção de selecionar o formato do arquivo de saída, os campos a serem incluídos (se for um arquivo vetorial), o sistema de referência de coordenadas de saída e outras opções. Isso significa que você pode realizar a projeção de coordenadas exportando uma camada. Caixa de diálogo Salvar camada vetorial Figura 2.25. Caixa de diálogo Salvar Camada de Vetor Para obter mais informações sobre como salvar uma camada de um arquivo existente, vá para: [https://docs.qgis.org/3.16/en/docs/user_manual/managing_data_source/create_layers.html#save-layer-from-an- arquivo existente] (https://docs.qgis.org/3.16/en/docs/user_manual/managing_data_source/create_layers.html#save-layer-from-an-existing-file) 4.5.2 Camadas na memória Às vezes, não precisamos ou não queremos salvar fisicamente as camadas que usamos em nossa análise em nossos computadores, especialmente se forem apenas temporárias. QGIS entende isso e permite que os usuários criem camadas temporárias / rascunho (scratch). Essas camadas podem ser usadas de forma semelhante às camadas vetoriais regulares, mas não precisam ser permanentemente salvas em um arquivo em nossas unidades de armazenamento porque o QGIS as armazena na memória ou RAM. Camadas temporárias são mostradas no Painel de camadas com este ícone . Os resultados dos algoritmos de processamento são armazenadas como camadas temporárias por padrão. A desvantagem das camadas temporárias é que o QGIS “esquece” essas “camadas na memória” quando é fechado. Para remediar isso, podemos usar o plugin Memory Layer Saver para permitir que nossas camadas temporárias sejam persistentes. Ao salvar um projeto QGIS que usa camadas temporárias, é uma boa prática executar / ativar o plugin Memory Layer Saver primeiro. Para usar o plugin Memory Layer Saver, simplesmente vá para Plugins &gt; Memory Layer Saver antes de salvar e fechar seu projeto QGIS. Na próxima vez que você abrir seu projeto QGIS, as camadas temporárias (ou camadas na memória) ainda devem estar presentes. É claro que você também pode tornar a camada temporária permanente, exportando a camada para um arquivo. Ao clicar no ícone você abrirá automaticamente uma caixa de diálogo de exportação de camada. 4.5.3 Camadas virtuais Uma camada virtual é um tipo especial de camada vetorial que é criada “instantaneamente” como resultado de uma consulta de dados de outra camada. Por exemplo, podemos criar uma camada virtual que cria um buffer em torno de outra camada. Sempre que uma nova feição for adicionada à camada fonte, a camada virtual será atualizada automaticamente. Atualmente, as camadas virtuais não parecem funcionar com as camadas fonte na memória. As camadas virtuais são dinâmicas. Isso significa que quando a camada de base / origem é atualizada, a camada virtual também é atualizada. Isso pode economizar espaço e reduzir a duplicação de dados, já que os dados da camada virtual simplesmente obterão dados da camada base sem a necessidade de salvar nada no disco, embora possa haver alguma sobrecarga de desempenho se consultas ou operações complexas forem usadas para definir a camada virtual. Códigos semelhantes a SQL são usadas para definir a camada virtual. As camadas virtuais dependem de outras camadas, portanto, é importante que as camadas de base não sejam movidas ou renomeadas. Quando a camada de base é atualizada, você precisa atualizar a exibição do mapa fazendo uma movendo ou ampliando o mapa para mostrar a atualização da camada virtual. 4.5.4 Quiz Verdadeiro ou falso: Ao exportar uma camada vetorial, você pode selecionar o formato para salvá-la. – Verdadeiro Camadas temporárias (ou scratch) são sempre esquecidas pelo QGIS quando ele é fechado. - Falso (elas podem se tornar persistentes usando o plug-in Memroy Layer Saver) Quando a camada de base para uma camada virtual é atualizada, a camada virtual é automaticamente atualizada na tela do mapa sem a necessidade de entrada do usuário. - Falso (o usuário precisa atualizar a tela do mapa, movimentando ou ampliando antes que a atualização da camada virtual seja refletida na tela) 4.5.5 Se você quiser ir mais longe 4.5.5.1 Instale alguns plug-ins que servem como fontes de dados Alguns plug-ins fornecem a funcionalidade de carregar dados no QGIS. Estes incluem dados vetoriais, imagens de satélite, arquivos raster, mapas de base, etc. Tente instalar os seguintes plug-ins e descubra que tipo de dados eles carregam no QGIS: QuickOSM (https://plugins.qgis.org/plugins/QuickOSM/) SRTM-Downloader (https://plugins.qgis.org/plugins/SRTM-Downloader/) QuickMapServices (https://plugins.qgis.org/plugins/quick_map_services/) PS Alguns desses plug-ins exigem que você se inscreva para uma conta com o provedor de dados. 4.5.5.2 Conecte-se a instâncias GeoNode GeoNode (https://geonode.org/) é um sistema de gerenciamento de conteúdo geoespacial de código aberto construído com uma pilha FOSS4G madura que inclui PostGIS, GeoServer, MapStore, etc. Você pode pensar no GeoNode como um portal de dados geoespaciais. Você pode conectar facilmente o QGIS a uma instância GeoNode através do conector GeoNode no Painel do Navegador ou no Gerenciador de Fonte de Dados. Vá para o Painel do navegador Clique com o botão direito em GeoNode &gt; Nova conexão Adicione o seguinte: Nome: UNESCO IHP-WINS URL: [http://ihp-wins.unesco.org/](http://ihp-wins.unesco.org/) Conectar ao GeoNode Você pode saber mais sobre como conectar o QGIS a serviços remotos em: https://bnhr.xyz/2018/10/12/connecting-qgis-to-remote-services.html 4.5.6 Exercício/Tutorial: Camadas virtuais Abra o QGIS. Carregue uma imagem de satélite ou mapa base de satélite via tiles XYZ ou plugin QuickMapServices (por exemplo, Google Satellite). Crie uma nova camada de geopackage com na barra de ferramentas do Gerenciador de fonte de dados. Nomeie-o como arvores, adicione campos de raio (número inteiro) e espécies (texto) e use um CRS projetado (por exemplo, EPSG: 3857) Nova camada GeoPackage Quando for avisado de que o arquivo já existe, selecione Adicionar nova camada. GeoPackage Layer já existe Ative a edição na camada arvores clicando com o botão direito nela &gt; Alterne a edição ou clique na barra de ferramentas de digitalização. Selecione uma área na imagem de satélite que contenha árvores. Com a edição ativada, habilite a adição de pontos à camada Árvores clicando em (CTRL +.). Digitalize árvores individuais clicando em sua localização e adicionando as informações de atributo. Faça isso para 4 árvores. Para este exercício, você pode apenas adivinhar as informações. Adicionar novas árvores Depois de adicionar os pontos, não se esqueça de salvar suas edições clicando em na barra de ferramentas Digitalização antes de desligar a Edição. Novos pontos (árvores) adicionados Adicione uma camada virtual clicando em na barra de ferramentas do Gerenciador de fonte de dados. Defina o nome da camada para cobertura_de_arvores. Importe as árvores. Adicione a seguinte consulta: select fid, buffer(geometry, radius), species from arvores Criar camada virtual Camada virtual no QGIS Adicione um novo ponto e, em seguida, atualize a exibição do mapa (aplicando zoom ou panorâmica na tela do mapa) para ver a atualização na camada virtual. O que você notou? 4.6 Para praticar suas novas habilidades, tente… 4.6.1 Carregar rasters e vetores encontrados na internet Além de arquivos binários locais (vetores, rasters), o QGIS também pode carregar vetores e rasters encontrados na Internet. Use o Gerenciador de fonte de dados para carregar os dados do seguinte URL: https://raw.githubusercontent.com/benhur07b/stomp-covid19-data/master/spatial/stompcovidph_regions.geojson 4.6.2 Carregar uma planilha no QGIS usando o plugin Spreadsheet Layers Instale o plugin Spreadsheet Layers e tente carregar uma planilha no QGIS. O plugin aceita formatos Open Document Standard (.ods) e arquivos Microsoft Excel (.xls, .xlsx). Leia aqui: https://bnhr.xyz/2018/07/27/plugin-fridays-spreadsheet-layers-plugin.html 4.6.3 Dicas Se você precisar de uma camada de mapa mundial, tente digitar world na barra de Coordenadas da barra de Status. O que acontece? Este é apenas um dos “óvos de páscoa” (easter eggs), ou surpresas encontradas no QGIS quando você digita certas palavras na barra de Coordenadas. "],["osm-e-a-camada-de-assentamentos-de-alta-resolução.html", "Capitulo 5 OSM e a camada de assentamentos de alta resolução 5.1 Dados do OSM 5.2 Os dados da camada de assentamentos de alta resolução (HRSL) 5.3 Para praticar suas novas habilidades, tente…", " Capitulo 5 OSM e a camada de assentamentos de alta resolução Autor: Ben Hur Este módulo apresentará o OpenStreetMap (OSM) e a camada de assentamentos de alta resolução (High Resolution Settlement Layer - HRSL). No final deste módulo, os alunos estarão familiarizados com: Princípios do OpenStreetMap Dados e casos de uso do OpenStreetMap Dados e casos de uso da camada de assentamentos de alta resolução Eles também devem ser capazes de: carregar dados OSM como vetores e tiles no QGIS carregar o raster HRSL no QGIS As ferramentas e recursos necessários para este módulo são: computador conexão com a internet QGIS 3.16 instalado no computador (https://qgis.org/en/site/forusers/download.html) Camadas vetoriais br_rj_capital e br_rj_centro no arquivo module3.gpkg. Pré-requisitos: conhecimento básico de operação de um computador familiaridade com formatos de dados espaciais, a interface QGIS e como carregar camadas no QGIS (conclusão dos Módulos 0, 1 e 2) Recursos adicionais: OpenStreetMap - https: / /www.openstreetmap.org/ OpenStreetMap Wiki - https://wiki.openstreetmap.org/ Manual do usuário da API OVerpass - https://dev.overpass-api.de/overpass-doc/en/ Facebook - AHigh Resolution Settlement Layer - https://research.fb.com/downloads/high-resolution-settlement-layer-hrsl/ CEISIN - High Resolution Settlement Layer - https://ciesin.columbia.edu/data/hrsl/ HDX HRSL - https://data.humdata.org/search?organization=facebook&amp;q=%22High%20Resolution%20Population%20Density%20Maps%20%2B%20Demographic%20Estimates%22 Os mapas se tornaram onipresentes em nossas vidas diárias. Podemos simplesmente acessar nossos telefones e abrir aplicativos que utilizam mapas e dados de localização. Existem aplicativos que usamos para nos orientar e nos localizar, para navegar e ir de um lugar para outro; mapas são mostrados quando pedimos comida em nosso serviço de entrega favorito, etc. Os mapas se tornaram tão essenciais para o nosso dia a dia que nós tendemos a esquecer que existem lugares no mundo que ainda não estão mapeados ou não foram encontrados nos mapas digitais que usamos. A onipresença dos mapas em nossas vidas é um subproduto da grande quantidade de dados de localização e dados espaciais que estamos coletando. As oportunidades e o potencial para criar algo bom a partir dos dados geoespaciais disponíveis para nós são excelentes, mas isso só será possível se esses conjuntos de dados geoespaciais forem gratuitos e abertos. 5.1 Dados do OSM 5.1.1 O que é OSM? OpenStreetMap (OSM) (https://www.openstreetmap.org/) é um mapa editável gratuito de todo o mundo, construído por voluntários de todo o mundo e lançado com uma licença de conteúdo aberto. É um projeto que cria e distribui dados geográficos gratuitos para o mundo - um mapa do mundo feito pelas pessoas e para as pessoas. Se algo estiver faltando no OSM, você pode adicioná-lo. Se algo estiver errado no OSM, você pode corrigi-lo. OSM é um bem digital comum que amplia muito o valor das informações adicionadas a ele. Site do OpenStreetMap Figura 3.1. OpenStreetMap Para obter mais informações sobre por que o OpenStreetMap existe e sua importância, veja: https://wiki.openstreetmap.org/wiki/FAQ#Why_OpenStreetMap.3F Você também pode ler: https://wiki.openstreetmap.org/wiki/About_OpenStreetMap De acordo com o OpenStreetMap, ele possui “dados abertos, licenciados sob a Open Data Commons Open Database License (ODbL)” (https://opendatacommons.org/licenses/odbl/) pela OpenStreetMap Foundation (OSMF) (https://osmfoundation.org/) e você é livre para “copiar, distribuir, transmitir e adaptar nossos dados, desde que dê crédito ao OpenStreetMap e seus contribuidores. Se você alterar ou ampliar nossos dados, poderá distribuir o resultado apenas sob a mesma licença.” Ao criar um mapa que usa dados OSM, é necessário dar crédito a “contribuidores do © OpenStreetMap”. Você pode ler mais sobre os direitos autorais e a licença do OpenStreetMap aqui: https://www.openstreetmap.org/copyright 5.1.2 Onde o OSM é usado? Um dos principais valores do OpenStreetMap é a capacidade de coletar, editar e compartilhar dados de mapas que podem ser usados para muitos propósitos diferentes. Essa é a liberdade proporcionada pelo ObDL. Como o OpenStreetMap permite que os usuários utilizem seus dados com pouquíssimas restrições, há uma grande variedade de aplicativos, serviços e casos de uso que são construídos, estão sendo construídos ou podem ser construídos com o OpenStreetMap. O OpenStreetMap é usado para criar mapas, serviços de roteamento, educação e até mesmo para fins humanitários e de advocacy. Na verdade, existe o HOT (Humanitarian OpenStreetMap Team) ou a Equipe Humanitária OpenStreetMap (https://www.hotosm.org/), que é uma equipe internacional dedicada à ação humanitária e ao desenvolvimento da comunidade através do mapeamento aberto. O OpenStreetMap também é uma parte crucial de algumas comunidades de mapeamento de advocacy, como MapBeks (https://wiki.openstreetmap.org/wiki/MapBeks) - uma comunidade online de mapeamento LGBT, sediada nas Filipinas, que defende a inclusão e representação da diversidade voltada especificamente para lésbicas, gays, bissexuais, transgêneros, queer, intersexuais, etc. (LGBTQI +) no OpenStreetMap; e Mental Health AWHEREness (https://mentalhealthawhereness.com/) - uma plataforma e mapa on-line que mostram a localização de instalações e serviços de saúde mental que oferecem ajuda para pessoas nas Filipinas, organizada por voluntários. Uma lista de serviços baseados em OpenStreetMap pode ser encontrada em https://wiki.openstreetmap.org/wiki/List_of_OSM-based_services. 5.1.3 Como o OSM pode ser usado no QGIS? Os dados OSM podem ser usados no QGIS de várias maneiras. O primeiro é usando camadas de tiles derivadas de OSM como mapas base. Na verdade, o QGIS vem com uma conexão a uma camada de tiles do OpenStreetMap por padrão. Você pode encontrar essa camada chamada “OpenStreetMap” na lista de tiles XYZ no painel do navegador. Você pode adicionar outros tiles derivados do OSM no QGIS, como aqueles encontrados na lista de fornecedores do Leaflet (https://leaflet-extras.github.io/leaflet-providers/preview/). Os tiles derivados do OSM fornecem aos usuários acesso livre e aberto a um mapa de base atualizado, uma vez que esses tiles são normalmente atualizados para corresponder ao estado atual do OSM. Você também pode carregar os recursos do OSM como dados vetoriais no QGIS. Isso pode ser feito baixando dados OSM de sites como GEOFABRIK (https://www.geofabrik.de/data/download.html). Os dados de feições OSM também podem ser carregados diretamente no QGIS usando o plugin QuickOSM. Este plugin utiliza a API Overpass (https://wiki.openstreetmap.org/wiki/Overpass_API) que permite aos usuários selecionar rapidamente um subconjunto de OSM dados usando consultas. Isso é possível porque as feições no OSM (https://wiki.openstreetmap.org/wiki/Mapfeatures) são marcados (“tagueados”) usando um sistema de tags livre (https://wiki.openstreetmap.org/wiki/Tags) que permite ao mapa incluir um número ilimitado de atributos que descrevem cada característica. Essas tags podem então ser usadas para consultar certas feições com base em seus atributos / tags. Normalmente, a comunidade OSM e as comunidades locais concordam com certas combinações de chave e valor adequadas para as tags mais comumente usadas, que funcionam como um padrão informal. Isso garante que os usuários de dados possam esperar consistência na marcação de características comuns, como estradas, edifícios, etc. No entanto, usuários sempre podem criar novas tags para melhorar o estilo do mapa ou análises de suporte que dependem de atributos ou tags dos recursos previamente não mapeados. 5.1.3.1 Tutorial/Exercício: Carregando dados OSM no QGIS usando o plugin QuickOSM Neste exercício, vamos carregar dados da rede rodoviária e localizações de cadeias de fast food do OSM que podem ser encontradas no Rio de Janeiro, capital usando o QuickOSM plugar. QuickOSM funciona consultando as tags (chaves e valores) dos recursos do OSM. Para obter mais informações sobre como usar a chave / valor no QuickOSM, vá para: https://wiki.openstreetmap.org/wiki/Mapfeatures. Carregue as camadas vetoriais br_rj_capital e br_rj_centro encontradas dentro do geopackage module3. Certifique-se de que a camada br_rj_capital está sobre a camada br_rj_centro, para que ela seja visível. Camadas do Rio de Janeiro carregadas no QGIS Figura 3.2. Camadas do Rio de Janeiro (capital e centro da cidade) carregadas no QGIS Certifique-se de que o plugin QuickOSM está instalado e ativado. Ele deve aparecer em Vetor &gt; QuickOSM na barra de menus. Caso contrário, instale e ative o plug-in primeiro usando a caixa de diálogo Gerenciar e instalar plug-ins. Abra o plugin QuickOSM (Vetor &gt; QuickOSM &gt; QuickOSM). Uma caixa de diálogo deve abrir com cinco guias: Consulta rápida Permite ao usuário criar e executar uma consulta simples com uma combinação de valor-chave para carregar um subconjunto de dados de recursos OSM que atenda aos requisitos da consulta. Consulta Permite ao usuário executar consultas complexas usando a API Overpass. Possui um link para o aplicativo da web Overpass Turbo. Arquivo OSM: Permite ao usuário carregar dados de arquivos OSM brutos (por exemplo .pbf). Parâmetros: Permite ao usuário selecionar a API Overpass a ser usada. Sobre: Mostra informações sobre o plugin. Plugin QuickOSM Figura 3.3. Plugin QuickOSM Carregue todas as rodovias dentro da extensão da camada br_rj_centro. Chave: highway Valor: (em branco significa TODOS) Extensão da camada: br_rj_centro Avançado: Marque Nó, Caminho, Relação, Linhas, Multilinhas Carregar todas as estradas na extensão da camada br_rj_centro Figura 3.4. Carregue todas as rodovias na extensão da camada br_rj_centro Clique em Executar consulta. Basicamente, o que estamos dizendo ao QuickOSM é obter todos os recursos de linha ou multilinha marcados com uma chave (tag) de estrada e carregá-los no QGIS. Quando o plugin terminar de carregar a camada, seu mapa deverá ficar assim: Dados de estradas carregados do OSM Figura 3.5. Dados da rodovia carregados do OSM Observe que as camadas carregadas pelo QuickOSM são camadas temporárias. Você deve salvá-los como arquivos ou torná-los persistentes se precisar usá-los posteriormente. Se quiser ver a versão de consulta Overpass de sua Consulta Rápida, clique em Mostrar consulta e a consulta será aberta na guia Consulta. Você pode então editar sua consulta para torná-la mais complexa. A versão de consulta Overpass da consulta rápida para carregar rodovias Figura 3.6. A versão de consulta Overpass da consulta rápida para carregar rodovias Em seguida, vamos carregar todos os locais de restaurantes fast food na extensão da camada br_rj_capital. Abra o plug-in QuickOSM e coloque os seguintes parâmetros na guia Consulta rápida: Chave: amenity Valor: fast_food Extensão da camada: br_rj_capital Avançado: Marque Nó, Caminho, Relação, Pontos Carregar amenidades (pontos) marcados como fast_food na extensão da camada br_rj_capital Figura 3.7: Carregar amenidades (pontos) marcados como fast_food na extensão da camada br_rj_capital O resultado deve ser semelhante a abaixo: Locais de fast food carregados do OSM Figura 3.8: Locais de fast food carregados do OSM Observe que até mesmo dados fora dos polígonos são carregados. Isso ocorre porque estamos usando a extensão da camada como nossa caixa delimitadora. Se precisarmos apenas dos recursos dentro do polígono, podemos selecionar ou recortar esses recursos. O processo de como fazer isso será discutido em módulos futuros. 5.1.3.2 Quiz Verdadeiro ou falso: Um recurso no OpenStreetMap só pode ter uma tag ou atributo. -Falso Você só pode adicionar pontos no OpenStreetMap. -Falso (você também pode adicionar outros recursos, como linhas e polígonos) O OpenStreetMap só pode ser usado como um mapa online. -Falso (você também pode baixar e usar os dados vetoriais criados pelo OpenStreetMap, como ao usá-los com o plugin QuickOSM) 5.2 Os dados da camada de assentamentos de alta resolução (HRSL) 5.2.1 O que é High Resolution Settlement Layer (HRSL) ou camada de assentamentos de alta resolução? De acordo com o Facebook e o Center for International Earth Science Information Network (CIESIN) da Universidade de Columbia, EUA, o “High Resolution Settlement Layer (HRSL) fornece estimativas da população humana distribuição a uma resolução de 1 segundo de arco (aproximadamente 30 metros)”. Grades populacionais foram desenvolvidas para 140 países e podem ser acessadas no Humanitarian Data Exchange (https://data.humdata.org/search?organization=facebook&amp;q=%22High%20Resolution%20Population%20Density%20Maps%20%2B% 20Demographic% 20Estimates% 22). As estimativas da população são baseadas em dados do censo e imagens de satélite de alta resolução (0,5) da DigitalGlobe. Assentamentos e estruturas construídas pelo homem são identificados nas imagens pela aplicação de técnicas de visão computacional. Esses locais são então usados como um proxy para locais onde as pessoas vivem. Posteriormente, o CIESIN usou a alocação proporcional para distribuir os dados populacionais dos censos para as extensões de assentamento. Para a iteração atual do HRSL, sete mapas / conjuntos de dados para a distribuição de várias populações estão disponíveis: Densidade populacional geral Mulheres Homens Crianças (idades 0-5) Jovens (idades 15-24) Idosos (idades 60+) Mulheres em idade reprodutiva (idades 15-49) Dados HRSL em HDX Figura 3.9: Dados HRSL em HDX 5.2.2 Casos de uso do HRSL As grades populacionais fornecem informações precisas e de alta resolução tanto sobre o delineamento dos assentamentos em áreas urbanas e rurais quanto sobre o número de pessoas que vivem nelas. Essas informações são úteis para muitas áreas de pesquisa, como resposta a desastres e humanitária, planejamento e desenvolvimento de infraestrutura. Para ler mais sobre o HSRL, você pode ir para: Como trabalhar com dados de densidade populacional do Facebook - [http://www.statsmapsnpix.com/2021/01/how-to-work-with-facebook-population.html] (http://www.statsmapsnpix.com/2021/01/how-to-work-with-facebook-population.html) População aberta e desafios abertos - https://engineering.fb.com/2016/11/15/core-data/open-popul-datasets-and-open-challenge/ Conectando o mundo com mapas melhores - https://engineering.fb.com/2016/02/21/core-data/connecting-the-world-with-better-maps/ Mapeando a população mundial, um prédio por vez - https://arxiv.org/abs/1712.05839 5.2.2.1 Tutotial/Exercício: Carregando os dados HRSL no QGIS Os dados HRSL encontrados no HDX vêm em formato GeoTIFF (raster) e CSV (vetor). Os CSV são localizações de pontos com valores de população correspondentes. Para este exercício, um subconjunto de dados para seu país já foi preparado, mas você sempre pode baixar o conjunto de dados inteiro ou mesmo outros conjuntos de dados para experimentar. Carregue o arquivo raster hrsl_rj_capital_populacao no QGIS.O arquivo se encontra na pasta do projeto no Github, no caminho data/module3) O HRSL para Rio de Janeiro, capital Figura 3.10: O HRSL para Rio de Janeiro, capital Verifique as Propriedades da camada. Você também pode editar a Simbologia e o Estilo do raster (será discutido em um módulo futuro) 5.2.2.2 Quiz Quais conjuntos de dados foram usados para obter a localização dos assentamentos e alocar a população para estes assentamentos? Como o HRSL conseguiu os locais dos assentamentos? Como a população de uma área foi alocada para os assentamentos? 5.2.3 Se você quiser ir além 5.2.3.1 Use a API Overpass para criar uma consulta no OSM A API Overpass (https://wiki.openstreetmap.org/wiki/Overpass_API), anteriormente conhecido como OSM Server Side Scripting, ou OSM3S antes de 2011, é uma API somente leitura que fornece partes personalizadas selecionadas dos dados do mapa OSM. Ao contrário da API principal, que é otimizada para edição, a API Overpass é otimizada para consumidores de dados para obter um pequeno subconjunto dos cerca de 10 milhões de elementos no OpenStreetMap. Esses subconjuntos podem ser selecionados por critérios de pesquisa, como localização, tipo de objetos, propriedades de tag, proximidade ou combinações deles. A API Overpass serve como back-end para outros serviços baseados em OSM, como o plugin QuickOSM. O uso de uma consulta Overpass permite criar uma seleção de recursos mais complexa no QuickOSM. Por exemplo, vamos carregar todos os fast foods novamente dentro da extensão de br_rj_capital, mas desta vez vamos apenas pegar as franquias do Subway. Se você observar a tabela de atributos da camada de fast food, notará que ela possui um campo name. Os campos na tabela de atributos de dados carregados do OSM correspondem às chaves de tag, portanto, se quisermos apenas selecionar todos os ramos do Subway fast food, precisamos adicionar um filtro que seleciona um recurso se ele tiver um chave:valor de name:Subway. Este filtro pode ser facilmente adicionado na API Overpass. Abra o plugin QuickOSM e insira os parâmetros que usamos para consultar todos os fast foods. Parâmetros QuickOSM para carregar fast food no Rio de Janeiro Consulta rápida para carregar todas as comodidades marcadas como fast food Clique em Mostrar consulta. Versão Overpass da consulta Consulta Overpass para carregar todas as comodidades marcadas como fast food Edite a consulta e adicione a linha &lt;has-kv k=“name” v=“Subway”/&gt; após cada linha &lt;has-kv k=“amenity” v=“fast_food”/&gt;. Consulta Overpass para carregar fast foods Subway Consulta Overpass para carregar fast foods Subway Clique em Executar consulta. Isso deve carregar apenas as amenidades marcadas como fast_food com o nome Subway. O nome da camada será OsmQuery. Amenidades marcadas como fast food cujo nome é Subway carregado do OSM Amenidades marcadas como fast food cujo nome é Subway carregado do OSM Experimente com outras redes de fast food. Você também pode testar e criar consultas Overpass no Overpass turbo (https://wiki.openstreetmap.org/wiki/Overpass_turbo) que é uma ferramenta web de mineração de dados para OpenStreetMap. 5.3 Para praticar suas novas habilidades, tente… 5.3.1 Carregar mais recursos do OSM usando o plug-in QuickOSM Tente carregar outros recursos (pontos, linhas, polígonos) como hospitais, escolas, etc. usando o plugin QuickOSM. 5.3.2 Dicas Se você não conseguir encontrar a feição que deseja ou precisa no OpenStreetMap, você pode adicionar ou editar feições no próprio mapa. Inscreva-se em https://www.openstreetmap.org/ e comece a contribuir! "],["camadas-de-estilo.html", "Capitulo 6 Camadas de estilo 6.1 Painéis, guias e tipos de renderização principais 6.2 Raster básico e simbologia vetorial 6.3 Modos de mesclagem e efeitos de desenho 6.4 Substituições definidas por dados e geradores de geometria", " Capitulo 6 Camadas de estilo Autor: Ketty Este módulo foi desenvolvido para te ensinar como mudar a aparência visual de um mapa selecionando símbolos apropriados, cores de mapa e aplicando efeitos apropriados. Ao final do módulo, você deverá conhecer conceitos como simbologia e estilos de mapas. Além disso, você aprenderá as seguintes habilidades; camadas de estilo simbologia básica de raster e vetor e como aplicá-los a uma camada modos de mesclagem (blending) e efeitos de desenho usando expressões para executar uma operação espacial Ferramentas e recursos necessários: Computador Conexão com a Internet QGIS 3.16 ou posterior Camada do limite administrativo do Rio de Janeiro (dentro de module4.gpkg) Clínicas do Rio de Janeiro (dentro de module4.gpkg) Camada de assentamentos de alta resolução do Rio de Janeiro Pré-requisitos: Conhecimento básico de operação de um computador Compreensão razoável de todos os módulos anteriores Recursos adicionais: Simbologia QGIS - [https://docs.qgis.org/3.16/en/docs/training_manual/basic_map/symbology.html ] (https://docs.qgis.org/3.16/en/docs/training_manual/basic_map/symbology.html) Repositório de compartilhamento de estilo - [https://www.gislounge.com/qgis-style-sharing-repository/ ] (https://www.gislounge.com/qgis-style-sharing-repository/) Estilos - https://plugins.qgis.org/styles/ Style Hub - https://style-hub.github.io/ Hillshade no QGIS - [https://bnhr.xyz/2019/02/08/mapping-icebergs-in-qgis.html] (https://bnhr.xyz/2019/02/08/mapping-icebergs-in-qgis.html) Mapeando icebergs no QGIS - https://bnhr.xyz/2019/02/08/mapping-icebergs-in-qgis.html Vamos começar com um exemplo: Vamos imaginar que você está em uma nova cidade, talvez como turista, a lazer ou a negócios. A cidade tem uma gama de locais que você precisa ver, incluindo museus, cafés, praias, monumentos, lojas culturais e mercados. Em seguida, você recebe um mapa de papel da cidade que mostra a localização dos pontos de todos os lugares imperdíveis da cidade. Os pontos turísticos estão todos marcados com pontos vermelhos. Em sua opinião, este mapa facilitaria seu passeio pela nova cidade? Eu imaginaria que não. Por isso é sempre importante fazer um “Mapa com diferentes símbolos e cores”. O que você vê em seu mapa depois de aplicar conceitos de estilo é uma representação visual dinâmica dos dados com os quais você está trabalhando. 6.1 Painéis, guias e tipos de renderização principais 6.1.1 Painel de estilo da camada Este painel é um atalho para alguns dos recursos da caixa de diálogo de propriedades da camada. Na verdade, ele oferece uma maneira rápida e prática de definir a renderização e o comportamento de uma camada e de visualizar seus efeitos sem abrir a caixa de diálogo de propriedades da camada. Além de evitar que você tenha que lidar com o janela das propriedades da camada, ele também evita que você congestione a tela com diálogos de recursos, visto que incorpora a maioria deles (seletor de cores, propriedades de efeitos, edição de regras, substituição de rótulos…): por exemplo, clicar nos botões de cores dentro do painel de estilo da camada faz com que a caixa de diálogo do seletor de cores seja aberta dentro do próprio painel de estilo da camada, e não como uma caixa de diálogo separada. Em uma lista suspensa de camadas atuais no painel de camadas, selecione um item e: defina sua simbologia, transparência e histograma no caso de uma camada raster. Essas opções são as mesmas disponíveis na caixa de diálogo Propriedades do raster (https://docs.qgis.org/3.16/en/docs/user_manual/working_with_raster/raster_properties.html#raster-properties-dialog). Acesse o Diálogo de Propriedades Raster clicando duas vezes em Camada Raster-&gt; Geral defina sua simbologia e rótulos. Essas opções são as mesmas disponíveis na caixa de diálogo Propriedades do vetor (https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/vector_properties.html#vector-properties-dialog). Acesse a caixa de diálogo Propriedades do vetor clicando duas vezes em Camada do vetor-&gt; Geral siga todo o histórico de alterações que você aplicou ao estilo da camada no projeto atual; você pode, portanto, cancelar ou restaurar qualquer estado selecionando-o na lista e clicando em Aplicar. Outro recurso poderoso deste painel é a caixa de seleção Atualização ao vivo. Marque-o e suas alterações serão automaticamente renderizadas na tela do mapa conforme você avança. Assim, você não precisa mais clicar no botão Aplicar. Para ativar o painel, clique em Visão -&gt; Painéis e, a seguir, marque Estilização de camadas. Painel de estilo de camada Figura 4.1: Painel de estilo da camada 6.1.2 Guia simbologia nas propriedades das camadas Para acessar a guia Simbologia, clique duas vezes na camada para abrir as Propriedades de Camada -&gt; Clique em Simbologia Aqui, você pode especificar as configurações como o tipo de renderização, banda, valores mínimos e máximos, renderização de cores e reamostragem (resampling). Nas capturas de tela abaixo, você pode ver as guias de simbologia para conjuntos de dados vetoriais e raster, respectivamente; Guias de estilo para dados vetoriais Guias de estilo para dados raster Figura 4.2: Guia de simbologia para dados vetoriais e raster, respectivamente 6.1.3 Renderização raster: renderização de banda QGIS oferece quatro tipos diferentes de renderização. A escolha do renderizador depende do tipo de dados. O tipo de renderização padrão é a cor cinza de banda única. Você terá que alterá-lo para o tipo apropriado com base no tipo de dados. Cores multibanda (https://docs.qgis.org/3.16/en/docs/user_manual/working_with_raster/raster_properties.html#multiband-color) - se o arquivo vier com várias bandas (por exemplo, uma imagem de satélite com várias bandas). Valores paletados / únicos (https://docs.qgis.org/3.16/en/docs/user_manual/working_with_raster/raster_properties.html#paletted) - para arquivos de banda única que vêm com uma paleta indexada (por exemplo, um mapa topográfico digital), ou para uso geral de paletas para renderizar camadas raster. Faixa única de cinzas (https://docs.qgis.org/3.16/en/docs/user_manual/working_with_raster/raster_properties.html#singleband-gray) - a imagem será renderizada como cinza (uma banda só dela). O QGIS escolherá este renderizador se o arquivo não for multibanda nem paletizado (por exemplo, um mapa de relevo sombreado). Banda simples falsa-cor (https://docs.qgis.org/3.16/en/docs/user_manual/working_with_raster/raster_properties.html#label-colormaptab) - este renderizador pode ser usado para arquivos com uma paleta contínua ou mapa de cores (por exemplo, um mapa de elevação). Hillshade ((https://docs.qgis.org/3.16/en/docs/user_manual/working_with_raster/raster_properties.html#hillshade-renderer) - Cria hillshade (sombras de colina) a partir de uma banda. 6.1.4 Renderização de vetor Quando você carrega camadas de dados espaciais no QGIS Desktop, elas são estilizadas com uma renderização de símbolo único aleatória. Para alterar isso, clique em Camada-&gt; Propriedades-&gt; Estilo. Existem várias opções de renderização disponíveis no menu no canto superior esquerdo: Símbolo único - esta é a renderização padrão em que um único símbolo é aplicado a todas feições em uma camada. Categorizado - permite que você escolha um campo de atributo categórico para estilizar a camada. Escolha o campo e clique em Classificar e o QGIS aplicará um símbolo diferente a cada valor único no campo. Você também pode usar o botão Definir expressão de coluna para aprimorar o estilo com uma expressão SQL. Graduado - permite que você classifique os dados por um atributo de campo numérico em categorias discretas. Você pode especificar os parâmetros da classificação (tipo de classificação e número de classes) e pode usar o botão Definir expressão de coluna para aprimorar o estilo com uma expressão SQL. Com base em regras - use para criar estilos baseados em regras personalizadas. As regras serão baseadas em expressões SQL. Deslocamento de pontos - se você tiver uma camada de pontos com pontos empilhados, esta opção pode ser usada para deslocar os pontos para que fiquem todos visíveis. Polígonos invertidos - este é um novo renderizador que permite que uma camada de polígonos seja convertida em uma máscara. Por exemplo, um polígono de limite de cidade usado com este renderizador se tornaria uma máscara ao redor da cidade. Também permite o uso de renderizadores categorizados, graduados e baseados em regras e expressões SQL. 6.2 Raster básico e simbologia vetorial A simbologia de dados vetoriais pode variar de acordo com a transparência, cor, rotação e tamanho. Propriedades da camada e menu de simbologia Tipos de renderização vetorial Tipos de renderização raster (renderização de banda) 6.2.1 Tutorial/Exercício: Renderização vetorial Para demonstrar este exemplo, nós usaremos dois conjuntos de dados de exemplo; 1. Clínicas (equipamentos de saúde, identificados no OpenStreetMap com a tag “clinics”) e 2. Limite administrativo da cidade do Rio de Janeiro Adicione as duas camadas vetoriais ao QGIS; Clique no botão Adicionar camada vetorial ou use o painel do navegador. É assim que eles são renderizados por padrão. Você notará que temos uma camada de polígono e uma camada de pontos. O próximo passo é mudar a simbologia de cada um deles. As cores de preenchimento podem não ser as mesmas do que as você está vendo aqui, mas isso não é um problema porque o QGIS seleciona cores aleatoriamente quando você adiciona uma camada. Renderização padrão Figura 4.3: Clique duas vezes na camada vetorial de polígono, que também é a camada de limite administrativo da cidade do Rio de Janeiro Selecione a Aba Simbologia no menu que aparece Altere a Cor do preenchimento para Preenchimento transparente. Dica: Clique na seta suspensa em Cor do preenchimento O resultado deve ser o seguinte. Você pode notar que a opção sem preenchimento não tem cor Sem renderização de preenchimento para o polígono Figura 4.4: Polígono sem preenchimento A próxima etapa é simbolizar a camada de ponto que também é a camada rj_clinics Clique duas vezes na camada rj_clinics para abrir o diálogo Propriedades da camada. Altere o tipo de renderização de Símbolo Único para Categorizado, selecione Valor como amenity. O valor representa o campo de interesse. Especifique o símbolo e a escala de cor. Em seguida, clique em classificar. Diálogo de Propriedades da Camada Figura 4.5: Diálogo de Propriedades da Camada O mapa resultante deve ser o seguinte Renderização vetorial final Figura 4.6: Renderização vetorial final Lembre-se de organizar as camadas no Painel de camadas de forma que a camada poligonal fique abaixo da camada de pontos. Isso torna a camada de pontos visível. 6.2.2 Tutorial/Exercicio: Renderização raster Clique duas vezes na camada raster, que também é a camada de densidade populacional. Isso também significa que ela é um conjunto de dados normalizado e, portanto, pode ser visualizado como um mapa coroplético. Selecione a guia de simbologia no menu que aparece Altere o modo de estilo para ‘Banda simples falsa-cor’ Menu de simbologia Figura 4.7: Menu de simbologia Especifique a interpolação, escala de cor e modo. Clique em classificar. O resultado é um mapa coroplético mostrando a densidade populacional na cidade do Rio de Janeiro. Densidade populacional da cidade do Rio de Janeiro Figura 4.8: Densidade populacional da cidade do Rio de Janeiro Amplie para ver o novo mapa em maior detalhe Mapa ampliado Figura 4.9: Mapa ampliado Como alternativa, use o painel Estilização de camadas. 6.2.2.1 Quiz O que é simbologia de camada? elemento gráfico representado como um marcador, traço ou preenchimento um ponteiro para os dados originais um repositório de diferentes esquemas de cores Quais dos tipos de renderização abaixo são aplicáveis para dados vetoriais? renderizador de símbolo único renderizador sem símbolos renderizador categorizado renderizador graduado símbolo proporcional renderizador de cluster de ponto Quais são os tipos de renderização raster? pseudocolor de banda única cinza de banda única paletted cor multibanda 6.3 Modos de mesclagem e efeitos de desenho Alterando estruturas de símbolos Alterando efeitos de desenho e modos de mesclagem (blending) Visualização impactante de dados 6.3.1 Tutorial/Exercício Depois de carregar ambas as camadas no QGIS, a tela terá a aparência abaixo. Você notará que ambas as camadas têm um estilo simples. Este tutorial explicará como alterar efeitos de desenho e modos de mesclagem para uma melhor visualização. A área de trabalho inicial esperada Figura 4.10: A área de trabalho inicial esperada Abra a janela Propriedades da camada e clique no item de menu Simbologia para a camada de limites administrativos. Dica: faça isso clicando duas vezes na camada ou use o painel de estilo da camada. Ative o painel de estilo da camada clicando em: Visão -&gt; Painéis -&gt; Estilo da camada. Na parte inferior do menu Simbologia, há uma caixa de seleção para efeitos do Desenho. Vamos habilitar isso e, em seguida, clicar no botão personalizar efeitos à sua direita: Janela Propriedades da camada e menu de simbologia Figura 4.11: Janela Propriedades da camada e menu Simbologia Uma nova caixa de diálogo Propriedades de efeitos é aberta Caixa de diálogo Propriedades de efeitos Figura 4.12: Diálogo de propriedades de efeitos Você pode ver que atualmente o único efeito listado é um efeito Fonte (Source). Os efeitos Fonte não são particularmente interessantes - tudo o que fazem é desenhar a camada original inalterada. Mude para um efeito de Desfoque clicando na caixa de combinação Tipo de efeito e selecionando Desfoque. Você pode então experimentar com os parâmetros de desfoque. Selecione o tipo de efeito como desfoque Figura 4.13: Selecione o tipo de efeito como desfoque Aplique as configurações e você verá que a camada de polígono agora está desfocada. Agora estamos chegando a algum lugar! Camada desfocada Figura 4.14: Camada desfocada Vamos usar a caixa de diálogo Propriedades dos efeitos novamente. Agora vamos tentar algo um pouco mais avançado. Em vez de apenas um único efeito, é possível encadear vários efeitos para criar resultados diferentes. Vamos fazer uma sombra projetada tradicional adicionando um efeito de Sombra projetada sob o efeito Fonte. Diálogo de propriedades de efeitos Figura 4.15: Diálogo de propriedades de efeitos Os efeitos são desenhados de cima para baixo, então a sombra aparecerá abaixo dos polígonos de origem Efeito de sombra projetada Figura 4.16: Efeito de sombra projetada Você pode empilhar quantos efeitos desejar. Por exemplo, um brilho interno sobre um efeito fonte com uma sombra projetada por baixo de tudo. Experimente! Em geral, lembre-se de que os efeitos podem ser aplicados a uma camada inteira ou às camadas de símbolo individuais para feições dentro de uma camada. Basicamente, as possibilidades são quase infinitas! Os plug-ins Python também podem estender isso ainda mais implementando efeitos adicionais. Para mais exemplos sobre o que você pode fazer com Modos de mescla e Efeitos de desenho no QGIS, você pode verificar: * Hillshade no QGIS - [https://bnhr.xyz/2019/02/08/mapping-icebergs-in-qgis. html] (https://bnhr.xyz/2019/02/08/mapping-icebergs-in-qgis.html) * Mapeando icebergs no QGIS - [https://bnhr.xyz/2019/02/08/mapping- icebergs-in-qgis.html] (https://bnhr.xyz/2019/02/08/mapping-icebergs-in-qgis.html) 6.4 Substituições definidas por dados e geradores de geometria Executar uma operação espacial dentro da simbologia da camada 6.4.1 Tutorial/Exercício Um gerador de geometria é um tipo de camada símbolo que permite usar código para criar novas geometrias a partir de feições existentes e usar as novas geometrias ‘geradas’ como símbolos que podem, por sua vez, ter estilos aplicados. Este é um recurso poderoso e é melhor explicado com um exemplo. Você pode usar a simbologia do gerador de geometria com todos os tipos de camadas (pontos, linhas e polígonos). O símbolo resultante depende diretamente do tipo de camada. Muito resumidamente, a simbologia do gerador de geometria permite que você execute algumas operações espaciais dentro da própria simbologia. Por exemplo, você pode executar uma operação espacial de centróide em uma camada de polígonos sem criar uma outras camada de pontos. Além disso, você ainda tem todas as opções de estilo para alterar a aparência do símbolo resultante. Aqui está um tutorial de exemplo: Clique duas vezes na camada de limite administrativo Clique em Preenchimento simples e altere o tipo de camada de símbolo para Gerador de geometria. Antes de começar a escrever a consulta espacial, escolha o Tipo de geometria na saída. Neste exemplo, vamos criar centróides para cada recurso, então altere o Tipo de geometria para Ponto / Multiponto. Operação centróide na camada limite administrativa Figura 4.17: Operação centróide na camada limite administrativa Ao clicar em OK, você verá que o limite da camada administrativa é renderizado como uma camada de ponto. Acabamos de executar uma operação espacial dentro da própria simbologia da camada. Camada de pontos Figura 4.18: Camada de pontos Observe que uma maneira alternativa e mais fácil de escrever consultas espaciais é usando o ‘diálogo Expressões’. Clique no botão de expressões para abrir a caixa de diálogo de expressão. Aqui você terá acesso a uma extensa referência de funções. Você pode pesquisar uma função pelo nome. Por exemplo, digite “centróide” na barra de pesquisa. Com a simbologia do gerador de geometria, você pode realmente ir além da simbologia normal. Se você quiser ir mais longe, escreva uma consulta espacial para calcular um buffer em torno da camada de pontos, linhas ou polígonos. "],["fazendo-mapas.html", "Capitulo 7 Fazendo mapas 7.1 Exportando a tela do mapa 7.2 Adicionando e editando elementos do mapa ao layout de impressão 7.3 Automatizando a criação de mapas usando os recursos do Atlas", " Capitulo 7 Fazendo mapas Autor: Ketty Este módulo irá fornecer a você uma visão geral das etapas frequentemente necessárias para elaborar um mapa no QGIS. No final do módulo, os participantes conhecerão os seguintes conceitos: Tela do mapa e camadas relacionadas O layout de impressão e o layout de impressão Elementos e propriedades do mapa Além disso, você terá aprendido as seguintes habilidades; Usando o layout de impressão para fazer um mapa Adicionando elementos do mapa ao mapa Gerenciando layouts de impressão diferentes Ferramentas e recursos necessários: Computador Acesso à Internet QGIS 3.16 ou posterior Camada de limite administrativo rj_capital (dentro de module5.gpkg) rj_clinics (dentro de module5.gpkg) Unidades Federativas do Brasil, br_ufs (dentro de module5.gpkg) RJ High Resolution Settlement Layer Pré-requisitos: Conhecimento básico de como operar um computador Uma compreensão de todos os módulos anteriores Recursos adicionais: QGIS Map LayOut - https://docs.qgis.org/3.16/en/ docs/training_manual/map_layout/map_layout.html Modelos de layout - https://layout-hub.github.io/ Gerenciador de estilos - https://docs.qgis.org/3.16/en/docs/user_manual/style_library/style_manager.html Biblioteca de estilos - https://docs.qgis.org/3.16/en/docs/user_manual/style_library/index.html Vamos começar com um exemplo: Para fazer um mapa, você precisará de um tópico que gostaria de entender melhor, por exemplo ‘Distribuição espacial de clínicas (equipamentos de saúde) no Rio de Janeiro’. Você notará que o tópico fornece um tema para explorar e a localização geográfica. Munido com essas informações e os dados relevantes que permitem que você explore mais a questão, você pode prosseguir para elaborar um mapa. Este módulo enfocará os seguintes conceitos-chave de criação de mapas; tela do mapa e camadas relacionadas, o layout de impressão e elementos e propriedades do mapa. Primeiro, aqui estão as definições curtas de cada um: a tela do mapa e camadas relacionadas: é provavelmente o widget mais importante no QGIS porque mostra o mapa composto de camadas sobrepostas e permite a interação com o mapa e as camadas. Isso é abordado no Módulo 0: Introdução ao QGIS o layout de impressão: O layout de impressão fornece layout e recursos de impressão. Ele permite que você adicione elementos como o mapa, rótulos de texto, imagens, legendas, barras de escala, formas básicas, setas, tabelas de atributos e quadros HTML. Com o layout de impressão, você pode criar belos mapas e atlas que podem ser impressos ou salvos como um arquivo PDF, uma imagem ou um arquivo SVG. Esta é uma maneira poderosa de compartilhar informações geográficas produzidas com QGIS que podem ser incluídas em relatórios ou publicadas. Você pode salvar o layout como um modelo e carregá-lo novamente em outra sessão. Finalmente, a geração de vários mapas com base em um modelo pode ser feita por meio do gerador de atlas. A imagem abaixo mostra o layout de impressão e a interface do layout de impressão. Esta interface é aberta quando você abre um novo layout de impressão. Layout de impressão Figura 5.1: Layout de impressão elementos e propriedades do mapa: os mapas contêm muitas informações. A maioria dos mapas terá as cinco seguintes coisas: um título, uma legenda, uma grade, uma rosa dos ventos para indicar a direção e uma escala. O título informa o que está sendo representado no mapa. 7.1 Exportando a tela do mapa Neste tutorial, mostraremos duas maneiras de ‘Exportar a tela do mapa’ para o layout de impressão do QGIS. O primeiro método é direto, enquanto o segundo método explora os recursos mais avançados fornecidos pelo layout de impressão. 7.1.1 Primeiro método: Exportar a tela do mapa sem o layout de impressão As camadas de dados já devem estar adicionadas à tela do QGIS. As camadas podem então ser estilizadas para comunicar informações em seus dados. Adicione as decorações do mapa clicando em Exibir &gt; Decorações. Selecione sua decoração de mapa preferida. Por exemplo, você pode adicionar o rótulo de título, barra de escala e rótulo de direitos autorais. Para cada decoração, você terá que especificar as configurações em uma caixa de diálogo. A etapa final é exportar o mapa para o formato de imagem ou PDF. Para fazer isso, clique em Projeto &gt; Importar/Exportar e selecione o formato de exportação de sua preferência. A caixa de diálogo de exportação abaixo deve aparecer. Exportando a tela do mapa como imagem Exportando o mapa Figura 5.2: Exportando o mapa Clique em Salvar. O mapa na tela do QGIS será salvo como um documento PDF ou imagem. Navegue até o local onde o arquivo foi salvo e agora você pode imprimir ou compartilhar o mapa. Tela do mapa exportada como imagem Figura 5.3: Tela do mapa exportada como imagem 7.1.2 Segundo método: Exportar a tela do mapa para a impressão layout Neste tutorial, faremos um mapa mostrando a 1.) localização dos centros de saúde e 2.) densidade populacional do Rio de Janeiro. As camadas de dados já devem ser adicionadas à tela do QGIS. As camadas podem então ser estilizadas para comunicar as informações dos seus dados. Criando novo layout de impressão Figura 5.4: Criando novo layout de impressão A tela do mapa agora pode ser exportada para o layout de impressão. Clique no ‘botão novo layout de impressão’ . Isso pode ser acessado através da barra de ferramentas. Como alternative, acesse usando a barra de menu ‘Projetos’. Uma caixa de diálogo de título será aberta, solicitando que você digite o título do Layout de impressão. Digite ‘Rio de Janeiro’ e clique em OK. Nomeando o layout de impressão Figura 5.5: Nomeando o layout de impressão O layout de impressão será aberto A janela Layout de impressão Figura 5.6: A janela Layout de impressão Você notará que a tela do layout de impressão está vazia. Para adicionar o mapa estilizado da tela QGIS, clique no botão ‘Adicionar novo mapa ao layout’, clique com o botão esquerdo do mouse e desenhe um retângulo no espaço em branco no centro do layout de impressão. O mapa será adicionado. Você acabou de adicionar um mapa para o layout de impressão. Agora é possível adicionar todos os outros elementos do mapa, como título, legenda, grades, etc. Adicionar mapa ao layout de impressão Figura 5.7: Adicionar mapa a Layout de impressão 7.1.3 Quiz O que é a tela do mapa QGIS? mostra o mapa composto de camadas de mapa sobrepostas permite interação com o mapa e camadas um widget para fazer mapas Qual é a utilidade do layout de impressão? fornece layout crescente e recursos de impressão permite adicionar elementos do mapa lidar com a exportação e impressão de mapas Qual dos seguintes não é um elemento do mapa? Título Escala Legenda Cores e designs 7.2 Adicionando e editando elementos do mapa ao layout de impressão 7.2.1 Tutorial/Exercício Agora que o mapa estilizado foi adicionado ao layout de impressão, é hora de adicionar elementos importantes como o título, escala, legenda, grade, metadados etc. para o layout de impressão. A maioria dos botões está localizada à esquerda do layout de impressão. Clique no botão ‘Adicionar rótulo’ , mantenha pressionado o botão esquerdo do mouse e desenhe um retângulo onde deseja colocar o título do mapa. Digite o título no menu ‘Propriedades principais’ no lado direito do layout de impressão. As propriedades da fonte podem ser alteradas no item de menu ‘Aparência’. Adicione o título do mapa Figura 5.8: Adicione o título do mapa Em seguida, adicionaremos a legenda e a escala. Uma declaração de atribuição de dados pode ser adicionada usando o botão ‘Adicionar rótulo’. Clique no botão de Adicionar rótulo na barra da esquerda. Siga as mesmas etapas do item 1. acima para adicionar esse elemento ao layout de impressão. Você pode adicionar outros elementos do mapa, mas tome cuidado para que o mapa não fique muito confuso. Barra de escala Figura 5.9: Adicionar barra de escala ao mapa Legenda Figura 5.9: Adicionar legenda ao mapa Atribuição Figura 5.10: Adicionar atribuição ao mapa Se o layout do mapa estiver satisfatório, você já pode exportar o mapa um PDF, PNG, JPEG ou SVG, pronto para impressão. Lembre-se também de salvar o layout. Todas as funções de salvamento podem ser acessadas através do menu ‘layout’. Salve o mapa como uma imagem usando Layout &gt; Exportar como imagem ou clicando no botão Exportar como imagem . O QGIS irá perguntar a você em qual arquivo salvar o mapa, bem como os parâmetros da imagem. Parâmetros de imagem Figura 5.10: Adicionar atribuição ao mapa Mapa exportado como img. Figura 5.11 : Mapa exportado como imagem 7.2.2 Quiz Em qual das seguintes guias você pode alterar as propriedades dos elementos do mapa? Composição Propriedades do item Geração de Atlas Qual é a diferença entre o layout do mapa e o layout de impressão? -O layout do mapa permite que você adicione mapas da tela do mapa, enquanto o layout de impressão permite que você componha seu mapa Como você pode adicionar texto de atribuição ao layout do mapa? -Adicione uma caixa de título e digite o texto de atribuição. Observe que a caixa de título permite que você adicione todas as formas de texto ao seu mapa. 7.3 Automatizando a criação de mapas usando os recursos do Atlas 7.3.1 Tutorial/Exercício Se sua organização publica mapas impressos ou on-line, geralmente você precisa criar muitos mapas com o mesmo modelo - geralmente um para cada unidade administrativa ou região de interesse. Criar esses mapas manualmente pode levar muito tempo e, se você quiser atualizá-los regularmente, isso pode se tornar uma tarefa árdua. O QGIS tem uma ferramenta chamada Atlas que pode ajudá-lo a criar um modelo de mapa e publicar facilmente um grande número de mapas para diferentes regiões geográficas. Vamos tomar as diferentes Unidades Federativas do Brasil como exemplo: Camada de cobertura Figura 5.12: Camada de cobertura Tabela de atributos Figura 5.13: Tabela de atributos Esta camada servirá como camada de cobertura externa, o que significa que o Atlas QGIS irá cirar um mapa para cada uma das feições dessa camada de cobertura. Ao todo, serão gerados 27 mapas. Abra ou crie um novo Layout de impressão e adicione um mapa. Layout de impressão do Atlas Figura 5.14: Layout de impressão do Atlas No painel direito do Layout de impressão, certifique-se de selecionar o menu Atlas e marque a caixa Gerar um atlas. Você também pode abrir as Configurações do Atlas usando o botão Configurações do Atlas na barra de ferramentas do Atlas. Geração Atlas Figura 5.15: Geração Atlas A próxima etapa é escolher a camada de cobertura; A camada de cobertura é a camada de índice usada para criar cada página. Um mapa/página para o Atlas será gerada para cada feição na camada de cobertura. No nosso caso, usar a camada de cobertura br_ufs criará um mapa para cada uma das 27 UFs. O QGIS Atlas altera dinamicamente a extensão da visualização para cada recurso na camada de cobertura. Você pode optar por tornar a camada de cobertura oculta nos mapas que você cria (ou seja, a camada de cobertura não será visível no Layout de Impressão) e selecionar como nomear cada página do Atlas. Você também pode realizar alguma filtragem e classificação da camada de cobertura, se necessário. Para a Saída, você pode optar por ter um único arquivo como saída marcando a caixa de seleção Exportar arquivo único quando possível. Se desmarcado, você gerará um arquivo diferente por mapa. Selecionar camada de cobertura Figura 5.16: Selecionar camada de cobertura Agora que definimos a camada de cobertura, devemos dizer ao Layout de impressão para usar o atlas para controlar a extensão dos mapas (área visível no mapa imprimível) que iremos gerar. Na guia Propriedades do item, marque a caixa para Controlado pelo Atlas Controlado pelo Atlas Figura 5.17: Certifique-se de que a extensão do mapa é controlado pelo Atlas Para visualizar seu Atlas, clique no botão Visualizar Atlas na barra de ferramentas Atlas. Isso mostrará os 27 mapas que você gerou. Use a barra de ferramentas do Atlas para navegar pelos mapas do Atlas. Atlas Preview Figura 5.18: Atlas Preview Você pode exportar os mapas do Atlas através do botão Exportar Atlas como imagens ou PDFs. Selecione Exportar Atlas como imagem. Você deve gerar 27 mapas, e cada mapa mostrará a extensão de uma das UFs. Resultado do Atlas Figura 5.18: Resultado do Atlas DICA: Para este exemplo, mapeamos apenas a camada de cobertura. O poder do Atlas é quando mapeamos várias camadas. Por exemplo, temos as clínicas, rede de estradas e dados de densidade populacional para todo o país carregados como camadas no QGIS. Em seguida, gostaríamos de criar um mapa para cada uma das UFs mostrando essas mesmas camadas. Usar o Atlas exigiria que criássemos apenas um modelo de layout e deixássemos o Atlas lidar com a geração dos outros mapas com base na camada de cobertura que usamos. DICA: Você pode usar as expressões QGIS e substituições definidas por dados para definir os outros elementos do mapa em seu Atlas para que eles também mudem dinamicamente, dependendo da feição da camada de cobertura que está sendo mapeado. Por exemplo, você pode usar uma expressão QGIS chamando o valor do campo NAME_1 em seu rótulo para que ele mude dinamicamente para exibir o valor de NAME_1 para a feição atual que está sendo mapeada. Para obter mais informações sobre o Atlas QGIS, consulte: https://www.youtube.com/watch?v=tOnMJBUvEjY. "],["atributos-da-camada.html", "Capitulo 8 Atributos da camada 8.1 Editando atributos da camada 8.2 Entender e trabalhar com dados de atributos, consultas e análises 8.3 Expressões de QGIS avançadas", " Capitulo 8 Atributos da camada Autor: Ketty Este módulo fornecerá uma visão geral das etapas comuns necessárias para trabalhar com a tabela de atributos e atributos da camada no QGIS. No final do módulo, você será capaz de entender os seguintes conceitos: Trabalhando com a tabela de atributos Usando a calculadora de campos Gerador de expressões QGIS Campos de refatoração Além disso, você aprenderá as seguintes habilidades: Entendendo a interface da tabela de atributos Interagindo com recursos em uma tabela de atributos Salvando recursos selecionados como nova camada Editando campos de camada Você usará a calculadora de campo e o gerador de expressão QGIS para executar operações matemáticas e funções no QGIS. Ferramentas e recursos necessários: Computador Conexão com a Internet QGIS 3.16 e superior Camada de limite administrativo do Rio de Janeiro rj_capital (dentro de module6.gpkg) Clínicas do Rio de Janeiro rj_clinics (dentro de module6.gpkg) UFs do Brasil br_ufs (dentro de module6.gpkg) RJ High Resolution Settlement Layer Pré-requisitos: Um conhecimento razoável de todos os módulos anteriores Conhecimento básico de como operar um computador Recursos adicionais: Trabalhando com a Tabela de Atributos - https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/attribute_table.html?highlight=layer%20attributes Expressões QGIS - https://docs.qgis.org/3.16/en/docs/ pyqgis_developer_cookbook/expression.html Vamos começar com um exemplo: Em alguns casos, por exemplo, para fins de planejamento de infraestrutura, você pode querer saber a área dos polígonos em uma camada. Se você tiver só um polígono, isso não será um problema. Mas e se você tiver muitos polígonos/áreas na camada? Calcular cada área uma a uma seria quase impossível. A camada de vetor das Unidades Feterativas do Brasil tem muitos polígonos, o que significa que seria um bom conjunto de dados para este tutorial. Vamos calcular a área de cada polígono de forma automatizada. No total, será calculada a área de 27 UFs. Muito do trabalho que você faz ao elaborar um mapa envolve trabalhar com atributos de camada. Se estiver desenhando a camada, configurando um pop-up, realizando análises ou visualizando, você precisa de algum nível de conhecimento dos campos da camada e dos valores que eles contêm. Se for sua própria camada, você conhecerá e entenderá seus atributos. Mas se não for, como você adquire esse conhecimento? Provavelmente, você inspeciona os nomes dos campos e examina os valores dos campos em busca de algumas pistas. E se você tiver sorte, você encontrará alguma documentação que descreve os atributos da camada. A tabela de atributos exibe informações sobre os recursos de uma camada selecionada. Cada linha da tabela representa uma feição (com ou sem geometria) e cada coluna contém uma informação específica sobre a feição. As feições da tabela podem ser pesquisadas, selecionadas, movidas ou mesmo editadas. Especificamente, existem duas novas propriedades de campo que descrevem os valores contidos em um campo: Descrição do campo - algumas palavras, uma frase ou um parágrafo de texto que descreve os valores no campo. Tipo de valor do campo - uma palavra-chave que categoriza o tipo de valores contidos no campo. A palavra-chave ajuda as pessoas a entender como usar os valores e permite que o QGIS e outros aplicativos façam sugestões mais inteligentes para trabalhar com eles, por exemplo, os tipos de valores no campo podem ser inteiros, strings, booleanos (verdadeiro ou falso), duplos ou ponto flutuante. Aqui está um exemplo. Suponha que você tenha uma camada de parcela de terreno com estes campos: ID do lote - Número Inteiro Proprietário - String (Texto) Endereço da rua - String (Texto) Descrição da propriedade - String (Texto) Edifícios - Número Inteiro Área do terreno - Número Duplo (ou decimal) Valor avaliado - Número Duplo (ou decimal) Data de avaliação - Data Se você fosse descrever esses valores de campo, poderia escrever algo assim: ID do lote - o identificador exclusivo do lote Proprietário - o nome do proprietário do imóvel Endereço - a localização do lote Descrição do imóvel - a descrição legal da propriedade Edifícios - o número de edifícios no lote Área do terreno - o tamanho da parcela em acres valor da avaliação - o valor da parcela e edifícios em dólares avaliação data - a data da última avaliação Ao observar descrições, algumas palavras se destacam, como: identificador, nome, localização, descrição, número de, tamanho, valor e data. Estas são as palavras-chave que descrevem quais são os valores do campo. As palavras-chave do tipo de valor do campo são construídas a partir desses tipos de palavras. Eles são: Nome ou Título Descrição Tipo ou Categoria Contagem ou Quantidade Porcentagem ou Proporção Medição Identificador Único Ordenado ou Classificado Binário Local ou Nome do Local Coordenada Data e Hora No exemplo de camada de pacote acima, o campo ID da parcela é um campo inteiro. Se o tipo de valor do campo indica que os valores do campo representam um identificador único em vez de uma contagem, o QGIS não sugere o desenho deste atributo de campo usando cores graduadas ou símbolos. Além disso, outros conceitos como a funcionalidade de calculadora de campo na tabela de atributos permitem realizar cálculos com base em valores de atributos existentes ou funções definidas, por exemplo, calcular comprimento, área ou densidade populacional. Observe que os cálculos possíveis são determinados pelos atributos ou compõem seus dados. Por exemplo, só é possível calcular a densidade populacional se houver um campo com contagens de população. Usando o gerador de expressão e a calculadora de campo, você poderia então construir uma expressão ou fórmula para calcular a densidade populacional. Nesse caso, a fórmula seria; população total como um número de pessoas dividida pela área de terra coberta por essa população. Você notará que é importante saber o que cada um dos campos na tabela de atributos da camada representa. Isso significa que você precisa conhecer e compreender seus dados completamente. Isso torna mais fácil aplicar funções e expressões e, portanto, gerar análises, visualizaçõe e produtos de mapa significativos. 8.1 Editando atributos da camada 8.1.1 Tutorial/Exercício A tabela de atributos exibe informações sobre os recursos de uma camada selecionada. Cada linha da tabela representa uma feição (com ou sem geometria) e cada coluna contém uma informação específica sobre a feição. As feições da tabela podem ser pesquisadas, selecionadas, movidas ou mesmo editadas. Carregue a camada vetorial de UFs PHL (encontrada em module6.gpkg) no QGIS. Você pode descobrir quantas feições estão no recurso atual clicando com o botão direito do mouse na camada no painel Camadas &gt; Mostrar contagem de feições. Como você pode ver abaixo, a camada vetorial tem muitas feições. No total, são 27 feições correspondentes a 27 UFs. Vários polígonos Figura 6.1: Vários polígonos O próximo passo é explorar a interface da tabela de atributos. Abra a tabela de atributos clicando com o botão direito do mouse na camada no painel Layers &gt; Abrir tabela de atributos. Você também pode clicar no botão Abrir Tabela de Atributos na Barra de Ferramentas de Atributos. Esta é a aparência da tabela de atributos. A barra de ferramentas tem vários botões; passe o mouse sobre cada botão para ver sua funcionalidade. Abrir tabela de atributos Figura 6.2: Abrir tabela de atributos Se você não quiser que a tabela de atributos seja uma janela flutuante, mas sim encaixá-la na interface QGIS, você pode clicar no botão Tabela de atributos ancorada . Quando ancoradas, as tabelas de atributos aparecerão como abas em vez de janelas individuais. Tabela de atributos ancorada Figura 6.3: Tabela de atributos ancorada Para cálculos de área, o Sistema de Referência de Coordenadas deve ser projetado. Isso permite calcular as distâncias corretamente. Lembre-se, nosso interesse é calcular automaticamente a área para cada uma das 27 UFs. Verifique o Sistema de Referência de Coordenadas da camada vetorial. Se for um sistema de referência de coordenadas geográficas, então reprojete a camada para um sistema de coordenadas projetadas. Verifique as diferentes projeções no site EPSG. No Brasil, usaremos SIRGAS 2000 / Brazil Mercator, EPSG: 5641. Dos módulos anteriores, onde as projeções de mapas são amplamente discutidas, você já deve saber que as projeções de mapas são aplicadas em relação a um local específico na Terra. Verifique as configurações do projeto; Acesse: Projeto &gt; Propriedades Propriedades &gt; Geral. Planimetric Figura 6.4: Configurações gerais Em seguida, clique no botão Abrir calculadora de campo no botão da barra de ferramentas. A caixa de diálogo da calculadora de campo será aberta; preencha o nome do campo de saída, neste caso será ‘area_km2’. Escolha o número decimal (real) no tipo de campo de saída. Altere a precisão para 2 casas decimais. Para calcular a área, use a seguinte expressão: $area/1000000 Você pode encontrar esta expressão em Geometria. Clique em OK e irá calcular automaticamente a área de cada polígono. Observe que o cálculo da área depende do sistema de referência de coordenadas usado, portanto, você pode ter resultados diferentes dependendo do CRS usado. Você também pode pesquisar e encontrar informações sobre expressões no lado direito da Calculadora de campo ou Construtor de expressões. Diálogo da calculadora de campo Figura 6.5: Diálogo da calculadora de campo Abra a tabela de atributos para ver o resultado. Você acabou de editar o conteúdo da tabela de atributos, de forma automatizada, ao invés de digitar os valores em cada célula manualmente, um por um. Nova tabela de atributos com novos campos e atributos Figura 6.6: Nova tabela de atributos com novos campos e atributos 8.1.2 Quiz Verdadeiro ou Falso? Uma tabela de atributos é um banco de dados ou arquivo tabular contendo informações sobre um conjunto de características geográficas. -Verdadeiro As características geográficas são geralmente organizadas de forma que cada linha represente uma característica e cada coluna represente um atributo de característica. -Verdadeiro É necessário reprojetar camadas antes da área cálculos quando a camada tem um sistema de referência de coordenadas geográficas. -Verdadeiro 8.2 Entender e trabalhar com dados de atributos, consultas e análises 8.2.1 Tutorial/Exercício Neste ponto, você pode notar que a tabela de atributos armazena dados espaciais e não espaciais. Neste tutorial, você descobrirá maneiras de trabalhar com dados da tabela de atributos. Por exemplo, usando expressões, você poderá selecionar Clínicas em no Rio de Janeiro com atendimento de emergência, usando os dados da tabela de atributos. Adicione os seguintes conjuntos de dados à tela do mapa QGIS: Camada de limite administrativo do Rio de Janeiro rj_capital (dentro de module6.gpkg) Clínicas do Rio de Janeiro rj_clinics (dentro de module6.gpkg) RJ High Resolution Settlement Layer Adicionar camadas diferentes Figura 6.7: Adicionar camadas diferentes O a seleção será aplicada à camada Clínicas, portanto, abra a tabela de atributos da camada Clínica. Clique no botão selecionar recursos usando a expressão e digite a seguinte expressão no construtor de expressão; &quot;amenity&quot; = &#39;clinic&#39; AND &quot;emergency&quot; = &#39;yes&#39; Você notará que a expressão tem uma série de predicados como o sinal de comparação (=), o predicado lógico (AND) e uma string que é colocada entre aspas simples (’’). Existem também dois nomes de atributos (amenity, emergency) e seus valores (clinic, yes). select Figura 6.8: Selecione pelo diálogo Construtor de Expressão 11 clínicas são selecionadas. Você pode ver a seleção destacada em amarelo. As clínicas selecionadas também são destacada na tabela de atributos. Agora sabemos que há 11 clínicas com serviço de emergência no Rio de Janeiro (no dados do OpenStreetMap, pelo menos). alt_text Figura 6.9: Clínica/recurso selecionado está destacado (amarelo) alt_text Figura 6.10: Clínica/o recurso está destacado (azul) Também é possível fazer seleções clicando em uma feição na tela do mapa. O desenvolvimento de uma expressão funcional começa com a compreensão de seus dados; por exemplo, os atributos e os valores que eles possuem. Em seguida, precisamos fazer as perguntas certas e, finalmente, desenvolver a expressão correta, levando em consideração todas as regras matemáticas que tornam uma expressão livre de erros. 8.2.2 Quiz Verdadeiro ou Falo? Esses operadores são fornecidos pelo construtor de expressões. {+, -, *} -Verdadeiro As aspas simples devem incluir uma string.-Verdadeiro A tabela de atributos armazena apenas dados não espaciais.-Falso 8.3 Expressões de QGIS avançadas A caixa de diálogo Construtor de expressões oferece acesso à: Aba Expressão (https: //docs.qgis .org/2.18/en/docs/user_manual/working_with_vector/expression.html # functions-list ) que, graças a uma lista de funções predefinidas, ajuda a escrever e verificar a expressão a usar; Aba Editor de funções (https://docs.qgis.org/2.18/en/docs/user_manual/working_with_vector/expression.html#function-editor) que ajuda a estender a lista de funções criando funções personalizadas. 8.3.1 Tutorial/Exercício Existem muitos casos de uso para expressões, e aqui apresentaremos alguns exemplos. Observe como as expressões são desenvolvidas e quais operadores ou predicados são usados. Também é importante o fato de que todas essas expressões são desenvolvidas com base no conteúdo do conjunto de dados. Você pode adaptar isso ao conjunto de dados de sua escolha. Na Calculadora de campo, calcule um campo “pop_density” usando os campos “total_pop” e “area_km2” existentes: &quot;total_pop&quot; / &quot;area_km2&quot; Atualize o campo “density_level” com categorias de acordo com os valores “pop_density”: CASE WHEN &quot;pop_density&quot; &lt; 50 THEN &#39;Low population density&#39; WHEN &quot;pop_density&quot; &gt;= 50 AND &quot;pop_density&quot; &lt; 150 THEN &#39;Medium population density&#39; WHEN &quot;pop_density&quot; &gt; 150 THEN &#39;High population density&#39; END Aplique um estilo categorizado a todos as feições de acordo com se o preço médio de sua casa é menor ou superior a 10.000 pesos por metro quadrado: &quot;price_m2&quot; &gt; 10000 Usando a ferramenta “Selecionar por expressão …”, Selecione todas as características que representam áreas de “alta densidade populacional” e cujo preço médio da casa seja superior a 10.000 pesos por metro quadrado: &quot;density level&quot; = &#39;High population density&#39; and &quot;price_m2&quot; &gt; 10000 Da mesma forma, a expressão anterior também pode ser usada para definir quais características devem ser rotuladas ou mostradas no mapa. 8.3.2 Quiz Tanto a calculadora de campo quanto o diálogo Selecionar por expressão podem ser usados para desenvolver expressões - Verdadeiro As expressões podem ser usadas para atualizar um novo campo - Verdadeiro As expressões podem ser usadas para aplicar um estilo - Verdadeiro "],["criando-e-editando-camadas.html", "Capitulo 9 Criando e editando camadas 9.1 Criando uma nova camada GeoPackage ou Shapefile 9.2 Digitalizando uma camada existente 9.3 Georreferenciando um mapa topográfico", " Capitulo 9 Criando e editando camadas Autor: Ketty Este módulo foi desenvolvido para te ensinar como usar as ferramentas QGIS para criar uma nova camada GIS. Nele, você aprenderá conceitos como digitalização e georreferenciamento. Pré-requisitos: Um bom conhecimento de todos os módulos anteriores Conhecimento básico de operação de um computador Recursos adicionais: Criação de camadas - https://docs.qgis.org/3.16/en/docs/user_manual/managing_data_source/create_layers.html Digitalização de áreas florestais - https://docs.qgis.org/3.16/en/docs/training_manual/forestry/stands_digitazing.html?highlight=digitizing Leitura adicional - Georreferenciando um mapa Vamos começar com um exemplo: Vamos imaginar que seu departamento esteja planejando construir novos hospitais para a cidade. Eles podem querer realizar uma pré-avaliação ambiental para o projeto de infraestrutura que foi planejado. A avaliação pode envolver a realização de pesquisas sobre quais dados estão disponíveis. Como você pode imaginar, há uma grande quantidade de dados geográficos disponíveis em formatos que não podem ser integrados imediatamente com outros dados GIS. Alguns desses dados podem estar na forma de mapas antigos, imagens de satélite de alta resolução ou imagens de sensoriamento remoto que costumam ser usadas para fazer mapas digitais como o Google Maps ou OpenStreetMap. É aqui que entra a criação e edição de camadas. Uma maneira pela qual novos dados podem ser criados em um GIS é por meio da digitalização. Outros métodos incluem georreferenciamento, escaneamento e vetorização, recorte, seleção e salvamento. É importante lembrar que os dados criados dependem dos daos originais serem únicos. Por exemplo, a imagem abaixo mostra que cada produto de imagem produzirá um conjunto de dados únicos. Imagens de sensoriamento remoto de diferentes linhas costeiras Figura 7.1: Imagens de sensoriamento remoto de diferentes áreas costeiras. A. Dados interferométricos do radar de abertura sintética (IFSAR) (usando microondas para coletar dados para a criação de imagens representativas), B. dados topográficos e batimétricos LIDAR (dados de altura e elevação representados por cores), C. imagens hiperespectrais (adicionando cor à energia invisível) , e D. fotografia digital (cores visíveis do olho humano representadas como elas próprias) Digitalizar em SIG é o processo de “traçar”, de forma geograficamente correta, informações de mídias/mapas. O processo de georreferenciamento conta com a coordenação de pontos na imagem digitalizada (dados a serem georreferenciados) com pontos em dados geograficamente referenciados (dados para os quais a imagem será georreferenciada). Ao “vincular” pontos na imagem com essas mesmas localizações nos dados geograficamente referenciados, você criará uma transformação que converte a localização de toda a imagem na localização geográfica correta. Aqui, os edifícios foram digitalizados (rastreados) sobre uma foto aérea Figura 7.2: Aqui, os edifícios foram digitalizado (traçados) em cima de uma foto aérea Georreferenciamento, por outro lado, é o processo de obtenção de uma imagem digital, que pode ser por exemplo um mapa geológico digitalizado ou uma imagem de um mapa topográfico, e de adicionar informações geográficas à imagem para que o GIS ou software de mapeamento possam ‘posicionar’ a imagem em seu local correto no mundo real. O QGIS permite que você crie novas camadas em diferentes formatos. Ele fornece ferramentas para criar GeoPackage, Shapefile, SpatiaLite, formato GPX e camadas Temporary Scratch (também conhecidas como camadas de memória). A edição permite adicionar, excluir e modificar recursos em conjuntos de dados vetoriais. A primeira etapa é colocar o conjunto de dados no modo de edição. Selecione a camada no painel Camadas e clique em Camada | Alternar edição. Como alternativa, você pode clicar com o botão direito do mouse em uma camada no painel Camadas e escolher Alternar Edição no menu de contexto. Várias camadas podem ser editadas ao mesmo tempo. A camada que está sendo editada atualmente é aquela selecionada no painel Camadas. Uma vez no modo de edição, a barra de ferramentas de digitalização pode ser usada para adicionar, excluir e modificar recursos. Digitalizar, como você deve ter adivinhado, é a arte (ou ciência) de criar dados vetoriais digitais a partir de outra fonte, como uma imagem raster. Para começar a digitalização, devemos primeiro entrar no modo de edição. O software GIS geralmente requer um modo separado para edição, para evitar que os usuários editem ou apaguem acidentalmente dados importantes. O modo de edição é ativado ou desativado individualmente para cada camada. 9.1 Criando uma nova camada GeoPackage ou Shapefile 9.1.1 Criando uma nova camada GeoPackage Para criar uma nova camada GeoPackage, pressione o botão Nova Camada GeoPackage no menu Camada Criar Nova Camada ou na barra de ferramentas do Datasource Manager. A caixa de diálogo Nova Camada GeoPackage será exibida conforme mostrado na Figura 7.3. Diálogo de nova camada GeoPackage Figura 7.3: Diálogo de nova camada GeoPackage O primeiro passo é indicar a localização do arquivo de banco de dados. Isso pode ser feito pressionando o botão à direita do campo Banco de dados e selecionando um arquivo GeoPackage existente ou criando um novo. O QGIS adicionará automaticamente a extensão correta ao nome que você fornecer. Digite um nome para a nova camada (“Nome da tabela”) Defina o tipo de geometria. Se não for uma camada sem geometria, você pode especificar se deve incluir dimensão Z e/ou incluir valores M. Especifique o sistema de referência de coordenadas usando o botão Para adicionar campos à camada que você está criando: Insira o Nome do campo Selecione o Tipo de dados . Os tipos suportados são dados de texto, número inteiro (inteiro e inteiro 64), número decimal, data e data e hora, binário (BLOB) e booleano. Dependendo do formato de dados selecionado, insira o Comprimento máximo dos valores. Clique no botão Adicionar à lista de campos Reproduza as etapas acima para cada campo que você precisar adicionar Quando estiver satisfeito com os atributos, clique em OK. O QGIS adicionará a nova camada à legenda, e você poderá começar a editá-la. 9.1.2 Criando um novo Shapefile Para criar uma nova camada de formato ESRI Shapefile, pressione Novo botão Shapefile Layer… no menu Camada &gt; Criar Nova Camada &gt; ou na barra de ferramentas Data Source Manager. A caixa de diálogo Nova Camada Shapefile será exibida conforme mostrado na Figura 7.4. Diálogo da nova camada do shapefile Figura 7.4: Diálogo da nova camada do shapefile Forneça um caminho e nome de arquivo usando o botão … próximo ao campo Nome do arquivo. O QGIS adicionará automaticamente a extensão correta ao nome que você fornecer. Em seguida, indique a codificação do arquivo dos dados Escolha o tipo de geometria da camada: Sem geometria (resultando em um arquivo de formato .DBF), ponto, multiponto, linha ou polígono Especifique se a geometria deve ter dimensões adicionais: Nenhum, Z (valores + M) ou valores M Especifique o sistema de referência de coordenadas usando o botão ; você pode selecionar o WGS 84 universal que é adequado para projetos de mapeamento web em todo o mundo Para adicionar campos à camada que você está criando: Insira o Nome do campo Selecione o Tipo de dados. Somente número decimal, número inteiro, dados de texto e data são suportados. Dependendo do formato de dados selecionado, insira o Comprimento e a Precisão. Clique no botão Adicionar campos à lista Reproduza as etapas acima para cada campo que você precisar adicionar Quando estiver satisfeito com os atributos, clique em OK. O QGIS adicionará a nova camada à legenda e você poderá editá-la conforme descrito a seguir, ‘Digitalizando uma camada existente’. 9.2 Digitalizando uma camada existente 9.2.1 Tutorial/Exercício Este tutorial mostrará como criar um novo arquivo usando dados auxiliares, como imagens de satélite fornecidas pelo Google. É importante saber qual tipo de feições (geometrias) você gostaria de criar de antemão; por exemplo, seriam pontos, linhas ou polígonos? Quando criamos a camada, devemos definir que tipo de dados ela conterá. O objetivo deste tutorial é criar um tipo de dado que possa ser facilmente manipulado, analisado e armazenado em um sistema GIS, daí a necessidade de criar arquivos vetoriais. Criaremos recursos de polígono como exemplo. Antes de adicionar novos dados vetoriais, você precisa de um conjunto de dados vetoriais (uma camada) para adicioná-los. Em nosso caso, começaremos criando uma nova camada de dados e, em seguida, adicionaremos recursos a ela. Primeiro, devemos definir nosso conjunto de dados. Crie um novo projeto no QGIS clicando no ícone Novo Projeto . Vá para Camada &gt; Criar camada &gt; Nova camada GeoPackage. Crie uma camada como a da imagem a seguir: Nova caixa de diálogo GeoPackage Figura 7.5: Nova caixa de diálogo GeoPackage Neste ponto, devemos decidir que tipo de conjunto de dados queremos criar. Lembre-se de que uma camada de dados pode conter apenas feições de pontos, apenas linhas ou apenas polígonos - nunca mais de um tipo na mesma camada. Quando criamos a camada, devemos definir que tipo de dados ela conterá. Como os polígonos são compostos de pontos e linhas, vamos criar polígonos. Depois de dominar isso, criar um ponto ou uma camada de linha deve ser fácil! Dentro do diálogo, especifique um nome de arquivo para o novo arquivo, codificação de arquivo, tipo de geometria, o CRS e adicione dados específicos para o Novo Campo. Adicione outros nomes de campo. Isso requer um modelo de dados predefinido que capture adequadamente todas as informações sobre o referido recurso. A segunda etapa é adicionar a camada de satélite ESRI World Imagery à tela do mapa QGIS. Adicionamos isso em um módulo anterior e deve estar disponível para uso no Painel do navegador em XYZ Tiles. ESRI World Imagery encontrado no painel do navegador ESRI World Imagery carregado no QGIS Figura 7.6.1: Tela QGIS após adicionar a camada ESRI World Imagery Amplie a imagem até que você possa ver características como telhados, estradas, árvores, etc. Os telhados podem atuar como um proxy 2D para edifícios, portanto vamos digitalizar a camada de construção recém-criada. Camada ESRI World Imagery ampliada Figura 7.6.2: Camada ESRI World Imagery ampliada Vamos entrar no modo de edição para a camada edificios Selecione edificios no painel Layers Clique no botão Alternar Edição . Se você não conseguir encontrar este botão, certifique-se de que a barra de ferramentas Digitalização está habilitada. Deve haver uma marca de seleção ao lado da entrada do menu Ver &gt; Barras de ferramentas &gt; Digitalização Assim que estiver no modo de edição, as ferramentas de digitalização ficarão ativas Ferramentas de digitalização Figura 7.7: Ferramentas de digitalização Da esquerda para a direita na imagem acima, são elas: Alternar Edição: ativa/desativa o modo de edição. Salvar edições de camada: salva as alterações feitas na camada. Adicionar recurso: comece a digitalizar um novo recurso. Mover recurso(s): mover um recurso inteiro. Ferramenta Nó: mova apenas uma parte de um recurso. Excluir Selecionado: exclui o recurso selecionado (ativo apenas se um recurso for selecionado). Cortar recursos: corta o recurso selecionado (ativo apenas se um recurso for selecionado). Copiar recursos: copia o recurso selecionado (ativo apenas se um recurso for selecionado). Colar recursos: cole um recurso recortado ou copiado de volta no mapa (ativo apenas se um recurso foi recortado ou copiado). Queremos adicionar um novo recurso. Clique no botão Adicionar feição para iniciar a digitalização. Vamos digitalizar os edifícios Comece clicando em um ponto em algum lugar ao longo da borda do edifício Coloque mais pontos clicando mais ao longo da borda, até que a forma que você está desenhando cubra completamente o campo. Isso é muito semelhante a desenhar um polígono. O vértice inicial e o vértice final devem se tocar, caso contrário, permanece uma linha. Para colocar o último ponto, clique com o botão direito onde você deseja que ele esteja. Isso finalizará o recurso e abrirá a caixa de diálogo Atributos. Preencha os valores conforme mostrado aqui Digitalizando novo recurso Figura 7.8.1: Digitalizando novo recurso Preencha os valores de atributo Figura 7.8.2: Adicionando os atributos Clique em OK. Você criou um novo recurso! Novo recurso criado Figura 7.8.3: Novo recurso criado Se você cometer um erro ao digitalizar um recurso, poderá editá-lo posteriormente. Basta terminar de digitalizar o recurso e seguir estas etapas: Selecione o recurso com a ferramenta Select Feature caixa para selecionar feições Em seguida, use uma dessas ferramentas para editar o recurso Mover ferramentas de recurso(s) Move todo o(s) recurso(s) Ferramentas de nó Move apenas um ponto onde você pode ter clicado incorretamente Excluir selecionado Elimina totalmente o recurso para que você possa tentar novamente Vá para Editar &gt; Desfazer ou pressione Ctrl + Z no teclado Desfazer erros Agora tente sozinho, digitalize todos os edifícios na imagem. 9.3 Georreferenciando um mapa topográfico 9.3.1 Tutorial/Exercício Para georreferenciar o mapa; Abra a ferramenta Georeferenciador, Raster Georeferenciador Clique no botão Adicionar raster para adicionar o arquivo de imagem do mapa, Mapa Topográfico de Pampanga, como imagem a georreferenciar. O mapa topográfico será adicionado à tela do georreferenciador. Agora você pode ampliar para ler os detalhes do mapa. Uma maneira de fazer isso é lendo os metadados e as informações de legenda na parte inferior e, em seguida, relacionando-os com os recursos no mapa. Mapa na tela do Georeferenciador Figura 7.9: Mapa na tela do Georreferenciador Em seguida, você deve definir as configurações de transformação para georreferenciar o mapa: Abra Configurações Configurações de transformação ou clique em Transformação Botão de configurações. Clique no ícone próximo à caixa Raster de saída, vá para a pasta e crie a pasta ‘dados pampanga’ e nomeie o arquivo como pampanga_georef.tif. Defina o resto dos parâmetros conforme mostrado abaixo Parâmetros de transformação Figura 7.10: Parâmetros de transformação Ao selecionar os parâmetros de transformação, os itens a serem considerados são: * a complexidade do mapa e distorção (mapas de formato regular normalmente só precisam usar parâmetros de transformação simples) * o número de GCPs que você pode obter no mapa - quanto mais complexo o tipo de transformação, mais GCPs são necessários para obter bons resultados. * a distribuição de GCPs no mapa - uma distribuição pobre de GCP resulta em mais distorção, especialmente em equações de transformação de ordem superior. * mais (ou mais complexo) nem sempre é melhor. Ordem de Transformação | GCPs mínimos exigidos | |: ———————–: |: ———————: | | 1 | 3 | | 2 | 6 | | 3 | 10 | | 4 | 15 | | 5 | 21 | | 6 | 28 | | 7 | 36 | Por segurança, tenha sempre pelo menos um a mais do que o mínimo para adicionar redundância. Clique em OK. O mapa contém várias retículas marcando as coordenadas no mapa, usaremos esses para georreferenciar esta imagem. Você pode usar as ferramentas de zoom e panorâmica como costuma fazer no QGIS para inspecionar a imagem na janela do Georreferenciador. Aproxime o zoom no canto inferior esquerdo do mapa e observe que há um par de coordenadas, X e Y, que como mencionado antes estão no CRS EPSG:4225, conforme a legenda do mapa topográfico. Clique no botão Adicionar ponto e clique na interseção do canto inferior esquerdo do mapa. Na caixa de diálogo Insira as coordenadas do mapa, escreva as coordenadas que aparecem no mapa (Y: -20 30 00.00 e X: -42 00 00.00). Selecionar GCP Figura 7.11.1: Insira as coordenadas do mapa Insira as coordenadas do mapa Figura 7.11.2 : Insira as coordenadas do mapa Clique em OK. A primeira coordenada para o georreferenciamento está pronta. Abaixo está uma captura de tela do que esperar neste ponto Primeira coordenada para o georreferenciamento Figura 7.12: Primeira coordenada para o georreferenciamento Digitalize pelo menos mais três pontos de controle de solo (GCPs) da mesma maneira que você fez o primeiro. Dica: Certifique-se de que os pontos estejam distribuídos de forma justa pela imagem, por exemplo, nos quatro cantos da imagem ou em distâncias iguais entre si. Isso afeta o desempenho do algoritmo de transformação. Com três pontos de controle de solo já digitalizados, você poderá ver o erro de georreferenciamento como uma linha vermelha saindo dos pontos. O erro em pixels pode ser visto também na tabela GCP nas colunas dX [pixels] e dY [pixels]. Os residuais não devem ser maiores do que um limite que você definiu. Se forem, você deve revisar os pontos digitalizados e as coordenadas inseridas para descobrir qual é o problema. Você pode usar a imagem acima como um guia. Adicione mais pontos de controle até ficar satisfeito com os resultados esperados. Você pode salvar o arquivo de GCPs Arquivo Salvar pontos de GCP como…. Finalmente, georreferencie seu mapa com Arquivo Iniciar georreferenciamento ou o botão Iniciar Georreferenciamento . GCPs adicionados Figura 7.13: GCPs adicionados Mapa georreferenciado carregado no QGIS Figura 7.14: Mapa carregado no QGIS e georreferenciado Nota: Para verificar se seus dados estão georreferenciados corretamente, você pode abrir o mapa topográfico. Seu mapa e esta imagem devem corresponder muito precisamente. Defina a transparência do mapa para 75% e compare-a com a imagem aérea. 9.3.2 Quiz O que é digitalização em GIS? o processo de conversão de dados geográficos de uma imagem digitalizada ou imagem digital em dados vetoriais traçando as suas características descreve a conversão pura de analógico para digital de dados e documentos existentes processo pelo qual as coordenadas de um mapa, imagem ou outras fontes de dados são convertidas em um formato digital em um GIS refere-se à criação de uma representação digital de objetos físicos ou atributos Qual dos seguintes conjuntos de dados auxiliares suportará a digitalização? Pontos de dados GPS Mapas topográficos Imagem de satélite Gráficos e tabelas Quais fatores podem afetar a precisão dos dados durante a digitalização? Resolução dos dados (espacial, temporal, radiométrico) Iluminação Localização do recurso Tipo de recurso O que pode ser feito para melhorar a precisão? obter fontes de dados precisas definir metas de qualidade de dados revise os dados e reedite ou reverta as edições Por que um modelo de dados é importante ao criar novos dados? permite capturar informações abrangentes sobre o recurso automatiza o processo captura erros de digitalização "],["processamento-e-análise-vetorial.html", "Capitulo 10 Processamento e análise vetorial 10.1 O modelo de dados vetoriais 10.2 Metadados 10.3 Lógica do processamento vetorial 10.4 Entendendo seus dados 10.5 Introdução ao processamento vetorial 10.6 Geoestatística e interpolação", " Capitulo 10 Processamento e análise vetorial Autores: Codrina Ilie Este módulo é focado em um tipo específico de modelo de dados geográficos: os geodados vetoriais. Ao final deste módulo, os alunos terão a compreensão básica dos seguintes conceitos: modelo de dados vetoriais metadados processamento vetorial análise de dados espaciais geoestatística topologia geoprocessamento E adquirirão as seguintes habilidades: Verificando a qualidade do conjunto de dados vetoriais geométricos usando algoritmos para checar a topologia de dados vetoriais e executar correções automáticas básicas; Trabalhando com algoritmos para identificar erros na tabela de atributos; Processando dados vetoriais - executando algoritmos de geoprocessamento simples para atender a perguntas em potencial, como por exemplo: quantos prédios públicos existem em uma região administrativa? Processamento de dados vetoriais - usando algoritmos de geoestatística para preencher os dados faltantes. Ferramentas e recursos necessários: Este módulo foi preparado usando QGIS versão 3.16.1 - Hannover Os conjuntos de dados usados ​​para todos os exercícios detalhados em este módulo são apresentados na tabela abaixo: O sistema de referência de coordenadas utilizado é o SIRGAS 2000/UTM zona 24S, EPSG 31984. Por se tratar de um sistema de coordenadas projetado, ele permite cálculos geométricos. Pré-requisitos: Conhecimento básico de como operar um computador Uma compreensão robusta dos módulos 0, 1 e 2 e 6 deste currículo. O Módulo 0 apresenta a noção de modelo de dados vetoriais que está no cerne desta seção atual. A compreensão prévia dos módulos 1, 2 e 6 permite que você se concentre estritamente nas novas noções e funcionalidades do QGIS introduzidas nesta nova seção, sem ter que se perguntar como você poderia carregar uma nova camada em seu projeto, ou como trabalhar com a tabela de atributos do seu conjunto de dados. Como parte deste módulo, você aprenderá como trabalhar de forma eficiente com conjuntos de dados geográficos vetoriais para que possa extrair novas informações. Isso inclui uma compreensão mais aprofundada do que são dados vetoriais, quais padrões de qualidade eles devem cumprir para que sejam realmente úteis, quais são as operações mais comuns feitas em dados vetoriais (geoprocessamento, geoestatística). Recursos adicionais: https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/functions_list.html http://www.geo.hunter.cuny.edu/~jochen/gtech361/lectures/lecture12/concepts/01%20What%20is%20geoprocessing.htm Enciclopédia de GIS, Edição 2017, Editores: Shashi Shekhar, Hui Xiong, Xun Zhou Metadata And Catalog Services, autora Mariana Belgiu, UNIGIS Salzburg; Noções básicas de metadados elaborado pelo Comitê Federal de Dados Geográficos; Vamos começar com um exemplo: Você acaba de pousar na cidade do Rio de Janeiro e precisa ir do aeroporto ao hotel. Você não tem conhecimento de onde está situado o aeroporto em relação à cidade, nem onde fica o hotel, então a primeira coisa que você faz é abrir um mapa para ajudá-lo a navegar por esta cidade nova e animada! Você pega o telefone, abre um aplicativo de mapa e seleciona o ponto de partida - o aeroporto - e o ponto de chegada - seu hotel - e, em seguida, pede a rota, a pé, de carro ou transporte público. Em questão de segundos, o aplicativo de roteamento oferece a melhor solução para você ir do ponto A ao ponto B e o destaca ao traçar uma linha distinta seguindo ruas e becos, conforme visível na figura 8.1. Indo do ponto A ao B usando o Openstreetmap Figura 8.1 - Indo do ponto A ao B usando o Openstreetmap Este é um exemplo clássico de uso de dados vetoriais e ele pode ser dividido em vários conceitos que definiremos a seguir. Os dados usados ​​são espaciais - eles têm uma localização muito bem definida na Terra, e seus atributos também são bem identificados. Assim, um ponto com longitude e latitude e o nome do atributo = Aeroporto Internacional de Recife - representa o ponto de partida A e um ponto com outro par de longitude e latitude e o nome do atributo = Hotel representa o ponto final B. As ruas são representadas por linhas compostas por segmentos e vértices (representados por pequenos círculos azuis na figura 8.2), com atributos como nome, direção, limitação de velocidade etc. Linhas de vetor representando ruas e a tabela de atributos associada Figura 8.2 - Linhas de vetor representando ruas e a tabela de atributos associada As ruas representam um modelo de rede que é basicamente uma coleção de pontos e linhas topologicamente interconectados. Os resultados do algoritmo que calcula a rota do ponto A ao ponto B - no nosso caso do aeroporto ao hotel - são altamente dependentes da qualidade dos vetores, tanto na geometria - as regras de topologia devem ser respeitadas - como nos atributos - se uma estrada é de mão única isso deve ser indicado para que a rota não te leve para o lado errado. 10.1 O modelo de dados vetoriais Conforme apresentado no módulo 0, existem 2 modelos de dados usados ​​em um sistema de informação geográfica - SIG: raster e vetor. Os dados geoespaciais sempre incluem um componente espacial indicando a localização ou a distribuição espacial do fenômeno em questão e um componente de atributo que descreve suas propriedades. A escolha entre usar o modelo de dados raster ou vetorial para uma situação particular depende da fonte dos dados, bem como de seu uso pretendido. O modelo de dados vetoriais é usado para representar áreas, linhas e pontos (Figura 8.1). dados vetoriais com tabela de atributos Figura 8.1 - dados vetoriais com tabela de atributos 10.2 Metadados Metadados são mais simplesmente definidos como dados sobre dados. Um metadado caracteriza, em diferentes níveis de detalhamento, o conjunto de dados ao qual está associado, incluindo categorias como: quem é o provedor/proprietário do conjunto de dados; qual é a licença de uso; em que idioma estão os atributos; qual era o sistema de coordenadas usado; que área geográfica descreve e qual é o ano de referência; palavras-chave; quais são as limitações conhecidas; nível de precisão; qual era o escopo original do conjunto de dados e muito mais. Os metadados são primordiais porque uma compreensão clara dos dados a serem usados ​​em uma análise específica pode fazer toda a diferença entre uma decisão correta ou tendenciosa. Se for necessário identificar onde colocar um novo hospital temporário, mas os dados da estrada forem antigos e não refletirem mais a realidade no local, qualquer decisão baseada neles será imprecisa. Devido à importância dos metadados, suas categorias (suas definições, nome, que tipo de informação eles podem armazenar etc.) seguem estruturas bem definidas e padronizadas. Esses arquivos de metadados bem estruturados podem então ser integrados em catálogos dedicados, permitindo que um usuário pesquise e encontre dados geográficos apenas consultando as características de seu interesse, sem precisar baixar e analisar os dados por conta própria. Existem inúmeros catálogos de metadados que, quando padronizados, podem ser acessados ​​por meio de diferentes funcionalidades de um software GIS. Um exemplo disso será apresentado no Módulo 9, através de plugins do QGIS. É importante dizer que os metadados não são uma especificidade dos recursos geoespaciais, mas se aplicam a qualquer tipo de dado. 10.3 Lógica do processamento vetorial O poder do GIS reside em sua capacidade única de conectar propriedades geométricas que definem objetos e fenômenos reais em nosso mundo com seus atributos - sejam observados, medidos ou calculados - e permitindo por meio de software especializado realizar operações em seus geometrias, em seus atributos ou em ambos, a fim de derivar novas informações valiosas. Embora na maioria das vezes o GIS esteja intimamente associado a mapas que simplesmente exibem informações geográficas, suas funcionalidades vão muito além da criação de representações cartográficas, sejam elas dinâmicas ou estáticas. Análise de dados espaciais (sinônimos: análise espacial, análise geoespacial, análise geográfica, interação espacial) é um termo geral que se refere a qualquer técnica destinada a identificar padrões, detectar anomalias e testar teorias com base em dados espaciais. Uma análise é espacial se e somente se os resultados forem sensíveis à realocação dos objetos analisados ​​- ou simplificando, se a localização for importante. À medida que a tecnologia da informação evoluiu, cientistas começaram a aplicar várias técnicas de estatística, geometria, topologia e outras ciências à análise de dados geográficos, de modo a estudar padrões e fenômenos na superfície da Terra. Geoestatística é um ramo da estatística que se aplica a dados espaciais. Os métodos mais comumente empregados estão relacionados à interpolação, que é um processo matemático que permite estimar valores desconhecidos com base nos conhecidos. Topologia é um ramo da matemática que permite ao usuário GIS controlar as relações geométricas entre recursos e manter a integridade geométrica. A topologia é melhor entendida como um conjunto de regras que garantem a qualidade dos dados espaciais e que podem ser aplicados a uma camada vetorial ou mais. As regras são definidas de modo a respeitar as relações do mundo real que as camadas vetoriais representam. Por exemplo, não pode haver lacunas entre os polígonos que representam lotes em uma região. Ou, para uma camada vetorial que representa árvores, nenhum dos seus pontos pode estar contido em um polígono de uma camada vetorial que represente edifícios. Os softwares GIS oferecem funcionalidades que permitem ao usuário definir regras relevantes de topologia, bem como algoritmos para verificá-las e para limpar a camada vetorial onde são identificadas inconsistências. Geoprocessamento é um termo geral usado para definir qualquer operação ou processo aplicado a um conjunto de dados geográficos com o objetivo de derivar um novo conjunto de dados, gerando novos conhecimentos sobre os dados. As operações de geoprocessamento mais comuns são a sobreposição de feições geográficas, seleção e análise de recursos, processamento de topologia e conversão de dados. O geoprocessamento permite definir, gerenciar e analisar informações geográficas para apoiar a tomada de decisão. Elementos de uma operação de geoprocessamento Figura 8.4 - Elementos de uma operação de geoprocessamento 10.4 Entendendo seus dados Existem muitas operações de geoprocessamento que podem ser realizadas sobre dados vetoriais, as mais comuns sendo a sobreposição de feições geográficas, seleção e análise de recursos, processamento de topologia e conversão de dados. Nesta primeira fase, vamos nos familiarizar com alguns desses, entendendo como funcionam e quais os resultados que podemos esperar deles. 10.4.1 Etapa 1: Prepare seu ambiente de trabalho Abra o QGIS, configure o sistema de referência de coordenadas em que você trabalhará {localize}- EPSG 31984 - e adicione as seguintes camadas de dados: Polígonos - limites administrativos; edifícios; uso da terra; Linhas - estradas, rios; Pontos - locais religiosos, pontos de interesse (POI) Neste ponto, a janela do seu mapa QGIS deve ser semelhante à figura 8.5, mas provavelmente apresentando outras cores. Conjuntos de dados vetoriais carregados: pontos, linha e polígonos Figura 8.5 - Conjuntos de dados vetoriais carregados: pontos, linha e polígonos Verifique! Todas as camadas estão no mesmo sistema de coordenadas (EPSG 31984) olhando no canto direito inferior. Se for assim, você está olhando para 7 camadas de dados vetoriais sobrepostas. 10.4.2 Etapa 2: Entenda o que você está olhando Neste ponto, temos 7 camadas vetoriais carregadas em nosso projeto QGIS. As próximas etapas nos ajudarão a entender nossos dados. Verifique quantos recursos temos em uma camada - existem várias maneiras de fazer isso: Clique duas vezes na camada de interesse - Propriedades - Informações - Contagem de recursos Abra a tabela de atributos da camada de interesse e olhe na parte superior lado central Antes de executar qualquer estatística básica, vamos completar a tabela de atributos com alguns atributos geométricos (consulte o Módulo 6 para detalhes): Camada de estradas - calcule o comprimento de cada segmento de estrada e armazene-o na tabela de atributos: nome do campo de saída - comprimento round($length, 2) Camada de edifícios - calcule a área para cada edifício e armazena-a na tabela de atributos; nome do campo de saída - area round($area, 2) Agora os campos de atributo estão preenchidos. Se você não tiver certeza em qual unidade de medida o QGIS calculou o comprimento dos segmentos de estradas e áreas de edifícios, você pode verificar as informações do sistema de coordenadas que está usando. Clique no canto inferior direito da janela do mapa QGIS, em EPSG 31984 e uma janela como a da figura 8.6 aparecerá. Especificações do sistema de referência de coordenadas usado no projeto QGIS Figura 8.6 - Especificações do sistema de referência de coordenadas usado no projeto QGIS Descobrimos que a unidade de medida é o metro, portanto os comprimentos são medidos em metros e as áreas em metros quadrados. Execute estatísticas básicas nas camadas carregadas para obter uma melhor compreensão de seus dados (figura 8.7): Menu de vetores &gt; Análise &gt; Campo para estatística básica Janela da caixa de ferramentas de processamento &gt; pesquisa por &#39;stats&#39;` Estatísticas básicas para campos Figura 8.7 - Estatísticas básicas para campos As estatísticas retornadas dependem do tipo de campo que escolhemos e são geradas como um arquivo HTML. Vamos executá-lo em nossa camada de estradas e ver quais resultados obtemos. Complete a janela, como na figura 8.8. Preparando para executar estatísticas básicas para camada de estradas Figura 8.8 - Preparando para executar estatísticas básicas para camada de estradas O arquivo de saída é um html que pode ser aberto com qualquer navegador (Firefox, Chrome, Safari etc.) que deve ser semelhante a abaixo: Campo analisado: comprimento Contagem: 22401 Valores únicos: 15600 Valores NULL (perdidos): 0 Valor mínimo: 0.01 Valor máximo: 7927.8 Intervalo: 7927.79 Soma: 3167017.3500000173 Valor médio: 141.37839158966196 Valor da mediana: 91.39 Desvio padrão: 184.41028681969576 Coeficiente de Variação: 1.3043739198485862 Minoria (valor de ocorrência mais rara): 0.01 Maioria (valor mais frequente): 9.0 Primeiro quartil: 42.25 Terceiro quartil: 174.47 Intervalo interquartil (IQR): 132.22 A partir dessas estatísticas básicas, descobrimos que existem 22401 segmentos de estrada na camada carregada, onde o mais curto tem 0,01m e o mais longo 7927,8m - quase 8 km. Verificamos que a soma das estradas no Recife é de quase 3,2 mil km (3167.01km). Dado que a média é maior do que a mediana, isso nos diz que a segunda metade do conjunto de dados contém segmentos de estrada mais longos e que supera os segmentos de estrada na primeira metade. Executando as estatísticas básicas na camada Edifícios (buildings) para a categoria de type, obtemos o seguinte: Campo analisado: type Contagem: 75511 Valores únicos: 47 Valores NULL (perdidos): 62776 Valor mínimo: Prédio Valor máximo: warehouse Comprimento mínimo: 0 Comprimento máximo: 18 Comprimento médio: 0.9626147183854008 Os resultados não parecem iguais aos anteriores: não temos média, mediana ou desvio padrão. Isso ocorre porque o campo de atributo em que executamos o algoritmo é diferente, no qual não temos números, mas palavras - tipos de edifícios. Descobrimos que dos 75511 edifícios no Recife, para 62776 não sabemos o tipo de edifício. Também descobrimos que existem 47 categorias únicas. 10.4.3 Etapa 3: Verificações básicas para encontrar erros rapidamente em seus dados Conjuntos de dados perfeitos e sem falhas são equivalentes ao gás ideal em física. Não existe tal coisa, mas muitos podem chegar muito perto disso. Portanto, antes de fazer qualquer tipo de análise para extrair informações, pelo menos algumas verificações básicas são necessárias sobre quão limpos estão os dados que temos. Existem muitos tipos de erros que podem afetar a qualidade de seus dados e, considerando o escopo de sua análise geoespacial, sua influência no resultado final pode ser mais ou menos importante. Por exemplo, se você usar dados geoespaciais para se rotear do ponto A ao ponto B de carro, ter uma camada de estradas completa com atributos em que as ruas são de mão única ou fechadas para o tráfego rodoviário é essencial para obter um bom resultado. No entanto, se a sua rota for a pé, essa informação não é crucial para o seu resultado. Ao se referir a erros de dados geoespaciais, existem 2 termos principais que precisam ser bem compreendidos: Acurácia é o grau em que as informações em um mapa correspondem aos valores do mundo real e se aplica tanto à geometria quanto aos atributos. Precisão refere-se ao nível de medição e exatidão de descrição em um conjunto de dados geoespaciais. Um erro abrange tanto a imprecisão dos dados quanto falta de acurácia. Qualidade de dados refere-se ao nível de precisão e acurácia dos conjuntos de dados e é frequentemente documentado em relatórios de qualidade de dados. Analisar e limpar um conjunto de dados geoespaciais pode ser uma tarefa muito demorada e complicada, no entanto - conforme mostrado no exemplo acima - é essencial. Nesta seção, apresentaremos algumas funcionalidades do GIS que permitem ao usuário realizar verificações rápidas em dados vetoriais e tirar um conjunto de conclusões preliminares sobre sua qualidade. Verificações de topologia O QGIS oferece uma funcionalidade que permite ao usuário realizar uma série de verificações topológicas nos conjuntos de dados vetoriais carregados, chamada Verificador de Topologia. Ela pode ser encontrado como um dos painéis (figura 8.9.a) e uma vez ativada, sua janela se parece com a figura 8.9.b. Painel de verificação de topologia Janela de verificação de topologia Figura 8.9.a - Painel de verificação de topologia; b - Janela do verificador de topologia Para definir as regras de topologia, clique no ícone do Verificador de Topologia. Depois, no painel, clique no ícone de configurações (o terceiro da esquerda para direita), abrindo uma janela conforme figura 8.10. Janela de configurações de regras de topologia Figura 8.10 - Janela de configurações de regras de topologia Definiremos uma série de regras para as camadas que carregamos em nosso projeto QGIS, considerando os objetos do mundo real que elas retratam como estradas, edifícios e cursos de água no Recife. A configuração da topologia é simples, pois as regras que podem ser aplicadas a partir da camada selecionada já estão embutidas nesta funcionalidade, conforme mostra a figura 8.11. Menu suspenso de regras de topologia com base na camada selecionada Figura 8.11 - Menu suspenso de regras de topologia com base na camada selecionada. Escolha as regras de topologia conforme ilustrado na figura 8.12 e, em seguida, clique no primeiro ícone da janela para executar e aguardar os resultados. Regras de topologia a serem definidas Figura 8.12 - Regras de topologia a serem definidas Após executar a verificação de topologia, suas janelas de mapa devem se parecer com a figura 8.13. Resultados da verificação de topologia Figura 8.13 - Resultados da verificação de topologia No canto inferior direito, a janela do verificador de topologia lista todos os erros identificados com base nas regras que definimos na fase anterior. Se a caixa de seleção “Mostrar erros” estiver marcada, os erros serão destacados em vermelho no mapa. Clicar duas vezes em um erro moverá o mapa para sua localização. O processo de correção de erros em um conjunto de dados, seja ele relacionado à geometria (duplicatas, lacunas etc.) ou no atributo relacionado (valores ausentes, erros ortográficos etc.) é chamado de limpeza de um conjunto de dados e na maioria das vezes é tão complicado quanto necessário. Embora existam funcionalidades para dar suporte a um processo de limpeza semiautomático, o trabalho manual do usuário geralmente é necessário. Por exemplo, na figura 8.14, ampliamos um erro em nossa camada de pontos de interesse, um ponto duplicado. Como pode ser visto, há 2 pontos retratando um restaurante. Na tabela de atributos podemos que possuem nomes diferentes. Talvez o restaurante tenha mudado de nome e agora esteja duplicado? Erro de ponto duplicado na camada do vetor de pontos de interesse Figura 8.14 - Erro de ponto duplicado na camada do vetor de pontos de interesse Neste caso particular, o usuário provavelmente removeria o ponto duplicado, pois isso pode inserir erros em análises espaciais posteriores. Por exemplo, se um oficial municipal deseja saber quantos restaurantes existem em um bairro específico, o ponto duplicado inserirá um erro nos resultados e isso pode levar a decisões enganosas. Portanto, procederemos com a remoção automática dos pontos duplicados. Para fazer isso, usaremos uma funcionalidade central do QGIS - Excluir geometrias duplicadas - encontrada na caixa de ferramentas de processamento. Seu QGIS deve ser semelhante à figura 8.15. Excluir geometrias duplicadas nos pontos de interesse da camada Figura 8.15 - Excluir geometrias duplicadas nos pontos de interesse da camada Após executar o algoritmo, a janela de funcionalidade apresenta os resultados, identificando 6 pontos duplicados, assim como o verificador de topologia, e informa ao usuário que excluiu todos eles, deixando a camada de pontos de interesse com 1981 feições. Resultado da execução da exclusão de geometrias duplicadas Figura 8.16 - Resultado da execução da exclusão de geometrias duplicadas A nova execução do verificador de topologia mostrará que há 0 erros de pontos duplicados na camada. Atenção! O algoritmo considera apenas geometrias, ignorando os atributos. Se, como é o nosso caso, houver alguma diferença no atributo das duplicatas, o usuário não tem controle sobre qual será mantida. Portanto, se houver necessidade de todas as informações serem mantidas, elas devem ser primeiro copiadas para todas as geometrias, de modo que quando um recurso duplicado for excluído, não haverá perda de informações. Vamos executar outra verificação de topologia, desta vez em nossa camada de edifícios. Configure as seguintes regras: Sem duplicatas Sem geometrias inválidas Verificação de topologia na camada vetorial de edifícios Figura 8.17a - Regras do verificador de topologia na camada vetorial de edifícios Execute o algoritmo. O resultado deve ser semelhante à figura 8.17b (sem erros). Resultados da verificação de topologia na camada vetorial de edifícios Figura 8.17b - Resultados da verificação da topologia na camada vetorial de edifícios Se você tivesse geometrias duplicadas, poderia limpá-las fazendo os mesmos passos descritos acima para os pontos. Uma limpeza completa dos conjuntos de dados vetoriais usados ​​para este módulo está fora do escopo. Sua complexidade o transforma em um módulo mais avançado em si mesmo. 10.4.4 Etapa 4: Observe as informações anexadas aos pontos, linhas e polígonos Vamos executar mais um algoritmo para ter uma ideia de quais são os atributos de nossas camadas do Recife. Depois de identificarmos quantos recursos cada camada possui, vamos ver quantos e quais são os atributos exclusivos nos seguintes casos: camada buildings - atributo type; camada pois_cleaned - atributo fclass; camada waterways - atributo fclass; camada pofw - atributo fclass; camada road - atributo fclass; camada landuse - atributo fclass; Para isso, vá para Vetor &gt; Analisar &gt; Listar valores únicos (figura 8.19). Depois, clique em “Executar processo em Lote…”, na parte inferior da janela. Listar valores únicos em uma funcionalidade de camada vetorial Figura 8.19a - Lista valores únicos em uma funcionalidade de camada vetorial Na janela que se abre, insira o nome de cada camada e o atributo de interesse conforme enumerado na lista acima e você deverá obter os seguintes resultados: Lista valores exclusivos em uma funcionalidade de camada vetorial (Processamento em lote) Figura 8.19b - Lista de valores únicos em uma funcionalidade de camada vetorial (Processamento em lote) #### buildings { &#39;TOTAL_VALUES&#39;: 47, &#39;UNIQUE_VALUES&#39;: &#39;parking;dormitory;stilt_house;NULL;pavilion;greenhouse;ruins;transportation;college;yes;chapel;boathouse;retail;supermarket;Prédio;college;industrial;farm;house;garages;garage;university;public;shed;roof;carport;church;temple;service;residential;hotel;warehouse;shop;cowshed;civic;kindergarten;stadium;apartments;semidetached_house;office;cabin;school;construction;commercial;terrace;grandstand;hospital;government&#39; } 10.4.4.1 pois_cleand { &#39;TOTAL_VALUES&#39;: 95, &#39;UNIQUE_VALUES&#39;: &#39;recycling;artwork;tourist_info;shoe_shop;department_store;greengrocer;bicycle_rental;pharmacy;vending_any;hairdresser;post_box;car_wash;laundry;newsagent;drinking_water;outdoor_shop;community_centre;florist;fast_food;pitch;computer_shop;viewpoint;car_sharing;dog_park;guesthouse;theatre;travel_agent;library;convenience;waste_basket;bank;car_rental;supermarket;college;wayside_shrine;university;car_dealership;optician;hostel;telephone;toilet;pub;jeweller;bar;courthouse;embassy;monument;doctors;video_shop;camera_surveillance;hospital;bicycle_shop;fire_station;ruins;mall;playground;mobile_phone_shop;beverages;gift_shop;lighthouse;toy_shop;clothes;bench;dentist;bakery;water_tower;sports_shop;police;sports_centre;kiosk;cafe;shelter;cinema;attraction;museum;bookshop;motel;chalet;furniture_shop;post_office;atm;hotel;fountain;restaurant;doityourself;arts_centre;beauty_shop;comms_tower;tower;memorial;school;stationery;park;nightclub;camp_site&#39; } 10.4.4.2 waterways { &#39;TOTAL_VALUES&#39;: 4, &#39;UNIQUE_VALUES&#39;: &#39;river;drain;stream;canal&#39; } 10.4.4.3 pofw { &#39;TOTAL_VALUES&#39;: 6, &#39;UNIQUE_VALUES&#39;: &#39;buddhist;christian_evangelical;muslim;christian;christian_catholic;christian_methodist&#39; } 10.4.4.4 road { &#39;TOTAL_VALUES&#39;: 19, &#39;UNIQUE_VALUES&#39;: &#39;secondary_link;primary_link;path;trunk_link;service;track;residential;track_grade3;primary;living_street;unclassified;trunk;pedestrian;tertiary_link;footway;tertiary;steps;secondary;cycleway&#39; } 10.4.4.5 landuse { &#39;TOTAL_VALUES&#39;: 17, &#39;UNIQUE_VALUES&#39;: &#39;allotments;farmland;orchard;cemetery;grass;recreation_ground;park;farmyard;industrial;meadow;heath;commercial;forest;scrub;retail;military;residential&#39; } Tabela 8.1 - Tabela que identifica quantos e quais são os valores únicos para os atributos selecionados Para uma análise mais aprofundada dos atributos de nossas camadas vetoriais, usaremos o plugin Group Stats. Ele foi desenvolvido para oferecer suporte ao cálculo de estatísticas para grupos de recursos em uma camada vetorial, tornando-o muito útil para obter mais compreensão de seus dados, bem como para detectar possíveis erros nos atributos. Primeiro, certifique-se de ter instalado e ativado o plugin Group Stats. Em seguida, para abrir a janela Group Stats, vá para Vetor &gt; Group Stats &gt; Group Stats. Plugin Group Stats Figura 8.20a - Plug-in Group Stats Uma nova janela como a da figura 8.20b deve abrir. Janela Group Stats Figura 8.20b - Janela Group Stats De acordo com a análise feita anteriormente, vimos que para os edifícios da camada temos 47 tipos diferentes de edifícios, mas quantos de cada e qual é a área construída total de cada categoria? Quanto espaço para escolas, mercados, casas? Group Stats pode nos ajudar a responder a essa pergunta. Do lado direito da janela, está o painel de controle, onde escolhemos o que queremos calcular, bem como a forma como os dados devem ser organizados. Usando arrastar e soltar, siga o arranjo na figura 8.21 e pressione calcular. Executando Group Stats na camada de construção Figura 8.21 - Executando Group Stats na camada de construção. Olhando para o resultado, podemos extrair informações importantes sobre nossos dados. Por exemplo, para estádios no Recife, temos 33 edifícios com uma área total construída de 31539 metros quadrados, aprox. 32 hectares. E pode-se continuar a análise para mais informações valiosas. Outra análise interessante pode ser executada na camada vetorial de estradas. A Figura 8.22 mostra como calcular os comprimentos de estradas categorizados por tipo de estrada (primária, residencial, rodovia etc.) e velocidade máxima permitida. Executando Group Stats na camada de estradas Figura 8.22 - Executando Group Stats na camada de estradas. 10.4.5 Quiz Os metadados são importantes? Sim, porque fornecem uma visão sobre os dados geográficos que de outra forma não seria possível obter. Não, é apenas burocracia A topologia é relevante para a geometria ou para a tabela de atributos de uma camada vetorial? -para a geometria da camada vetorial. O que é mais importante, a geometria ou os dados do atributo? Geometria. Dados de atributo. Ambos. 10.5 Introdução ao processamento vetorial A primeira fase do módulo vetorial fez uma breve introdução sobre as etapas que se devem realizar para se ter uma compreensão básica dos dados geoespaciais que temos em mãos. Esta segunda fase do módulo leva a um trabalho mais aprofundado para processar dados vetoriais a fim de extrair percepções valiosas para auxiliar na tomada de decisões. Seguindo os conceitos descritos no início deste módulo, o geoprocessamento representa qualquer processo aplicado a um conjunto de dados geográficos, com o objetivo de obter um conjunto de dados derivado abrindo novos insights sobre os dados. E é isso que tentaremos fazer a seguir. Existem muitas operações que podem ser realizadas em um ou mais conjuntos de dados geoespaciais e, durante esta primeira etapa, executaremos algumas das mais comuns para entender como funcionam. Buffer. Imagine que você precise analisar uma nova legislação que exige que em uma área de 500 metros ao redor de locais de culto não possa haver outra construção. Você gostaria de ver onde exatamente essas delimitações estão e talvez até quantos metros quadrados isso representa para o seu distrito. O primeiro passo é definir um buffer em torno dos locais de culto: Vector &gt; ferramentas de geoprocessamento &gt; Buffer (Amortecedor). Quando a janela do buffer abrir, defina os parâmetros como na figura 8.23: Definindo os parâmetros para um buffer de 500 m ao redor dos locais de culto Figura 8.23 ​​- Definindo os parâmetros para um buffer de 500 m ao redor dos locais de culto Um detalhe do resultado do geoprocessamento está representado na figura 8.24: Buffer de execução em uma camada vetorial de ponto Figura 8.24 - Buffer em execução em uma camada vetorial de ponto Para responder completamente à pergunta inicial, o próximo passo é calcular as áreas para todos os buffers e somá-los (ver Fase 1, passo 4) - figura 8.25. Calcule a área para a camada recém-obtida e, em seguida, calcule usando Group Stats a soma total Figura 8.25 - Calcule a área para a camada recém-obtida e, em seguida, calcule usando Group Stats a soma total. Recortar Imagine que você queira saber onde estão todas as áreas industriais delineadas em seu distrito e também quantos edifícios estão dentro desse perímetro. Ao inspecionar visualmente seus dados vetoriais, você percebe que há várias áreas industriais que contêm vários edifícios. Você deseja separar esses edifícios e usá-los posteriormente. O primeiro passo é selecionar todos os recursos da camada de uso do solo que tenham como atributo industrial (ver módulo 6 para saber como fazer isso). Em seguida, você vai para Vetor &gt; Geoprocessamento &gt; Recortar e escolhe como a camada a ser recortada buildings. Seus resultados devem ser semelhantes à figura 8.27b. Figura 8.26a - Selecione landuse fclass = industrial Figura 8.26a - Selecione landuse fclass = industrial. Seleção reduzida de alguns edifícios e uso do solo industrial, para que o cálculo possa terminar mais rápido Figura 8.26b - Seleção reduzida de alguns edifícios e uso do solo industrial, para que o cálculo possa terminar mais rápido. Execute o algoritmo de Clip. Certifique-se de marcar a caixa ** Somente recursos selecionados ** para a camada de sobreposição (uso do solo). Isso garantirá que apenas os recursos atualmente selecionados serão usados ​​para recortar e acelerar os cálculos. Executando o algoritmo de Clip Figura 8.27a - Executando o algoritmo de Clip Depois de executar o algoritmo, seus resultados devem ser semelhantes à figura 8.27b. Os edifícios recortados são coloridos em verde (pode ser diferente em seu machince). Quantos edifícios industriais você cortou e qual é sua área total? Resultados da funcionalidade do clipe Figura 8.27b - Resultados da funcionalidade de clipe Polígonos de Thiessen (Voronoi). Imagine que você tenha que tomar uma série de decisões administrativas em seu distrito com base no número de escolas existentes e em quais áreas específicas elas atendem. A análise geoespacial pode ser útil. Você pode começar calculando os polígonos de Thiessen. Com base em uma área contendo pelo menos dois pontos, um polígono de Thiessen é uma forma bidimensional cujos limites contêm todo o espaço que está mais próximo de um ponto dentro da área do que qualquer outro ponto sem a área. Um bom exemplo de uso é em meteorologia, onde estações meteorológicas são pontos discretos, mas as informações coletadas são consideradas medidas na superfície com base nos polígonos de Thiessen. Para responder à pergunta acima, vamos executar o algoritmo apenas para pontos que têm o atributo escola no tipo. Portanto, faça a seleção conforme as instruções no módulo 6. Você deve ter 88 recursos selecionados na camada pois_cleaned. Vá para Vetor &gt; Geometria &gt; Polígonos de Voronoi Depois de definir os parâmetros - selecione a camada de pontos para a qual queremos os polígonos de Voronoi calculados e uma extensão de 30% para que toda a cidade do Recife esteja contida, você deve ver um resultado como na figura 8.28d. Filtrando a camada de poi para obter todas as escolas Figura 8.28a - Filtrando a camada de poi para obter todas as escolas Todas as escolas na camada de poi Figura 8.28b - Todas as escolas na camada de poi Executando o algoritmo do polígono de Voronoi Figura 8.28c - Executando o algoritmo do polígono de Voronoi Resultados da aplicação do algoritmo de polígonos de Thiessen (Voronoi) a uma camada de vetor de ponto Figura 8.28d - Resultados da aplicação do algoritmo de polígonos de Thiessen (Voronoi) a uma camada vetorial de ponto Às vezes, as necessidades impõem a exigência de se ter informações em áreas menores, claramente definidas e iguais e não para toda uma grande região, como um país ou uma grande cidade. Portanto, os dados precisam ser analisados ​​e visualizados de forma fatiada e bem definida, permitindo a comparação que de outra forma poderia ser difícil sem uma referência comum de base. Vamos supor que você tenha que apresentar um relatório que permitirá comparações feitas para unidades de 2X2 km sobre a unidade administrativa, incluindo: densidade de espaços verdes (parques, florestas) no relatório to o espaço construído por unidade; Comprimento total das ruas de cada unidade; Comprimento total dos cursos d’água para cada unidade; número total de edifícios públicos para cada unidade (escolas, jardins de infância, hospitais, prefeituras etc.). Vimos que existem ferramentas que podem nos auxiliar no cálculo da superfície total ocupada por um determinado tipo de recurso, no entanto, o primeiro passo é criar nossas unidades 2X2 - grades de células. Para fazer isso, vá para: Vetor &gt; Investigar &gt; Criar grade .. Defina os parâmetros para: - Tipo de grade - Retângulo (polígono) - Extensão da grade - camada limites_mun_recife - Espaçamento horizontal - 2 km - Espaçamento vertical - 2 km Criando uma grade vetorial de 2X2km para o Recife Figura 8.29a - Criar grade vetorial de 2x2 km para o Recife Você deve obter um resultado como na figura 8.29b. Grade vetorial de 2X2km para a província de Recife Figura 8.29b - Grade vetorial de 2x2 km para o Recife Indo além na resposta às perguntas em nosso exercício, precisamos fazer o seguinte: espaços verdes (parques, florestas), espaço construído por proporção de unidade da grade: Espaços verdes e espaços construídos são dados contidos na camada vetorial de uso do solo, tipo polígono. Para saber exatamente quais são os “espaços verdes”, precisamos ver quais são as categorias incluídas no conjunto de dados. Para isso, executamos o algoritmo Listar valores únicos no atributo fclass e descobrimos que temos as seguintes classes ‘verdes’: prado, grama, natureza_reserva, parque, floresta e o seguinte ‘espaço construído’ classes: varejo, comercial, industrial, residencial. A Figura 8.30b apresenta uma visualização de nossas seleções: Filtrando áreas verdes e espaços construídos em Recife Figura 8.30a - Filtragem de áreas verdes e espaços construídos em Recife Distribuição espacial das áreas verdes e áreas construídas em Recife Figura 8.30b - Distribuição espacial das áreas verdes e áreas construídas em Recife A segunda etapa para atender ao requisito é identificar quanto espaço verde e quanto espaço construído existe em cada 2X2 km. Para obter isso, iremos interceptar as 2 camadas vetoriais poligonais sobrepostas. O algoritmo extrai as porções sobrepostas de recursos na Entrada - a camada de uso do solo e a camada de Sobreposição - a camada de grade. Vá para Vetor - Geoprocessamento - Interseção ou procure Interseção na Caixa de Ferramentas de Processamento ou na Barra Localizadora Defina os parâmetros do algoritmo como na figura 8.31. Parâmetros para o algoritmo de interseção Figura 8.31 - Parâmetros para o algoritmo de interseção O resultado deve ser semelhante ao da figura 8.32. Resultado da execução do algoritmo de interseção para prender os polígonos vetoriais de uso do solo à camada da grade Figura 8.32 - Resultado da execução do algoritmo de interseção para prender os polígonos vetoriais de uso do solo à camada da grade. Agora, para cada unidade de 2X2 km, temos os recursos de uso do solo com os quais podemos trabalhar. A tabela de atributos também armazena essas informações, pois cada célula da grade - unidade - possui um id único, ver figura 8.33. Recursos Landuse cortados por cada célula da grade e sua tabela de atributos associada Figura 8.33 - Características Landuse cortadas por cada célula da grade e sua tabela de atributos associada. Agora que temos todos os recursos de uso do solo por unidade de 2X2 km, continuaremos separando as geometrias das que compõem o espaço verde e o espaço construído conforme definido anteriormente - para cada célula da grade. Assim, para espaços verdes, selecionaremos todos os recursos que têm o valor de atributo para \"fclass\" IN ( 'forest', 'grass', 'meadow', 'park', 'recreation_ground'). Na tabela de atributos, no campo de expressão digite: \"fclass\" IN ( 'forest', 'grass', 'meadow', 'park', 'recreation_ground'). Exporte os recursos selecionados como espacos_verdes_grade (consulte o módulo 6 para obter mais detalhes). Não se esqueça de marcar Salvar apenas os recursos selecionados. A nova saída deve ter 2160 recursos. Faça o mesmo para o espaço construído. Selecione os recursos em uso do solo que têm o valor de atributo \"fclass\" IN ('commercial', 'industrial', 'retail', 'residential'), escrevendo a seguinte expressão na janela de filtro com base em Expressão: \"fclass\" IN ('commercial', 'industrial', 'retail', 'residential'). Selecione as geometrias filtradas e exporte como espacos_construidos_grade. Sua nova saída deve ter 585 recursos. Como alternativa, você também pode usar um filtro em vez de uma seleção. Selecionando os espaços verdes Figura 8.34a - Seleção dos espaços verdes. Espaços verdes selecionados Figura 8.34b - Espaços verdes selecionados. Espaços verdes e construídos Figura 8.34c - Espaços verdes e edificados. Em seguida, calcule a área ocupada por cada característica das 2 camadas. Vá para a tabela de atributos de cada camada e adicione a área da coluna geométrica inserindo a expressão round ($ area, 2) na calculadora de campo. (consulte o módulo 6 para obter detalhes, se necessário). No entanto, a grade de 2X2km do Recife tem um número conhecido de células da grade, que é 117. Portanto, precisamos resumir as áreas para todos os tipos de espaços verdes (florestas, parques etc.) e espaços construídos (comerciais , residencial, etc.) e junte-o de acordo com todas as 117 células da grade. Para fazer isso, usaremos o plugin Group Stats para somar para cada grid_id todas as categorias verdes, respectivamente todas as categorias construídas. Para a camada vetorial espacos_verdes_grade, defina os parâmetros como na figura 8.34e. Calculando a área de cada recurso Figura 8.34d - Calculando a área de cada recurso. Configuração de parâmetros GroupStat para somar as áreas verdes por cada célula de grade de 2X2km Figura 8.34e - Configuração dos parâmetros do GroupStat para somar as áreas verdes por cada célula de grade de 2X2km. Em seguida, salve os resultados como um arquivo .csv denominado espacos_verdes_grade. Vá para Data &gt; Save all to CSV file Execute Group Stats para o espaço construído da mesma maneira e salve-o como um arquivo csv denominado espacos_construidos_grade. A seguir, vamos trazer os 2 arquivos csv calculados com GroupStat para o QGIS (Camada &gt; Adicionar camada &gt; Adicionar camada de texto delimitado - veja mais detalhes no módulo 2). Carregando espacos_verdes_grade CSV Figura 8.35a - Carregando o CSV espacos_verdes_grade A tabela de atributos CSV espacos_verdes_grade Figura 8.35b - A tabela de atributos de CSV espacos_verdes_grade Seguindo em frente, precisamos juntar os espaços calculados - verdes e construídos - a cada grade de células de 2X2 km. Para isso, selecione a camada vetorial Grade, abra a janela de propriedades e vá em Uniões. Esta funcionalidade permite que você se junte por um campo de atributo comum, outros. No nosso caso, usando o valor comum grid_id vamos juntar, a soma das áreas construídas e espaços verdes dos 2 arquivos csv obtidos na etapa anterior. Na janela Uniões, pressione o botão verde mais abaixo e defina os parâmetros como na figura 8.35, para espaços verdes. Configurando os parâmetros para unir pelo campo comum grid_id/id as somas dos espaços verdes e construídos para cada célula da grade - unidade de 2X2km Figura 8.35c - Configurando os parâmetros para unir por campo comum grid_id/id as somas de espaços verdes e construídos para cada célula da grade - unidade de 2X2km. Repita para espaços construídos. Os resultados das duas junções são visíveis na tabela de atributos, como pode ser visto na figura 8.36_b. Mantivemos o grid_id em ambas as junções, para ter certeza de que nenhum erro ocorreu. Podemos verificar visualmente rapidamente para ter certeza de que os 3 campos de atributo: id, construido_grid_id e verde_grid_id são exatamente os mesmos. CSV verde e incorporado unido à grade Figura 8.36a - CSV verde e construído unido à grade. Tabela de atributos da camada vetorial Grade contendo as áreas totais para espaços verdes e edificados Figura 8.36b - Tabela de atributos da camada vetorial Grade contendo as áreas totais para espaços verdes e edificados. Como reunimos todas as informações necessárias para espaços verdes e construídos na tabela de atributos da camada de grade, tudo o que precisamos fazer é calcular a porcentagem desses espaços dentro da célula de grade de 2X2 km. Iremos calculá-lo usando a calculadora de campo, usando a seguinte expressão: round (100 * verde_None/(2000*2000), 5) e round (100 * construido_None/(2000*2000), 5). Em seguida, adicionamos um novo campo no qual calcular o relatório do verde_por/construido_por, e assim chegar à resposta ao nosso pedido: espaços verdes (parques, florestas) espaço construído por unidade de proporção: round (\" verde_por \"/\" construido_por \", 5). uma visão geral clara do nosso conjunto de dados, nos casos em que não há espaço acumulado na célula da grade- inserimos o valor 1000 na tabela de atributos, nos casos em que não há espaço verde, inseriremos o valor 999, enquanto no caso de ambos os valores serem NULL então inserimos 1001. Para isso podemos usar a expressão: CASE WHEN (verde_por IS NULL) AND (construido_por IS NOT NULL) THEN 999 WHEN (construido_por IS NULL) AND (verde_por IS NOT NULL) THEN 1000 WHEN (verde_por IS NULL) AND (construido_por IS NULL) THEN 1001 ELSE round(verde_por/construido_por, 5) END O resultado final seria semelhante ao da figura 8.37e. Porcentagem de área verde na grade de 2kmX2km Figura 8.37a - Porcentagem de área verde na grade de 2km X 2km Porcentagem calculada de área verde e construída Figura 8.37b - Porcentagem calculada de área verde e construída Calculando para a proporção de áreas verdes e construídas Figura 8.37c - Computação para a proporção de áreas verdes e áreas construídas Proporção calculada de áreas verdes e edificadas Figura 8.37d - Razão calculada de áreas verdes e construídas Proporção de áreas verdes e construídas na grade de 2kmX2km Figura 8.37e - Razão de áreas verdes e áreas construídas na grade de 2km X 2km extensão total de ruas e vias navegáveis ​​de cada unidade; Para realizar esta tarefa, o QGIS oferece um algoritmo que pega uma camada de polígono e uma camada de linha e mede o comprimento total das linhas e o número total delas que cruzam cada polígono. A camada resultante tem os mesmos recursos da camada de polígono de entrada, mas com dois atributos adicionais contendo o comprimento e a contagem das linhas em cada polígono. Vá para Vetor &gt; Análise &gt; Soma de Comprimentos de Linha e defina os parâmetros da seguinte forma: - polígonos - Grade - linhas - road - nome do campo de comprimento de linhas - road_comp - nome do campo de contagem de linhas - road_cont Você pode criar uma camada temporária ou salvá-la como um arquivo em seu computador. Se, para representação, você usa quebras naturais, seu mapa deve se parecer com a figura 8.38c. Parâmetros de Soma de Comprimento de Linha Figura 8.38a - Parâmetros de Somatórios de Comprimento de Linha Comprimentos de estradas e contagens por célula de grade Figura 8.38b - Comprimentos de estradas e contagens por célula de grade Distribuição espacial de unidades de 2X2km com a maioria das estradas Figura 8.38c - Distribuição espacial de unidades de 2X2km com a maioria das estradas Agora, repita o mesmo processamento para comprimentos de cursos d’água (waterways) ​​em cada célula da grade. Executar o processo no arquivo de grade obtido anteriormente o ajudará a ter todas as informações obtidas até agora anexadas à mesma geometria. Aconselhamos que você salve este arquivo em seu computador com comprimentos_linhas_grade. Se, para representação, você usar quebras naturais, seu mapa deve se parecer com a figura 8.39. Distribuição espacial de unidades de 2X2km com a maioria dos cursos d’água Figura 8.39 - Distribuição espacial de unidades de 2X2km com a maioria dos cursos d’água número total de edifícios públicos (escolas, jardins de infância, hospitais, prefeituras etc.) para cada célula da grade Para contar o número total de prédios públicos na unidade 2X2, usaremos o pois_cleaned. Primeiro, executamos Vetor &gt; Analisar &gt; Lista de Valores Únicos e decidimos qual edifício consideramos público. Selecionaremos em nossa camada de dados de pontos vetoriais (pois) os seguintes recursos: \"fclass\" IN ('arts_centre', 'embassy', 'hospital', 'library', 'museum', 'school', 'university', 'monument'). Sua seleção deve ter 324 recursos no total. Selecionando POIs públicos Figura 8.40a - Seleção de POIs públicos POIS público selecionado Figura 8.40b - POIS público selecionado Para responder à nossa solicitação, usaremos o algoritmo Vetor &gt; Analisar &gt; Contagem de pontos em polígono. Este algoritmo pega uma camada de pontos e uma camada de polígono e conta o número de pontos da primeira em cada polígono da segunda. Uma nova camada de polígonos é gerada, com exatamente o mesmo conteúdo da camada de polígonos de entrada, mas contendo um campo adicional com a contagem de pontos correspondente a cada polígono. Defina a camada de ponto para pois_cleand e a camada de grade de polígono com as informações calculadas na rodada anterior. Para os pontos, marque os Apenas feições selecionadas, para que o algoritmo calcule apenas os pontos selecionados - os POIs públicos. Salve o arquivo de saída como pontos_publicos_grade. Contar POIS públicos em cada grade de 2km X 2km Figura 8.40c - Contagem de POIS públicos em cada grade de 2km X 2km Distribuição espacial da densidade de POIs públicos por unidade 2X2km Figura 8.40d - Distribuição espacial da densidade de POIs públicos por unidade 2X2km 10.5.1 Quiz Se eu tiver 2 camadas vetoriais - uma representa a extensão da cidade onde estou trabalhando e a segunda, as estradas construídas em todo o país - que ferramenta de processamento usaria para extrair apenas as estradas da minha cidade: buffer ou recortar (clip)? -Recortar. A ferramenta de buffer é útil no seguinte caso: Eu tenho uma camada vetorial de polígono com monumentos históricos em minha região e quero desenhar uma área de proteção de 50m ao redor deles? -Sim Qual das três ferramentas de geoprocessamento você usaria para mesclar duas camadas vetoriais semelhantes? Polígonos de Voronoi, dissolver, interseção? -Dissolver. 10.6 Geoestatística e interpolação A última fase do módulo de dados vetoriais apresenta o conceito de estimativa de dados. Estamos acostumados a estimar quase diariamente em vários tópicos, por exemplo, quanto tempo levará para ir de casa para o trabalho em certas condições. Estamos acostumados a dar nosso melhor palpite, com base em experiências anteriores e palpites. No entanto, ao estimar dados faltantes, a estimativa é substituída por equações matemáticas muito bem definidas com limitações bem conhecidas. O assunto requer conhecimentos significativos em estatística e os resultados devem ser sempre considerados à luz das suas limitações. Dito isso, apresentaremos um pequeno exemplo de estimativa de dados que fará a transição para o próximo módulo - processamento de dados raster. Interpolação é um processo matemático através do qual se pode estimar os valores que faltam com base em um número limitado de valores que existem. E essas situações são comuns - imagine informações meteorológicas. Os dados sobre as temperaturas da superfície e de quanta chuva caiu podem ser medidos apenas em pontos específicos em estações meteorológicas calibradas, e não em toda a superfície. No entanto, não temos “pontos cegos” de nenhuma temperatura nos mapas que vemos na seção de meteorologia dos jornais. Assim, o resto dos valores - para construir os fenômenos contínuos - são obtidos por interpolação. A suposição na qual a interpolação se baseia é que objetos espacialmente distribuídos são espacialmente correlacionados; em outras palavras, coisas próximas tendem a ter características semelhantes. Existem muitos métodos de interpolação implementados em pacotes de software GIS; decidir qual é o melhor em cada caso particular depende da especificidade dos dados, o que eles representam e do entendimento geoestatístico do usuário que faz a interpolação. Para fazer uma verificação rápida sobre quais métodos de interpolação estão disponíveis no QGIS, vá para a Caixa de Ferramentas de Processamento e escreva na barra de pesquisa a palavra-chave interpolação. O resultado deve ser semelhante à figura 8.41. Métodos de interpolação disponíveis no QGIS Figura 8.41 - Métodos de interpolação disponíveis no QGIS Como pode ser observado, através do QGIS o usuário tem acesso a outros algoritmos, implementados no GRASS ou SAGA, como resultado da integração em QGIS destas (e outras) soluções de software muito poderosas. Mergulhar na matemática por trás de cada algoritmo de interpolação está além do escopo deste módulo. No entanto, para fins de demonstração, simularemos a interpolação de dados de precipitação para obter um conjunto de dados uniforme sobre a quantidade de precipitações caídas em nossa área de interesse, a cidade do Recife. Como o exercício é puramente para fins de demonstração, criaremos nosso próprio conjunto de dados de ponto - para representar as estações meteorológicas onde os valores de precipitação foram registrados no decorrer de uma semana. Assim, o primeiro passo é criar uma nova camada vetorial - tipo de ponto - com pontos atribuídos aleatoriamente dentro da extensão do Recife. Existem várias maneiras de fazer isso, seja com o algoritmo de Pontos aleatórios em polígonos .. ou com o algoritmo Pontos aleatórios em limites de camada ... Vá para Vetor &gt; Analisar &gt; Pontos aleatórios em polígonos (Random points in polygons)…. Você também pode pesquisar o algoritmo na caixa de ferramentas de processamento ou na barra do localizador. Escolha como parâmetros: * 93 pontos * mínimo 5 km. O resultado deve ser semelhante à figura 8.42. Criando pontos aleatórios dentro de uma camada poligonal Figura 8.42 - Criação de pontos aleatórios dentro de uma camada poligonal A camada de pontos resultante será semelhante à figura 8.43. Camada de dados de ponto - criada aleatoriamente dentro de polígonos especificados Figura 8.43 - Camada de dados de ponto - criada aleatoriamente dentro de polígonos especificados. Agora que temos nossas estações meteorológicas imaginárias que medem as precipitações no Recife, continuaremos adicionando medições fictícias ao longo de 7 dias. Para fazer isso, podemos usar a função aleatória fornecida pelo QGIS. Abra a tabela de atributos da camada de dados do ponto criada e abra a calculadora de campo. Em um campo recém-criado (número inteiro inteiro), insira a seguinte fórmula rand(min, max), onde min e max serão substituídos pelo seguinte par de números para os 7 dias correspondentes (consulte a figura 8.44): 0 - 59; 2 - 35; 10 - 45; 0 - 21; 5 - 63; 0 - 10; 0 - 21. Criando valores aleatórios dentro dos limites especificados Figura 8.44 - Criação de valores aleatórios dentro dos limites especificados Depois de adicionar todas as 7 colunas, sua tabela de atributos deve se parecer com a figura 8.45. Dados fictícios de precipitação para 93 estações meteorologia fictícias no Recife Figura 8.45 - Dados fictícios de precipitação para 93 meteorologia estações fictícias no Recife. A seguir, iremos interpolar esses valores para cada um dos 7 dias para obter uma camada contínua que cobre todo o território da província. Visto que a operação é repetitiva, usaremos o processamento em lote. O método de interpolação selecionado - estritamente para fins de demonstração! - é IDW - ponderada pela distância inversa. Defina os seguintes parâmetros: * coeficiente de distância: 2 * extensão: limite_mun_recife * tamanho do raster de saída: 50. Seus parâmetros devem ser semelhantes à figura 8.46 a seguir. Configurando a janela de processamento em lote para interpolar os valores de precipitação para todos os 7 dias Figura 8.46 - Configurando a janela de processamento em lote para interpolar os valores de precipitação para todos os 7 dias O resultado da interpolação será semelhante ao da figura 8.47. Conjuntos de dados interpolados Figura 8.47 - Conjuntos de dados interpolados As estações meteorológicas são visíveis na tela do mapa e nas camadas você pode ver todos os 7 conjuntos de dados raster recém-criados que representam os valores de precipitação para cada dia no Recife. A seguir, vamos mudar a simbologia das 7 camadas para uma mais colorida (Propriedades &gt; Simbologia &gt; Banda única falsa cor &gt; Magma). Olhando para os dados de ponto e os conjuntos de dados raster criados com base neles, podemos perceber que agora temos valores para toda a região e não apenas no local medido. Existem muitos algoritmos de processamento que podem ser aplicados a esses rasters para extrair informações, mas mais sobre isso no próximo módulo - processamento e visualização de dados raster. No entanto, como temos valores interpolados para 7 dias, vamos preparar uma curta animação sobre como os valores de precipitação evoluíram para o Recife. Para fazer isso, abra a caixa de diálogo Propriedades de test_meteo_stations_1 raster &gt; clique na guia Temporal &gt; marque a opção Temporal &gt; selecione as datas de início e término, como na figura 8.48. Faça o mesmo para todas as 7 camadas raster. Configurando informações temporais para o conjunto de dados raster (1) Configurando informações temporais para o conjunto de dados raster (2) Configurando informações temporais para o conjunto de dados raster (7) Figura 8.48 - Definição de informações temporais para o conjunto de dados raster (1, 2, 7). Abra o Painel do Controlador Temporal (pode ser encontrado em ** Exibir &gt; Painéis &gt; Painel do Controlador Temporal **) e defina os parâmetros como na figura 8.49. Defina os parâmetros do Painel de controle de tempo Figura 8.49 - Definir os parâmetros do painel do controlador de tempo. Clique no botão Reproduzir e veja como os valores mudam. Você pode escolher quais outras camadas ficarão visíveis. Na figura 8.50, adicionamos a camada vetorial de edifícios. Selecionando outras camadas para serem visíveis na animação temporal Figura 8.50 - Selecionando outras camadas para serem visíveis na animação temporal. 10.6.1 Quiz Existe um algoritmo para interpolar dados no QGIS ou mais? -Existem mais de um algoritmos implementados. Para que serve a interpolação? -A interpolação é útil para estimar dados com base em dados conhecidos. "],["processamento-e-análise-raster.html", "Capitulo 11 Processamento e análise raster 11.1 O modelo de dados 11.2 Racional do processamento raster 11.3 Entendendo seus dados raster 11.4 Introdução ao trabalho com dados raster 11.5 Trabalho com dados raster e vetoriais 11.6 Referências 11.7 Notas", " Capitulo 11 Processamento e análise raster Autor: Codrina Ilie Este módulo está focado em um tipo específico de modelo de dados geográficos: geodados raster. Ao final deste módulo, os alunos terão a compreensão básica dos seguintes conceitos: modelo de dados raster ponto de grade vs célula de grade bandas de um conjunto de dados raster álgebra de mapa as quatro resoluções de um raster (espacial, temporal, espectral e radiométrico) Reamostragem Processamento em lote detecção de alteração Ferramentas e recursos necessários: Este módulo foi preparado usando QGIS versão 3.16 - Hannover module9.gpkg br_rj_capital High Resolution Settlement Layer SRTM Digital Elevation Model Global Land Cover Map 2015-2019 O sistema de referência de coordenadas usado é o SIRGAS 2000 UTM 23 sul, EPSG 31983. Pré-requisitos: Conhecimento básico de como operar um computador Uma compreensão robusta dos módulos 0, 1, 2, 6 e 8 dos este currículo. 11.1 O modelo de dados Um raster é uma matriz regular de valores, como na figura 9.1. Uma matriz de valores Figura 9.1 - Uma matriz de valores Os valores podem ser atribuídos a pontos de grade, principalmente aos centróides, e neste caso o raster pode ser referido como uma rede. A segunda opção é que os valores sejam atribuídos a toda a célula da grade - chamados pixels (ver figura 9.2). Para o primeiro caso, o raster geralmente representa um campo contínuo, como elevação, temperatura, precipitações, concentrações químicas etc. Para o segundo caso, quando os valores são atribuídos a toda a área do pixel, o raster geralmente representa uma imagem - uma imagem de satélite, um mapa digitalizado, mapas vetoriais convertidos (consulte a Fase 2). Deve-se notar que este modelo de dados não é particularmente eficiente para redes e outros tipos de dados fortemente dependentes de linhas, como limites de propriedades. No lado esquerdo, os valores são atribuídos a centróides. À direita, os valores são atribuídos à área da célula da grade - o pixel. Figura 9.2 - No lado esquerdo, os valores são atribuídos aos centróides. À direita, os valores são atribuídos à área da célula da grade - o pixel. 11.2 Racional do processamento raster Como no caso do processamento de dados vetoriais, a lógica por trás do processamento de dados raster é baseada na mesma capacidade dos sistemas de informação geográfica de armazenar, processar e representar informações dos fenômenos do mundo real; apenas isso a maneira como isso é feito difere. Em vez de ter pontos, linhas e polígonos distintos armazenados como coleções de coordenadas x e y, temos uma matriz de valores que cobre uma área específica como uma malha. Para ter uma imagem mais clara em mente, imagine os mapas de temperatura exibidos na TV. A temperatura é um campo contínuo, não há lugares na superfície da Terra sem temperatura, seja ela positiva, negativa ou 0. Muitas operações podem ser realizadas em conjuntos de dados raster, e o conceito de geoprocessamento detalhado no módulo 8 também se aplica aqui. O termo usado para abranger as operações que podem ser realizadas em rasters é algebra de mapa. Álgebra de mapa representa um conjunto de operações primitivas[1] em um GIS que permite duas ou mais camadas raster de dimensões semelhantes produzirem uma nova camada raster (mapa) usando várias operações, como adição, subtração, comparação etc. Existem quatro categorias de operações que podem ser executadas em rasters, como segue: Operações aritméticas: adição, subtração, multiplicação, divisão. Operações estatísticas: mínimo, máximo, média, mediana. As operações relacionais fornecem comparações entre células usando funções como maior que, menor que ou igual a. Operações trigonométricas: seno, cosseno, tangente, arco seno entre dois ou mais conjuntos de dados raster. As operações exponenciais e logarítmicas usam funções expoentes e logarítmicas. Para cada uma dessas operações, existem algoritmos implementados na maioria dos ambientes GIS que permitem ao usuário aplicá-los em seus dados. A seguir, também implementaremos algumas das operações mais comuns para ter uma noção de como trabalhar e o que se deve esperar desse tipo de processamento de dados. O conceito de dimensões semelhantes refere-se às características dos conjuntos de dados raster. Ou seja, as operações detalhadas acima não podem ser realizadas com resultados significativos em 2 conjuntos de dados raster com diferentes resoluções espaciais, temporais ou espectrais. A seguir, apresentaremos em breve todas as quatro resoluções que são relevantes para imagens raster. Lembrando quais são os 4 tipos de resolução de uma imagem de satélite (raster com valores atribuídos à área da célula - pixels): Resolução espacial corresponde ao tamanho elementar da superfície do solo medida, é expressa em unidades de comprimento e representa o comprimento de um lado do pixel (consulte a figura 9.3). Por exemplo, como você viu no módulo 3, o High Resolution Settlement Layer Data tem uma resolução espacial de 30 metros, ou seja, cada pixel do conjunto de dados estima o número de pessoas que vivem em um raio de 30 metros. Resolução temporal está associada a imagens aéreas (imagens adquiridas por satélites, aviões, helicópteros, drones) e corresponde ao período entre 2 imagens consecutivas do mesmo ponto na Terra, tiradas nas mesmas condições (como tanto quanto possível), como a mesma aeronave, mesma altitude etc. Por exemplo, Landsat 8 tem uma resolução temporal de 16 dias, ou seja, cada ponto na Terra é revisitado pelo satélite Landsat 8 a cada 16 dias[2]. Resolução espectral - os sensores a bordo de satélites ou aviões capturam a radiação eletromagnética proveniente de todos os objetos na Terra - água, assentamentos, florestas, estradas, edifícios, terra nua etc. - e os sensores são especificamente construídos para capturá-la em uma determinada banda espectral conhecida (ou comprimento de onda). O olho humano pode ver uma parte muito pequena do espectro eletromagnético - a luz visível (vermelha, verde e azul), mas os sensores podem ‘ver’ muito mais! (ver figura 9.4) Espectro eletromagnético (crédito da foto NASA Science) Figura 9.4 - Espectro eletromagnético (crédito da foto NASA Science - https://science.nasa.gov/ems/01_intro) A resolução radiométrica é determinada pelo número de bits em que a radiação registrada é dividida. Em dados de 8 bits, os números digitais (DN) podem variar de 0 a 255 para cada pixel (28 ¼ 256 números totais possíveis). Claramente, mais bits significa que o sensor pode detectar mudanças mais sutis na energia que captura, o que leva a uma imagem ‘mais clara’, uma maior precisão radiométrica do sensor, mas também requer mais espaço para armazenar os dados. Bandas espectrais Um conjunto de dados raster contém uma ou mais camadas chamadas bandas. Cada banda armazena outro conjunto de informações sobre a área que o raster cobre. Cada banda tem exatamente a mesma extensão e coordenadas, mas não necessariamente a mesma resolução espacial. Além dos valores armazenados, existem outras propriedades-chave contidas, como: valores máximos, mínimos e médios das células e histograma dos valores das células. Um histograma é uma representação aproximada da distribuição de dados numéricos (veja a figura 9.5); em outras formas, é uma maneira pela qual se pode ter uma noção melhor dos dados em mãos. Exemplo de um histograma, onde x é uma camada raster Figura 9.5 - Exemplo de um histograma, onde x é uma camada raster Por que é isso é importante em nosso contexto? Porque, como mencionado no início, um raster é uma matriz de valores numéricos contínuos (lembre-se do exemplo da temperatura) e um histograma ajuda o usuário a entender como os valores de seus rasters são distribuídos. Cada barra agrupa os valores das células que caem em um intervalo específico, quanto maior a barra, mais células têm valores nesse intervalo específico. Caso o raster tenha mais de uma banda, então o histograma será computado para cada uma. Não há lacunas entre os intervalos representados em um histograma, o histograma é usado apenas para dados contínuos. 11.3 Entendendo seus dados raster Nas últimas duas décadas, o número de satélites capturando dados da Terra cresceu exponencialmente. Além disso, uma política de acesso a dados abertos que foi adotada por diferentes agências espaciais, como a NASA para o programa Landsat ou a Agência Espacial Europeia para o programa Copernicus, abriu a porta para um fluxo avassalador de Dados de observação da Terra. Como consequência natural, o progresso científico de algoritmos, metodologias e o desenvolvimento de ferramentas mais poderosas para processar dados raster - especialmente imagens de satélite - tem sido impressionante e extenso em campos como agricultura, silvicultura, desenvolvimento urbano, atividades humanitárias, oceano e mar monitoramento de água, segurança e muito mais. Nas três fases a seguir, apresentaremos algumas das técnicas de processamento mais comuns e quais resultados esperar delas. 11.3.1 Etapa 1: Prepare seu ambiente de trabalho Vamos começar adicionando ao seu projeto QGIS todos os conjuntos de dados raster com os quais estaremos trabalhando, como segue: Dados de camada de assentamento de alta resolução (HRSL) Missão Topografia de radar de transporte (SRTM) Modelo de elevação digital (DEM) Cobertura do solo dinâmica moderada: as 5 épocas disponíveis 2015, 2016, 2017, 2018 e 2019. Como os dados da camada de assentamento de alta resolução foram apresentados em um módulo anterior, também detalharemos informações sobre os outros 2 conjuntos de dados que usaremos neste módulo. Modelo de elevação digital Shuttle Radar Topography Mission (SRTM-DEM) é um conjunto de dados de modelo digital de superfície global com uma resolução horizontal de aproximadamente 30 metros (grade de 1 arcsec). Um DSM inclui a superfície do solo, vegetação e objetos feitos pelo homem, como edifícios, pontes, etc., em oposição ao modelo digital de terreno (DTM) que considera estritamente o terreno. O Mapa Dinâmico de Cobertura do Solo é um produto do Copernicus Global Land Service (CGLS) derivado da série temporal PROBA-V 100 m e vários outros conjuntos de dados de cobertura do solo. O produto fornece classes discretas de cobertura do solo primárias, bem como camadas de campo contínuas para todas as classes de cobertura do solo básicas que fornecem estimativas proporcionais para cobertura vegetal/solo para os tipos de cobertura do solo. O produto possui 3 bandas: discrete_classification, forest_type e urban_coverfraction. As 2 tabelas a seguir apresentam os valores para cada classe discreta: Tabela 1 - Tabela de valores da banda Discrete_classification Valor Cor Descrição 0 282828 Desconhecido. Não há ou não há dados de satélite suficientes disponíveis. 20 FFBB22 Arbustos. Plantas lenhosas perenes com caules persistentes e lenhosos e sem caule principal definido com menos de 5 m de altura. A folhagem do arbusto pode ser perene ou caducifólia. 30 FFFF4C Vegetação herbácea. Plantas sem caule persistente ou brotos acima do solo e sem estrutura firme definida. A cobertura de árvores e arbustos é inferior a 10%. 40 F096FF Vegetação/agricultura cultivada e manejada. Terras cobertas com culturas temporárias seguidas de colheita e um período de solo nu (por exemplo, sistemas de cultivo único e múltiplo). Observe que as culturas lenhosas perenes serão classificadas como o tipo apropriado de cobertura de terra de floresta ou arbusto. 50 FA0000 Urbano/edificado. Terreno coberto por edifícios e outras estruturas feitas pelo homem. 60 B4B4B4 Vegetação nua/esparsa. Terras com solo, areia ou rochas expostas e nunca apresentam mais de 10% de cobertura vegetal em qualquer época do ano. 70 F0F0F0 Neve e gelo. Terras cobertas de neve ou gelo ao longo do ano. 80 0032C8 Corpos d’água permanentes. Lagos, reservatórios e rios. Podem ser corpos de água doce ou salgada. 90 0096A0 Pantanal. Herbáceo. Terras com mistura permanente de água e vegetação herbácea ou lenhosa. A vegetação pode estar presente em água salgada, salobra ou doce. 100 FAE6A0 Musgo e líquen. 111 58481F Floresta fechada, folha de agulha perene. Copa das árvores&gt; 70%, quase todas as árvores de folhas agulhas permanecem verdes o ano todo. O dossel nunca está sem folhagem verde. 112 9900 Floresta fechada, folha larga perene. Copa das árvores&gt; 70%, quase todas as árvores de folha larga permanecem verdes durante todo o ano. O dossel nunca está sem folhagem verde. 113 70663E Floresta fechada, folha de agulha decídua. O dossel das árvores&gt; 70% consiste em comunidades sazonais de árvores de folhas agulhas com um ciclo anual de períodos de folhagem e folhagem. 114 00CC00 Floresta fechada, folha larga decídua. O dossel das árvores&gt; 70% consiste em comunidades sazonais de folhas largas com um ciclo anual de períodos de folhagem e folhagem. 115 4E751F Floresta fechada, mista. 116 7800 Floresta fechada, não correspondendo a nenhuma das outras definições. 121 666000 Floresta aberta, folha de agulha perene. Camada superior - árvores 15-70% e segunda camada - mistura de arbustos e pastagens, quase todas as árvores de folhas agulhas permanecem verdes durante todo o ano. O dossel nunca está sem folhagem verde. 122 8DB400 Floresta aberta, folha larga perene. Camada superior - árvores 15-70% e segunda camada - mistura de arbustos e pastagens, quase todas as árvores de folha larga permanecem verdes durante todo o ano. O dossel nunca está sem folhagem verde. 123 8D7400 Floresta aberta, folha de agulha decídua. Camada superior - árvores 15-70% e segunda camada - mistura de arbustos e pastagens, consiste em comunidades sazonais de árvores de folhas agulhas com um ciclo anual de períodos de folhagem e folhagem. 124 A0DC00 Floresta aberta, folha larga decídua. Camada superior - árvores 15-70% e segunda camada - mistura de arbustos e pastagens, consiste em comunidades de árvores de folha larga sazonais com um ciclo anual de períodos de folhagem e folhagem. 125 929900 Floresta aberta, mista. 126 648C00 Floresta aberta, não correspondendo a nenhuma das outras definições. 200 80 Oceanos, mares. Podem ser corpos de água doce ou salgada. Tabela 2 - valor da banda forest_type Valor Cor Descrição 0 282828 Desconhecido 1 666000 Folha de agulha perene 2 9900 Folha larga perene 3 70663E Folha decídua de agulha 4 A0DC00 Folha larga decídua 5 929900 Mistura de tipos de floresta Para organizar melhor suas camadas, agrupe-as por categoria, da seguinte maneira: para as 5 camadas raster de cobertura de terra, crie um grupo denominado Cobertura de Terra (Land Cover) (no Painel de Camadas, clique no botão Adicionar Grupo). Para o modelo de superfície digital, crie um grupo denominado JAXA [3] SRTM DEM. Não se esqueça de adicionar também o limite da área de trabalho, cidade do Rio de Janeiro, que é um conjunto de dados vetoriais. A janela do seu mapa QGIS deve ser semelhante à figura 9.6, talvez em cores ligeiramente diferentes. Conjuntos de dados raster carregados Figura 9.6 - Conjuntos de dados raster carregados 11.3.2 Etapa 2: Entenda o que você está olhando A seguir, usaremos uma série de ferramentas que nos permitirão ter uma noção melhor dos dados com os quais estamos trabalhando. Depois de carregar todos os conjuntos de dados, vamos verificar o sistema de referência de coordenadas no qual todos os nossos conjuntos de dados estão. Como sabemos dos módulos anteriores, QGIS oferece a possibilidade de reprojetar todos os conjuntos de dados carregados no projeto em tempo real, no entanto, isso pode levar ao geoprocessamento questões ao longo do caminho. Assim, mesmo que todas as camadas estejam sobrepostas corretamente, como se pode dizer pela inspeção visual, procederemos à reprojeção de todas no sistema de coordenadas mais adequado para nossa região de interesse, a cidade do Rio de Janeiro - EPSG: 31983. Existem várias formas de obter informações nas camadas carregadas no QGIS, algumas fornecendo ao usuário mais detalhes do que outras. Para obter uma visão geral rápida dos metadados de um conjunto de dados, clique duas vezes na camada e abra Propriedades &gt; Informações. Para a camada hrsl_rj_capital_populacao, a janela de informações seria semelhante à Figura 9.7. Extraindo metadados básicos de uma camada raster Figura 9.7 - Extraindo metadados básicos de uma camada raster Com relação à nossa primeira pergunta sobre o que CRS está sendo usado para o conjuntos de dados que carregamos, podemos observar que mesmo que o HRSL seja sobreposto corretamente, a projeção do conjunto de dados nativo é EPSG 4326 - WGS 84, com unidades medidas em graus. Também identificamos que esta camada raster específica possui apenas uma banda, porém o tamanho do pixel é difícil de ler, pois a medição é em graus e não em metros, o que tornaria mais fácil de entender. Assim, a primeira coisa a fazer é reprojetar todos os conjuntos de dados com os quais trabalharemos no mesmo sistema de coordenadas - EPSG 31983. Começando com os conjuntos de dados HRSL, vamos para Raster &gt; Projeções &gt; Reprojetar coordenadas (ver figura 9.8) Reprojetar funcionalidade no QGIS Figura 9.8 - Reprojetar funcionalidade no QGIS Após selecionar a funcionalidade Warp, uma nova janela aparecerá permitindo ao usuário definir os parâmetros corretos (consulte a figura 9.9 uma). Janela Warp (reprojetar) QGIS Figura 9.9a - Janela Warp (reprojetar) QGIS Se você selecionou a saída como [Salvar em arquivo temporário] então haverá uma camada raster chamada Reprojetado(a) no painel de camadas. Esta é uma camada de memória e você pode renomear esta camada para Reprojected_hrsl_rj_capital_populacao e salvá-la para torná-la persistente. HRSL reprojetado Figura 9.9b - HRSL reprojetado Você notará que, ao contrário de quando você reprojetou conjuntos de dados vetoriais, há um novo parâmetro que pode ser definido como “Método de reamostragem a ser usado”. Reamostragem representa a interpolação dos valores da célula para que ela transforme o raster conforme indicado pelo usuário. Existem vários métodos de reamostragem disponíveis na funcionalidade de reprojetar, cada um com seu próprio suporte matemático. No entanto, explicações detalhadas sobre cada um não é o escopo deste exercício. Leituras adicionais estão disponíveis em referências. Neste caso particular, queremos reprojetar os dados da população - valores numéricos e com base no método de reamostragem selecionado (vizinho mais próximo), a coordenada de cada pixel de saída será usada para calcular um novo valor a partir dos valores de pixel próximos na camada de entrada (veja a figura 9.10). Método de reamostragem - vizinho mais próximo Figura 9.10 - Método de reamostragem - vizinho mais próximo (crédito da foto: documentação ILWIS - (http://spatial-analyst.net/ILWIS/htm/ilwisapp/resample_functionality.htm) Os pixels de entrada são representados por linhas pretas tracejadas, coordenadas de pixels de entrada por pontos pretos; pixels de saída são representados por linhas sólidas vermelhas, coordenadas de pixels de saída por sinais de adição vermelhos. As setas cinza indicam como os valores de saída são determinados. Pode ser visto na figura 9.10 que alguns valores do mapa de entrada podem ser usados ​​duas vezes no mapa de saída, enquanto outros valores de entrada podem não ser usados. É por isso que, embora seja um dos métodos mais rápidos para reamostrar, não é apropriado em nosso caso, já que estamos trabalhando com dados numéricos - dados populacionais. Este método de reamostragem é adequado para dados categóricos - tais como valores de cobertura do solo. Para reprojetar nosso conjunto de dados raster de população, usaremos o método de interpolação bilinear para reamostrar os valores dos pixels (veja a figura 9.11). Método de reamostragem - bilinear Figura 9.11 - Método de reamostragem - bilinear (crédito da foto: documentação ILWIS - (http://spatial-analyst.net/ILWIS/htm/ ilwisapp/resample_functionality.htm) O método bilinear determina o novo valor de uma célula com base em uma distância média ponderada das quatro células de entrada mais próximas centros. É útil para dados contínuos e causará alguma suavização dos dados. Continuamos a verificar o CRS dos 5 conjuntos de dados de cobertura do solo (Land Cover) que carregamos em nosso projeto QGIS. Acessando Propriedades da camada &gt; informações, podemos veja que todas as 5 camadas de cobertura do solo são projetadas em EPSG: 3857 - WGS 84/Pseudo-Mercator. Uma solução seria usar a ferramenta Reproject e configurar para cada camada individualmente. No entanto, uma maneira mais rápida é usar a funcionalidade de reprojeto rodando como um processo em lote. Processamento em lote é a capacidade de executar processos repetitivos sses de dados, com interação mínima do usuário. A maioria das funcionalidades do QGIS tem esta opção disponível e pode ser ativada na janela de processo clicando no botão Executar processo em lote e alternando para a guia Executar processo em lote (consulte a figura 9.12). Guia de processamento em lote em uma janela de funcionalidade QGIS Figura 9.12 - Guia de processamento em lote em uma janela de funcionalidade QGIS Para as 5 camadas raster de cobertura terrestre, usaremos o processamento em lote e como método de reamostragem o vizinho mais próximo. Para adicionar uma nova camada, clique no pictograma +. Para preencher automaticamente os parâmetros do CRS e do método de reamostragem, clique no botão autopreencher na parte superior das colunas correspondentes e selecione Preencher. Renomeie os rasters reprojetados adicionando o código EPSG ao final do nome, por exemplo LandCover2015, que se tornará landCover2015_31983. Defina seus parâmetros como na figura 9.13: CRS de origem: EPSG: 3857, CRS de destino EPSG 31983, método de reamostragem a ser usado: vizinho mais próximo (explicamos no parágrafo acima o porquê), valor “Não definido” para bandas de saída: 255 (da janela de informações, vemos o tipo de dados - yte - inteiro sem sinal de 8 bits - o que significa que o valor máximo pode ser 255), resolução de saída: 100 m (como os rasters de cobertura do solo eram originalmente). Depois de definir todos os parâmetros, marque a caixa no canto esquerdo da janela - Carregar camadas ao concluir e clique em Executar. Processamento em lote para reprojetar os rasters de cobertura vegetal Figura 9.13a - Processamento em lote para reprojetar os rasters de cobertura do solo Nomes de saída de preenchimento automático Figura 9.13b - Nomes de saída de preenchimento automático Rasters de cobertura de terra reprojetada Figura 9.13c - Rasters de cobertura de terra reprojetada Em seguida, vêm os rasters de modelo de superfície digital . Como se pode observar, para cobrir nossa região de interesse, precisávamos de vários raster tiles. Quando os arquivos raster se tornam muito grandes - imagine um único arquivo DSM a 30 m para a Europa, que tem mais de 10 milhões de quilômetros quadrados - eles são divididos em tiles, ou blocos porque, em áreas menores, são mais facilmente gerenciáveis. Embora pudéssemos usar a ferramenta reprojetar em lote para reprojetar todos os arquivos raster DSM, em uma inspeção visual, também se pode notar que as delimitações entre cada tile são bastante visíveis, tornando-o, pelo menos, visualmente pouco atraente. O que seria útil é ter uma visão completa do terreno, como um fenômeno contínuo - como é, de fato - sem rupturas artificiais. Para isso, usaremos a ferramenta de mesclagem GDAL, disponível na barra de ferramentas de processamento, para mesclar todos os rasters DSM. Para abri-lo, vá para Processar &gt; Caixa de ferramentas e na barra de pesquisa escreva Mesclar (ou Merge) (veja a figura 9.14). Como alternativa, você pode pesquisar por Mesclar na barra do localizador. Encontrando a ferramenta de mesclagem GDAL na Caixa de Ferramentas de Processamento Figura 9.14 - Localizando a ferramenta de mesclagem GDAL na Caixa de Ferramentas de Processamento Na janela de mesclagem que é aberta, selecione os arquivos raster DSM que queremos mosaico e clique em executar. O resultado deve ser semelhante à figura 9.15c. Selecionando as camadas SRTM para mesclar Figura 9.15a - Selecionando as camadas SRTM para mesclar [Parâmetros do algoritmo de processamento de mesclagem](media/modulo9/fig915_b.png ” Parâmetros do algoritmo de processamento de mesclagem “) Figura 9.15b - Parâmetros do algoritmo de processamento de mesclagem Mosaico de todos os arquivos DSM correspondentes à nossa região de trabalho Figura 9.15c - Mosaico de todos os arquivos DSM correspondentes à nossa região de trabalho Agora, podemos proceder à reprojeção do mosaico - um arquivo, em vez de 6 arquivos. Vá para Raster &gt; Projeção &gt; Reprojetar cordenadas e defina os parâmetros conhecidos: SRC original: EPSG 4326 SRC de destino: EPSG: 31983 Método de reamostragem: Vizinho mais próximo Resolução do arquivo de saída - 30 m. Neste ponto, devemos ter todas as camadas no mesmo CRS - EPSG 31983. Reprojetar raster mesclado Figura 9.15d - Reprojetar raster mesclado Podemos fazer outra verificação para ter certeza que todos os rasters com os quais estamos trabalhando são projetados, bem como obter qualquer informação adicional sobre os dados, executando um processo em lote de informações raster sobre todos. Para abrir a janela de funcionalidade, vá para Raster &gt; Miscelânea &gt; Informações Raster. Sua janela de informações raster de processamento em lote deve ser semelhante à figura 9.16. Processo em lote para extrair informações em um arquivo HTML separado para várias camadas raster Figura 9.16 - Processo em lote para extrair informações em um arquivo HTML separado para várias camadas raster Um arquivo HTML de informações raster deve ser gerado como abaixo. Um arquivo HTML pode ser aberto com qualquer editor de texto ou navegador de sua escolha. Coordinate System is: PROJCRS[&quot;SIRGAS 2000 / UTM zone 23S&quot;, BASEGEOGCRS[&quot;SIRGAS 2000&quot;, DATUM[&quot;Sistema de Referencia Geocentrico para las AmericaS 2000&quot;, ELLIPSOID[&quot;GRS 1980&quot;,6378137,298.257222101, LENGTHUNIT[&quot;metre&quot;,1]]], PRIMEM[&quot;Greenwich&quot;,0, ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]], ID[&quot;EPSG&quot;,4674]], CONVERSION[&quot;UTM zone 23S&quot;, METHOD[&quot;Transverse Mercator&quot;, ID[&quot;EPSG&quot;,9807]], PARAMETER[&quot;Latitude of natural origin&quot;,0, ANGLEUNIT[&quot;degree&quot;,0.0174532925199433], ID[&quot;EPSG&quot;,8801]], PARAMETER[&quot;Longitude of natural origin&quot;,-45, ANGLEUNIT[&quot;degree&quot;,0.0174532925199433], ID[&quot;EPSG&quot;,8802]], PARAMETER[&quot;Scale factor at natural origin&quot;,0.9996, SCALEUNIT[&quot;unity&quot;,1], ID[&quot;EPSG&quot;,8805]], PARAMETER[&quot;False easting&quot;,500000, LENGTHUNIT[&quot;metre&quot;,1], ID[&quot;EPSG&quot;,8806]], PARAMETER[&quot;False northing&quot;,10000000, LENGTHUNIT[&quot;metre&quot;,1], ID[&quot;EPSG&quot;,8807]]], CS[Cartesian,2], AXIS[&quot;(E)&quot;,east, ORDER[1], LENGTHUNIT[&quot;metre&quot;,1]], AXIS[&quot;(N)&quot;,north, ORDER[2], LENGTHUNIT[&quot;metre&quot;,1]], USAGE[ SCOPE[&quot;unknown&quot;], AREA[&quot;Brazil - 48°W to 42°W&quot;], BBOX[-33.5,-48,5.13,-42]], ID[&quot;EPSG&quot;,31983]] Data axis to CRS axis mapping: 1,2 Origin = (623321.945999999996275,7484067.546099999919534) Pixel Size = (28.935326500201374,-28.935326524390469) Metadata: AREA_OR_POINT=Area Image Structure Metadata: INTERLEAVE=BAND Corner Coordinates: Upper Left ( 623321.946, 7484067.546) ( 43d47&#39;56.18&quot;W, 22d44&#39;46.58&quot;S) Lower Left ( 623321.946, 7446104.398) ( 43d47&#39;45.28&quot;W, 23d 5&#39;20.90&quot;S) Upper Right ( 695168.362, 7484067.546) ( 43d 5&#39;58.02&quot;W, 22d44&#39;22.13&quot;S) Lower Right ( 695168.362, 7446104.398) ( 43d 5&#39;40.79&quot;W, 23d 4&#39;56.04&quot;S) Center ( 659245.154, 7465085.972) ( 43d26&#39;49.98&quot;W, 22d54&#39;52.81&quot;S) Band 1 Block=2483x1 Type=Float64, ColorInterp=Gray NoData Value=nan Depois de preparar as miras por reprojetar-los nos CRS somos trabalhando e lendo seus metadados para entender melhor os arquivos, é hora de mergulhar nos dados reais. Para isso, calcularemos e interpretaremos os histogramas (consulte a seção Divisão de conceitos para obter detalhes) de nossos rasters. Para calcular um histograma, selecione a camada raster que você está interessado, abra clicando duas vezes na janela de diálogo Propriedades e vá paraHistograma (veja a figura 9.17). Janela de histograma Figura 9.17 - Janela de histograma Pressione o botão Calcular histograma e a pena QIS o computará automaticamente. Depois de calcular o histograma, podemos ver que o mouse se transforma em uma lupa. É uma ferramenta que permite a inspeção do histograma, vendo como a frequência varia de diferentes valores. Ampliando e você pode ver algo como na figura 9.18. Para voltar à visualização completa, clique à esquerda. Ampliando o histograma computado DSM_mosaic_31983 Figura 9.18 - Ampliando o histograma computado DSM_mosaic_31983 Mais do que apenas ver a distribuição dos valores numéricos dos pixels, o histograma permite ao usuário reclassificar os valores para visualização do raster. Para fazer isso, use as 2 ferramentas para apontar no histograma os novos valores mínimo e máximo (consulte a figura 9.19). Selecionando os valores mínimo e máximo para reclassificar o raster Figura 9.19 - Selecionando os valores mínimo e máximo para reclassificar o raster Após pressionar aplicar, o raster será representado usando o novo intervalo mínimo-máximo selecionado. Esta funcionalidade permite ao usuário ignorar valores extremos que podem esticar ab-normalmente o raster. Mesmo que a próxima ferramenta que usaremos seja um plugin (veja o módulo 1 para detalhes do plugin), nós o consideramos muito útil para começar a trabalhar com raster. Estamos nos referindo ao plug-in Value Tool que permite a identificação imediata dos valores das células passando o mouse sobre as camadas raster. Vá para Plug-in &gt; Gerenciar e instalar complementos, procure o plug-in Value Tool e clique em instalar. Depois, clique com o botão direito na barra da janela principal do QGIS para abrir todos os Painéis e Barras de Ferramentas disponíveis em sua instalação do QGIS e selecione o Value Tool Panel. Verifique sua interface QGIS para ver onde foi aberta. The Value Tool Panel Figura 9.20 - O Value Tool Panel A praticidade desta ferramenta reside na sua simplicidade de uso, com apenas alguns cliques, pode-se facilmente extrair células de valor nas áreas exatas de interesse. Além disso, permite isso para todas as camadas raster carregadas. A Ferramenta de Valor possui 3 guias: Tabela, Gráfico, Opções (veja a figura 9.21). Ferramenta de valor carregado - destaque na primeira guia - Tabela Figura 9.21 - Ferramenta de valor carregado - destaque na primeira guia - Tabela A primeira guia - Tabela - apresenta uma lista de todas as camadas raster carregadas e os valores das células, conforme o usuário move o mouse. Também existe a possibilidade de selecionar com quantas casas decimais os valores devem ser exibidos. Se o mouse for passado fora de uma extensão da camada raster, ao invés de um valor, uma mensagem será exibida: “fora da extensão”. A segunda guia - Gráfico - exibe em um gráfico unido todos os valores que lê na posição do mouse. Ele permite que o usuário insira valores para mínimo e máximo no eixo Y - que é o eixo dos valores da célula. O eixo X lista todas as bandas do raster que exibe na tabela, com os números de ordem correspondentes: a banda que tem o número 1 na primeira guia, também será a número 1 no gráfico. A terceira aba permite ao usuário customizar o que a Value Tool exibe: quais camadas (todas, apenas as visíveis ou as selecionadas) e quais bandas mostrar. 11.3.3 Quiz As camadas raster podem ser reprojetadas em outros sistemas de coordenadas? Sim. Não Pode haver alguma lacuna entre os intervalos de valores de um histograma calculado para uma camada raster? Sim. Não. Bandas diferentes do mesmo conjunto de dados raster podem ter resoluções diferentes? Sim. Não. 11.4 Introdução ao trabalho com dados raster Agora que aprendemos como extrair informações básicas nos conjuntos de dados raster carregados, continuaremos com um processamento de dados raster mais aprofundado em a fim de obter novos rasters derivados e, em conseqüência, mais informações. Como você deve ter notado, devido à estrutura do modelo de dados raster, as camadas que carregamos estão se expandindo em nossa região de interesse - a cidade do Rio de Janeiro. Isso é indesejável por vários motivos, mas principalmente porque você acaba processando mais dados do que realmente precisa, o que se traduz em maiores necessidades de armazenamento e processamento do computador. É por isso que, antes de seguirmos para qualquer outra etapa, teremos certeza de que processaremos exatamente a quantidade de dados de que precisamos. Esteja ciente ao começar a trabalhar em seus próprios conjuntos de dados, que o tamanho dos arquivos é um fator importante quando se trata de tempos de processamento. Quanto maiores os arquivos, mais tempo será necessário. Por causa da estrutura de dados do modelo - raster vs vetor - os arquivos raster são geralmente muito maiores. Como você notou agora, os conjuntos de dados que carregamos em um GIS - em nosso caso em QGIS - podem ser processados ​​juntos mesmo se forem de natureza diferente, como unir tabelas csv a camadas vetoriais para adicionar informações às geometrias. O mesmo se aplica a dados raster e vetoriais, como veremos. Para trabalhar apenas com camadas raster que são relevantes para nossa área, usaremos a camada de extensão vetorial (br_rj_capital) para cortar/recortar todas as camadas raster relevantes. Vá para Raster &gt; Extrair &gt; Recortar raster pela camada de máscada (veja a figura 9.22). Da mesma forma, você pode pesquisar por Clipe na Barra de Ferramentas de Processamento ou na barra Localizador. Usando uma máscara vetorial para extrair os dados raster em uma região específica Figura 9.22 - Usando uma máscara vetorial para extrair os dados raster em uma região específica Visto que trabalharemos com 7 camadas raster - as 5 camadas de cobertura do solo - o modelo de superfície digital e o HRSLl, usaremos o processamento em lote para cortar todas as camadas de uma vez. Esteja ciente, se você pulou a etapa de reprojeção, você tem camadas em diferentes projeções e o algoritmo não funcionará ou produzirá resultados inesperados. A configuração da janela de processamento em lote deve ser semelhante à figura 9.23. Processo em lote recortando todas as camadas raster necessárias pela geometria da cidade do Rio de Janeiro Figura 9.23 - Processo em lote recortando todas as camadas raster necessárias pela geometria da cidade do Rio de Janeiro Os parâmetros as configurações são as seguintes: * camada de máscara: br_rj_capital * CRS de origem e destino é EPSG 31983 * selecione sim para: Igualar a Extensão da imagem recortada com a Extensão da camada de máscara e Manter a resolução do raster de entrada. * Para o DSM também selecionaremos Sim para criar uma banda alfa de saída. Carregue as camadas na conclusão. Se tudo correu bem, a janela principal do QGIS deve ser semelhante à figura 9.24. Camadas raster cortadas pelo contorno da cidade do Rio de Janeiro Figura 9.24 - Camadas raster cortadas pelo contorno da cidade do Rio de Janeiro. Agora, imagine que você tenha que apresentar um relatório sobre onde a maioria das pessoas está morando, mas levando em consideração a altitude [4]. Você deve saber quantas pessoas vivem entre 0 e 200 m de altitude na cidade do Rio de Janeiro. Existem alguns elementos a serem considerados. Em primeiro lugar, quais são os dados que iremos utilizar e quais são as suas características. Para população, temos os dados da camada HRSL e, para relevo, temos o ALOS World 3D - 30m (AW3D30). Ambas as camadas raster possuem resolução espacial de 30m, o que nos permite prosseguir com outras considerações. O relevo é um fenômeno contínuo, a distribuição da população não, mas o relatório não faria sentido sendo feito pelo pixel de 30m. Precisamos identificar todos os pixels com valores de célula de 0 a 200. Considerando o histograma de DSM para nossa região de interesse, vimos que a maioria dos valores de célula está entre 0 e 200m. Podemos proceder à confecção de um mapa de relevo básico com base nas seguintes divisões: 0 - 50m 51 - 100m 101 - 150m 151 - 200m 250 - 600m 600 - 1300m Utilizando os seus conhecimentos adquiridos em módulo 4, você pode definir o estilo da camada DSM (Clipped_Reprojected_SRTM_DEM) por meio dessas categorias. Seu mapa deve ser semelhante à figura 9.25. Representação Clipped_Reprojected_SRTM_DEM Figura 9.25 - Representação Clipped_Reprojected_SRTM_DEM Para calcular o número de pessoas com base nos dados raster HRSL que vivem até 200 metros de altitude na cidade do Rio de Janeiro, devemos ver quais pixels se enquadram em cada uma dessas categorias. Para fazer isso, usaremos a Calculadora Raster. Esta é uma funcionalidade que permite ao usuário realizar cálculos com base nos valores de pixel raster existentes. Os resultados são gravados em uma nova camada raster em um formato compatível com GDAL[5]. Existem várias maneiras de abrir o calclulator raster no QGIS. Você pode fazer isso na barra de menus Raster &gt; Raster Calculadora ou pesquisando na calculadora raster na caixa de ferramentas de processamento ou na barra localizadora. Se executarmos a Calculadora Raster sob análise Raster na Caixa de Ferramentas de Processamento, a janela da Figura 9.26b deve aparecer. Abrindo a calculadora raster Figura 9.26a - Abrindo a calculadora raster Calculadora raster Figura 9.26b - Calculadora raster Nesta janela, podemos reconhecer as operações detalhadas na seção Conceitos, subtrações, adições, comparações e todas as outras (ver página 3). Clipped_Reprojected_SRTM_DEM @ 1 A convenção de nomenclatura para os rasters pode ser observada: o que vem antes do @ é o nome da camada raster, o que vem depois do @ é o número da banda. A seguir, iremos ‘fatiar’ nossa camada raster Clipped_Reprojected_SRTM_DEM para extrair apenas os pixels com valores de até 200 metros. Sabemos que as células de valor do DSM-mosaic_clipped representam dados numéricos contínuos (não valores discretos, como LandCover). Portanto, a operação que precisamos empregar neste caso é uma comparação de valores de uma célula &lt;= 200 metros. Para obter isso, escreveremos a seguinte calculadora raster: &quot;Clipped_Reprojected_SRTM_DEM@1&quot; &lt;= 200 Defina a Camada de referência como ** Clipped_Reprojected_SRTM_DEM @ 1**. Sua calculadora raster deve ser semelhante à figura 9.27. Inserindo uma fórmula na Calculadora Raster Figura 9.27 - Inserindo uma fórmula na Calculadora Raster. Seu resultado deve ser semelhante à figura 9.28. Resultado da identificação de todos os valores de pixel que estão abaixo de 200 metros usando a Calculadora de Raster Figura 9.28 - Resultado de identificar todos os pixels valores abaixo de 200 metros usando a calculadora raster O resultado será denominado Output. Você pode renomear isso para &lt;200. Como podemos ver no painel de camadas, a camada raster que obtivemos tem apenas 2 valores 0 e 1. Isso porque usamos uma operação racional, uma comparação, portanto cada pixel que está abaixo de 200 metros recebeu valor = 1 e todos acima, valor = 0. Podemos testar isso usando a Ferramenta de valor. A Figura 9.29 apresenta apenas pixels de valor 1, ou seja, os pixels que nos interessam para o nosso exercício. Distribuição espacial de todos os pixels de valor 1, ou seja, com altitude inferior a 200 metros Figura 9.29 - Distribuição espacial de todos os pixels de valor 1, ou seja, com altitude inferior a 200 metros Indo além, podemos mostrar a distribuição espacial da população na resolução espacial de 30 m apenas nesta região geográfica específica que selecionamos - cidade do Rio de Janeiro, abaixo de 200m. Para fazer isso, utilizamos novamente a Calculadora Raster. A fórmula é bastante simples, dado que todos os valores de células DSM que estamos interessados ​​têm valor 1. Abra a Calculadora e insira a seguinte fórmula: &quot;&lt; 200 @ 1&quot; * &quot;Reprojected_hrsl_rj_capital_populacao@1&quot; Usando calculadora raster para identificar classes de distribuição populacional com base na altitude de até 200m Figura 9.30 - Usando calculadora raster para identificar classes de distribuição populacional com base na altitude de até 200m. Ao contrário do uso anterior da calculadora raster, usamos 2 conjuntos de dados raster diferentes para obter o resultado desejado, mas você observará que mesmo que haja pixels fora de Reprojected_hrsl_rj_capital_populacao_200m.tif no resultado, o valor é 0. Use a ferramenta Value para verificar (consulte a figura 9.31). Usando a Ferramenta de Valor para verificar os resultados da Calculadora de Raster Figura 9.31 - Usando a Ferramenta de Valor para verificar os resultados da Calculadora de Raster Você pode ver que mesmo se Reprojected_hrsl_rj_capital_populacao tiver valores nesta localização específica do mouse, o raster obtido com Raster Calculator HRSL_DSM tem valor 0. A seguir, apresentamos a distribuição espacial da população que vive abaixo de 200m na ​​cidade do Rio de Janeiro. Para escolher uma classificação apropriada, calculamos o histograma. Podemos notar que a maioria dos valores está entre 0,1 e 100 pessoas por 30m. A classificação que escolhemos é visível na figura 9.32. Distribuição da população que vive abaixo de 200m na ​​cidade do Rio de Janeiro, representada em uma resolução de 30m Figura 9.32 - Distribuição da população que vive abaixo de 200m na ​​cidade do Rio de Janeiro, representado com uma resolução de 30m. Se estivermos interessados ​​no número total de pessoas que vivem abaixo de 200m na ​​cidade do Rio de Janeiro e não na distribuição geográfica por 30 m de resolução espacial, então precisamos somar todos os valores de pixel da camada raster HRSL_DSM. Uma forma de obter este número é transformar o Reprojected_hrsl_rj_capital_populacao_200m de raster para vetor. Para fazer isso vá para Raster &gt; Conversão &gt; Raster para vetor (poligonizar) (ver figura 9.33). Conversão de raster em vetor Figura 9.33a - Conversão de varredura em vetor Lembre-se de que esta camada raster tinha apenas 2 valores - 0 e 1, então escolha como parâmetro para construir o vetor o DN (número digital). Parâmetros de conversão de varredura em vetor Figura 9.33b - Parâmetros de conversão de varredura em vetor Seu resultado deve ser semelhante à figura 9.34. Resultado da conversão de um conjunto de dados raster em um conjunto de dados vetorial Figura 9.34 - Resultado da conversão de um conjunto de dados raster em um conjunto de dados vetorial. Exclua a geometria do valor 0. Para encontrar nossa resposta, usaremos Estatísticas Zonais. Para encontrar rapidamente esta funcionalidade, abra a Caixa de Ferramentas de Processamento e digite na caixa de pesquisa “zonal” (veja a figura 9.35). Identificando Estatísticas Zonais na Caixa de Ferramentas de Processamento Figura 9.35 - Identificando Estatísticas Zonais na Caixa de Ferramentas de Processamento Na janela que foi aberta, selecione os parâmetros como na figura 9.36 . Como estatísticas calculadas, selecione: contagem, soma, mínimo e máximo. Definindo os parâmetros para Estatísticas Zonais Figura 9.36 - Definindo os parâmetros para Estatísticas Zonais A camada resultante é uma camada vetorial que tem como atributos as estatísticas que selecionamos (veja a figura 9.37). Camada vetorial resultante das estatísticas zonais Figura 9.37 - Camada vetorial resultante das estatísticas zonais E com esta etapa final, respondemos ao nosso exercício, quantas pessoas (e onde) vivem abaixo de 200 m na cidade do Rio de Janeiro. 11.4.1 Quiz Os dados rasterizados podem ser recortados? Sim Não. Pode-se usar conjuntos de dados vetoriais carregados no projeto QGIS na Calculadora Raster? Sim. Não. Os conjuntos de dados raster podem ser convertidos em conjuntos de dados vetoriais? Sim Não. 11.5 Trabalho com dados raster e vetoriais Na fase anterior, temos visto como podemos processar 2 conjuntos de dados raster para derivar novas informações. Usamos o modelo de superfície digital e a Camada de Assentamento de Alta Resolução para descobrir quantas pessoas vivem abaixo de 200m na ​​cidade do Rio de Janeiro. Antes de fazer qualquer análise, verificamos se os conjuntos de dados estavam na mesma projeção e, além disso, se os rasters têm a mesma resolução espacial para que os resultados que obtivemos sejam viáveis. Ao se referir ao sistema de referência de coordenadas, o raciocínio é claro, mas por que a mesma resolução espacial? Lembrando a resolução espacial, é o tamanho da superfície do solo medido em unidades de comprimento, ou seja, o tamanho do pixel medido no solo. Se um raster tem uma resolução de 30m, isso significa que o menor objeto linear que conseguimos detectar naquela imagem é de 30m, qualquer menor e não conseguimos detectá-lo. Continuando a analogia, podemos compará-la com a escala de um mapa. Se um mapa tem uma escala de 1: 25.000, significa que 1 unidade de comprimento no mapa representa 25.000 unidades no solo, ou seja, 1 cm é 25.000 cm, 1 cm no mapa equivale a 250 m no solo. Por exemplo, uma estrada de 2 km teria 8 cm no mapa. Por que isso é importante ao trabalhar com conjuntos de dados raster? A Figura 9.38 pode oferecer uma explicação. Exemplo de diferentes resoluções específicas para diferentes imagens de satélite - Landsat e SPOT - para a mesma área Figura 9.38 - Exemplo de diferentes resoluções específicas para diferentes imagens de satélite - Landsat e SPOT - para a mesma área (Crédito da foto: Congedo, L. e Munafò, M, (2013) Avaliação da Mudança da Cobertura do Solo Usando Sensoriamento Remoto: Objetivos, Métodos e Resultados, Roma: Sapienza University. Disponível em: http://www.planning4adaptation.eu/) A Figura 9.38 detalha a relação entre a resolução das imagens de satélite e informações de cobertura do solo extraídas dessas imagens capturadas. Lembre-se, conforme detalhamos no início, que o valor da célula de pixel é atribuído a toda a área que cobre, mas isso não significa que essa seja a realidade no terreno. Estas representam decisões tomadas pelos especialistas que derivam vários produtos com base em imagens de observação da Terra - todos documentados em artigos revisados ​​por pares e descrições de algoritmos. Outras explicações estão além do escopo deste módulo, mas é importante ter em mente a relação entre o que um sensor a bordo de um satélite captura e os produtos que usamos. Voltando à nossa região de interesse - a cidade do Rio de Janeiro - podemos testar essas diferenças com os dados de que dispomos. Carregamos em nosso projeto QGIS as 5 camadas raster de LandCover por 5 anos: 2015, 2016, 2017, 2018 e 2019. Em seguida, carregaremos um mosaico de imagens do Sentinel-2[6]. Vamos carregar a camada WMS EOX Sentinel-2 sem nuvem, disponível aqui. Lembrando do módulo 2, para adicionar uma camada WMS, vá para Camada &gt; Adicionar camada &gt; Adicionar camada WM/WMTS .. Quando a janela adicionar abrir, use os seguintes parâmetros: Nome: EOX Sentinel-2 URL : https://tiles.maps.eox.at/wms?service=wms&amp;request=getcapabilities Caixa para adicionar uma camada WMS ao QGIS Figura 9.39 - Adicionando uma camada WMS ao QGIS Após conectar-se com recém-adicionada a camada WMS, carregaremos a camada chamada Sentinel-2 cloudless layer for 2019 by EOX - 4326 no QGIS. Depois de ampliar para a extensão da região de interesse, a janela do seu mapa deve ser semelhante à figura 9.40. Camada sem nuvens Sentinel-2 para 2019 por EOX - 4326 para a cidade do Rio de Janeiro Figura 9.40 - Camada sem nuvens Sentinel-2 para 2019 por EOX - 4326 para a cidade do Rio de Janeiro Embora os produtos LandCover tenham sido obtidos usando outros dados de satélite (Proba-V), vamos comparar as 2 camadas para que possamos ter uma noção do que significam as diferentes resoluções. Lembre-se de que o produto LandCover está a 100m e as imagens do Sentinel 2 estão a 10m. Para isso, abriremos o Clipped_Reprojected_LandCover 2019 e a camada WMS. Para fazer comparações entre 2 camadas, usaremos um novo plugin que você deve instalar. Portanto, vá para Complementos &gt; gerenciar e instalar complementos e escreva na caixa de pesquisa MapSwipe Tool. Depois de instalado, ele deve aparecer como um novo pictograma em sua barra de ferramentas (). Comparando 2 camadas raster usando o plugin da ferramenta MapSwipe Figura 9.41 - Comparando 2 camadas raster usando o plugin da ferramenta MapSwipe Para ativar a ferramenta MapSwipe, clique nela enquanto a camada raster que você deseja comparar é selecionada no painel Camadas. As diferenças de resolução são óbvias, assim como o fato de o produto de satélite (Land Cover) ter sido desenvolvido a partir de uma imagem de satélite (PROBA-V) de resolução mais grosseira. No entanto, as classes gerais maiores são bem identificadas, como pode ser visto na figura 9.42. LandCover2019 obtido do PROBA-V (100m) no topo do mosaico Sentinel 2 (30m) Figura 9.42 - LandCover2019 obtido do PROBA-V (100m) no topo do mosaico Sentinel 2 (30m) Adicionando o HRSL ao mapa, mostrará uma boa correspondência entre HRSL e o LandCover. O espaço urbano está representado em vermelho e, como você pode ver na figura 9.43, está quase totalmente coberto pela camada HRSL. HRSL adicionado no topo do Clipped_Reprojected_LandCover 2019 Figura 9.43 - HRSL adicionado no topo do Clipped_Reprojected_LandCover 2019. No entanto, ampliando você pode ver a diferença na resolução entre os 2 produtos raster, como na figura 9.44. Diferença na resolução espacial entre HRSL (30m - rosa) e Clipped_Reprojected_LandCover 2019 (100m - cores vermelho e magenta) Figura 9.44 - Diferença na resolução espacial entre HRSL (30m - rosa) e Clipped_Reprojected_LandCover 2019 (100m - cores vermelho e magenta) Agora, se alguma análise seria feita usando estes rasters, esses resultados não seriam viáveis, porque estaríamos comparando valores que se aplicam a diferentes resoluções. Como uma fase de pré-processamento, o usuário deve resample um dos 2 para corresponder. Reamostragem refere-se à alteração dos valores das células devido a mudanças na grade de células raster e há apenas 2 opções: (1) aumento da resolução (upsampling) refere-se aos casos em que estamos convertendo para uma resolução maior/células menores e (2) redução da resolução (downsampling) é reamostragem para resolução inferior/tamanhos de células maiores. Vamos imaginar o seguinte exercício. Precisamos identificar os números da população para cada categoria de cobertura do solo que definimos na cidade do Rio de Janeiro. Como explicado acima, precisamos processar os dados que temos para obter resultados viáveis ​​de nossa análise, ou seja, em nosso caso, precisamos trazer ambos os nossos conjuntos de dados raster para a mesma resolução espacial. Conforme detalhado acima, podemos aumentar ou diminuir as dimensões dos pixels. Deve-se destacar que a reamostragem, com aumento ou redução da escala, envolverá um processo de interpolação (ver página 12 para mais detalhes) - portanto, o resultado introduz um erro estatístico. A prática usual é reamostrar todos os rasters para corresponder ao raster com a resolução mais baixa, mas novamente esta decisão deve ser tomada levando em consideração todos os fatores envolvidos. Detalhar o processo de tomada de decisão para reamostrar camadas raster excede em muito o escopo deste currículo. Uma diferença entre os 2 produtos deve ser destacada: o produto LandCover cobre a área inteira da extensão considerada, ao contrário do produto HSRL, onde a camada raster contém estritamente células onde existem valores acima de 0. Esta situação cria problemas quando os valores das células de interpolação são reamostrados, pois não importa o método de interpolação escolhido, que levaria em consideração os pixels circundantes, seguindo um algoritmo específico bem definido e nesta situação particular, os pixels da borda não estão na borda de região de estudo, mas dentro dela. Portanto, em nosso caso demonstrativo, consideraremos aumentar a resolução do produto Land Cover de 100m para 30m de resolução para corresponder à resolução do produto Land Cover. O método de reamostragem que escolhemos é crucial, pois os resultados podem variar significativamente. Para fins de demonstração, faremos uma nova amostra do produto LandCover usando 2 métodos diferentes - Vizinho mais próximo e Moda. Para reamostrar, vá para Raster &gt; Projeções &gt; Reprojetar coordenadas. Na janela, defina os seguintes parâmetros: camada de entrada: Clipped_Reprojected_LandCover_2019, CRS de origem e CRS de destino: EPSG: 31983, Método de reamostragem: Vizinho mais próximo, Sem dados: 255, resolução do arquivo de saída: 30, Tipo de dados de saída: use o tipo de dados da camada de entrada, extensão georreferênciadas de arquivo de saída a ser criado: selecione a camada Clipped_Reprojected_LandCover_2019. Salve a camada de saída como LC2019_NearestNeighbour. Reamostrando a camada de cobertura do solo Figura 9.45 - Reamostrando a camada de cobertura do solo Siga as etapas exatas, exceto que para o parâmetro do método de reamostragem escolha Moda. Salve a camada de saída como LC2019_Mode. Agora, vamos comparar os resultados - veja as figuras 9.45 e 9.46. Reamostragem do produto de cobertura do solo usando o método de reamostragem do Vizinho mais próximo Figura 9.46a - Reamostragem do produto de cobertura do solo usando o método de reamostragem do Vizinho mais próximo Reamostragem do produto de cobertura do solo usando o método de reamostragem de modo Figura 9.46b - Reamostragem do produto de cobertura do solo usando o método de reamostragem de modo Ambos os rasters têm a mesma simbologia aplicada e podemos observar que na figura 9.45 existem valores que não se enquadram em nenhuma das categorias - os pixels não estão aparecendo. No entanto, sabemos que o produto Land Cover é uma camada contínua - não tem lacunas entre as mesmas categorias definidas. Vamos ir mais fundo e examinar os histogramas de todas as três camadas. Para isso vá para Propriedades &gt; Histograma e escolha Prefs/Ações para mostrar apenas a Banda 1. Salve o histograma clicando no ícone salvar no lado direito da janela (ver figura 9.47). Mostrar valores apenas para uma banda selecionada no histograma Figura 9.47 - Mostrar valores apenas para uma banda selecionada no histograma. As Figuras 9.48 (a), (b) e (c) apresentam os 3 histogramas de interesse. Histogramas de Clipped_Reprojected_LandCover LC2019_NearestNeighbour LC2019_Mode Figura 9.48 - Histogramas de Clipped_Reprojected_LandCover 2019 (100m), LC2019_NearestNeighbour e LC2019_Mode, respectivamente Podemos observar as diferenças na distribuição de valores para os 3 conjuntos de dados, ênfase em (b), onde usamos o método de reamostragem do vizinho mais próximo, resultando - como esperado - em valores de pixel calculados e, portanto, resultando em valores que não correspondem a nenhum valor no produto Land Cover (consulte a tabela 1, página 7). Conseqüentemente, os espaços em branco - pixels sem cor atribuída na figura 9.45. Conforme inferido, o método de reamostragem de modo - ou método de reamostragem majoritária - seleciona o valor que aparece com mais freqüência. Neste ponto, suas janelas de mapa devem ser semelhantes à figura 9.49. Os 2 produtos raster: Land Cover 2019 e HRSL sobrepostos Figura 9.49 - Os 2 produtos raster: Land Cover 2019 e HRSL sobrepostos. Voltando ao nosso exercício, os requisitos eram identificar os números da população para cada categoria de cobertura do solo que definimos na cidade do Rio de Janeiro. Neste ponto, pré-processamos nossos dados raster, de forma a tê-los no mesmo sistema de coordenadas, com a mesma resolução espacial. Continuaremos com um algoritmo de conversão, transformaremos o conjunto de dados raster Land Cover em um conjunto de dados vetoriais - tipo polígono. Isso nos permitirá identificar mais facilmente a contagem da população para cada categoria de cobertura do solo. Para conversões, de raster para polígono, bem como de vetor para polígono, vá em Raster &gt; Conversão e aqui temos mais opções. Vamos escolher Raster &gt; Conversão &gt; Raster para vetor (poligonizar) Vamos converter para vector o último conjunto de dados raster que obtivemos: LC2019_Mode. Seu resultado deve ser semelhante à figura 9.50b. Poligonizando a camada raster LC2019_Mode (30m) Figura 9.50a - Poligonizando a camada raster LC2019_Mode (30m) Resultado da poligonização do LC2019_Mode ( 30m) camada raster Figura 9.50b - Resultado da poligonização do LC2019_Mode ( 30m) camada raster Como podemos observar, cada pixel - cada grupo de pixels adjacentes com o mesmo código de categoria (ver tabela 1, página 7) foi convertido em um polígono. No entanto, não estamos interessados ​​em cada região distinta, mas em toda a categoria. Assim, iremos dissolver a camada vetorial obtida usando a identificação de classe (campo DN) como atributo comum (Vetor &gt; Geoprocessamento &gt; Dissolver - para mais detalhes, verifique o módulo 8). Anexando o mesmo estilo do raster e notaremos que as mesmas classes vetoriais correspondem às raster (ver figura 9.51). LC2019_Mode polygonez Figura 9.51 - LC2019_Mode polygonez Como podemos observar, os pixels do HRSL não estão, como esperado, perfeitamente contidos em um polígono do produto de cobertura do solo (ver figura 9.52). Incompatibilidade de pixels HRSL e o conjunto de dados vetoriais de cobertura do solo Figura 9.52 - Incompatibilidade de pixels HRSL e o conjunto de dados vetoriais de cobertura do solo Para eliminar este inconveniente, vamos vetorizar a camada HRSL também, só que desta vez iremos transferir o pixel valor da célula a um ponto - o centro geométrico de cada pixel. Vá para Processar &gt; Caixa de ferramentas. Na barra de pesquisa, escreva as palavras-chave raster ponto e escolha o algoritmo Pixels de raster para pontos (veja a figura 9.53a). Salve a saída como HRSL_points. Pixels raster para pontos Figura 9.53a - Pixels raster para pontos Execução do algoritmo de pixels raster para pontos Figura 9.53b - Execução do algoritmo de pixels raster para pontos Considerando a extensão de sua área de estudo, esta operação pode ser significativamente demorada. A Figura 9.54 mostra quantos pontos obtivemos para a cidade do Rio de Janeiro. Dados vetoriais do ponto de carregamento obtidos Figura 9.54 - Dados vetoriais do ponto de carregamento obtidos O número de pontos é consideravelmente alto e sem importá-los para um banco de dados, qualquer tipo de processamento ou visualização exigiria muito tempo. Nesses tipos de situações, a solução razoável é dividir os conjuntos de dados que temos que processar em blocos gerenciáveis. Portanto, consideraremos o processamento dos cálculos necessários em áreas menores e bem definidas. Para dividir a camada HRSL, usaremos a opção de criar um VRT. Selecione a camada HRSL e escolha Exportar como .. Na nova janela, marque a opção Criar VRT e defina os seguintes parâmetros: navegue até uma pasta para onde o raster dividido será exportado, CRS: EPSG: 31983, blocos VRT: colunas máximas 1000, linhas máximas: 1000 (consulte a figura 9.55). Criando um arquivo VRT com tiles raster específicos Figura 9.55 - Criando um arquivo VRT com tiles raster específicos Depois de exportar, carregue todos os tiles raster em seu projeto QGIS. O resultado deve ser semelhante à figura 9.56. Ladrilhos raster para o HRSL da cidade do Rio de Janeiro Figura 9.56 - Ladrilhos raster para o HRSL da cidade do Rio de Janeiro A seguir, iremos executar novamente o algoritmo Pixels de raster para pontos para cada um dos tiles raster. Como temos vários tiles, usaremos a função de processamento em lote (consulte a figura 9.57). Rodando raster para pontos para todos os tiles raster Figura 9.57 - Rodando raster para pontos para todos os tiles raster Os pontos vetoriais resultantes devem se parecer com a figura 9.58. Conjunto de dados vetoriais de pontos para a camada HRSL com valores de pixel armazenados na coluna VALUE Figura 9.58 - Conjunto de dados vetoriais de pontos para a camada HRSL com valores de pixel armazenados na coluna VALUE Olhando mais de perto os resultados do algoritmo, podemos ver que os pontos vetoriais caiam exatamente no centro do pixel de onde extraem o valor (veja a figura 9.59.). Verificando os valores dos dados de vetor de ponto vs. valores de pixel raster Figura 9.59 - Verificando os valores dos dados de vetor de ponto vs. valores de pixel raster Para resolver o exercício, deve-se calcular a soma dos valores dos pontos extraídos do produto HRSL que se enquadram em cada polígono do produto de cobertura do solo. Para fazer isso, usaremos uma função que está disponível na Calculadora de campo - aggregate(). Esta função é bastante poderosa, pois faz junções espaciais instantaneamente, permitindo vários cálculos. No nosso caso, a função deve identificar os pontos que caem em cada polígono e, em seguida, somar os valores desses pontos. Para fazer isso, vá para a tabela de atributos do conjunto de dados vetoriais LC2019_Mode_vetorizado e abra a calculadora de campo. Criando um novo campo, introduza a seguinte expressão: aggregate( layer:=&#39;hsrl_points_1&#39;, aggregate:=&#39;sum&#39;, expression:=VALUE, filter:=intersects($geometry, geometry (@parent)) ) Onde, layer é o nome do conjunto de dados do qual queremos extrair informações (em nosso caso, o conjunto de dados de ponto que contém os valores de pixel da camada raster HRSL), aggregate indica a ação a ser executada uma vez que a junção espacial é confirmada (soma, contagem, média, mediana, concatenar etc.), expression indica qual coluna queremos para extrair dados, filter a função de geometria (interseção, dentro, etc.) (consulte a figura 9.60). Usando funções integradas com calculadora de campo Figura 9.60 - Usando funções integradas com calculadora de campo Os resultados são, como esperado, salvos na tabela de atributos do LC2019_Mode. E assim, o exercício foi concluído. Por favor, esteja ciente! Esta última etapa pode ser excessivamente longa dependendo do volume de seus dados! Teste para encontrar suas melhores dimensões de tile. Se o uso da Calculadora de campo e a função de agregação não funcionar, também podemos usar o algoritmo Unir atributos por localização (resumo) para calcular a soma dos valores dos pontos dentro dos recursos LC2019_Mode_vetorizado. Usando funções integradas com calculadora de campo Figura 9.61 - Parâmetros do algoritmo de associação de atributos por localização (resumo) Saída dos atributos de Join por algoritmo de localização (resumo) Figura 9.62 - Saída dos atributos de Join por algoritmo de localização (resumo) Nesta terceira fase do nosso módulo 9, trabalhamos com dados raster e também com dados vetoriais. Vimos mais de perto o que significa reamostragem e quais são as implicações das características dos rasters, como sistema de referência de coordenadas, resolução espacial etc. Na maioria das vezes, deve-se trabalhar com conjuntos de dados raster e vetoriais e, portanto, é importante saber que é possível de várias maneiras. Também testamos várias conversões, de raster para vetor e vice-versa. No entanto, em nosso processamento não devemos perder de vista os fenômenos que estamos estudando, bem como a escala inicial em que os dados foram coletados, seja vetorial ou raster. Ao realizar conversões, é importante saber a correspondência entre a escala do mapa e a resolução do raster. Segundo o cartógrafo Waldo Tobler “a regra é dividir o denominador da escala do mapa por 1000 para obter o tamanho detectável em metros. A resolução é metade desse valor.” Em outras palavras, a fórmula seria: escala do mapa = resolução do raster (em m) X 2 X 1000. As soluções dadas aos nossos exercícios neste módulo, como também no módulo 8, são apenas uma forma de resolver os requisitos. À medida que se avança no estudo das ferramentas de código aberto para geoespacial, descobre-se que existem várias possibilidades para se chegar ao mesmo resultado - algumas melhores do que outras. 11.5.1 Quiz Qual é o nome do processo pelo qual a resolução de um conjunto de dados raster pode ser aumentada ou diminuída? -Reamostragem. O que um histograma nos mostra? -A frequência dos valores dos pixels, organizados em intervalos de valores adjacentes. Um conjunto de dados raster pode ser convertido em um polígono? E o contrário? -Sim e sim. 11.6 Referências Centro para Rede Internacional de Informação em Ciências da Terra - CIESIN - Universidade de Columbia. 2018. Gridded Population of the World, Versão 4 (GPWv4): Population Density, Revisão 11. Palisades, NY: NASA Socioeconomic Data and Applications Center (SEDAC). https://doi.org/10.7927/H49C6VHW. Acessado em DAY MONTH YEAR. Métodos de reamostragem: https://gisgeography.com/raster-resampling/ 11.7 Notas [1] Uma operação primitiva é um cálculo básico executado por um algoritmo. [2]: A resolução temporal depende da latitude. [3]: JAXA é a Agência Japonesa de Exploração Aeroespacial. [4]: Para o propósito deste exercício, consideraremos o DSM como um modelo de elevação digital. Para obter mais detalhes sobre as diferenças, consulte a Divisão de conceitos seção. [5]: A Geospatial Data Abstraction Library (GDAL) é uma biblioteca de software de computador para leitura e gravação de formatos de dados geoespaciais vetoriais e raster. [6]: O Sentinel-2 é uma missão de observação da Terra do Programa Copernicus que adquire sistematicamente imagens ópticas em alta resolução espacial (10 ma 60 m) em águas terrestres e costeiras. Para mais detalhes, acesse aqui. "],["plugins-qgis.html", "Capitulo 12 Plugins QGIS 12.1 Introdução à mentalidade do plugin 12.2 O gerenciador de plugins 12.3 Alguns plugins interessantes", " Capitulo 12 Plugins QGIS Autores: Codrina, Ben Hur Este módulo irá destacar alguns dos plugins mais interessantes e úteis que a comunidade internacional QGIS desenvolveu e disponibilizou para todos usarem. Neste módulo, você irá adquirir as seguintes habilidades: Como pesquisar e instalar um novo plugin; Como alternar entre os diferentes repositórios de plugins; Como ler a documentação de um plugin e como pesquisar; Detalhes sobre algumas das funcionalidades de plugins mais populares. Ferramentas e recursos necessários: Este módulo foi preparado usando QGIS versão 3.16.1 - Hannover Pré-requisitos: Conhecimento básico de operação um computador Uma compreensão robusta de todos os módulos, pois os plugins que apresentaremos se aplicam a várias noções / elementos que você aprendeu ao longo deste currículo, como vetores, rasters, tabelas de atributos, regras cartográficas e muitos outros. 12.1 Introdução à mentalidade do plugin Uma das muitas vantagens da comunidade de código aberto - composta por desenvolvedores e usuários - é a incrível velocidade com que os desenvolvimentos e melhorias acontecem, e a maneira como novas ideias surgem e são colocadas em prática. Como você viu no módulo 1, o QGIS é projetado com uma arquitetura de ‘plugin’ (ou complemento), permitindo que ele seja facilmente personalizado para as necessidades do usuário adicionando plugins externos. Na verdade, QGIS é a combinação de plugins principais (core) e externos. Os plugins principais - como o nome sugere - formam a estrutura principal, são mantidos pela Equipe de Desenvolvimento do QGIS e estão sempre incluídos na instalação, como por exemplo o plugin de núcleo de processamento, as estatísticas de zona ou o gerenciador de plugins. Com o tempo, devido à sua relevância, diferentes plugins externos passaram a ser principais. É claro que, dados os princípios do código aberto, juntamente com a grande e muito detalhada documentação disponível e os muitos canais de comunicação e eventos dedicados, é possível aprender a construir um plugin que atenda aos seus requisitos. E esse seria um um plugin externo. Nesta página da web, você pode encontrar toda a documentação necessária. A maioria dos plugins externos são escritos em Python, mas também podem ser escritos em C ++. Nesta primeira fase, vamos explorar a configuração dos plugins QGIS - como procurar um plugin para resolver um requisito específico que alguém possa ter, como interpretar sua documentação e como relatar ao desenvolvedor se você encontrar um problema. 12.2 O gerenciador de plugins O QGIS oferece um plugin principal para permitir aos usuários gerenciar, instalar, atualizar e desinstalar plugins externos. A funcionalidade é intuitiva, fornecendo acesso total ao repositório público oficial de plugins. Deve ser destacado que os plugins externos - sejam oficiais ou experimentais - são o trabalho de desenvolvedores individuais ou organizações e a organização QGIS não se responsabiliza por eles. Dito isso, existem algumas regras que os desenvolvedores que desejam compartilhar seu trabalho através do repositório oficial devem cumprir, bem como uma série de recomendações para uma rápida aceitação. Os requisitos incluem elementos como licença compatível, documentação mínima, identificação clara de dependências e outros. As recomendações incluem verificar se o plugin não duplica funcionalidades existentes, bom formato do repositório fonte, compatível com todas as plataformas (Windows, Linux, macOS) e muitas outras. Plug-ins experimentais - que são rotulados como tal no gerenciador de plugins - são plugins que estão em estágios iniciais de desenvolvimento, que não são adequados para uso operacional. Eles são considerados como testes de “prova de conceito” e os usuários não são aconselhados a instalá-los, a menos que pretendam usá-los para fins de teste. Para ver os plugins experimentais, o usuário deve habilitá-los. Assim, nas configurações do gerenciador de plugins, marque a opção Mostrar também plugins experimentais (Figura 10.2a). Também existe a possibilidade de listar os plugins obsoletos. Eles não são recomendados porque não são mais mantidos. Os dois tipos são bem diferenciados no gerenciador de plugins (consulte as figuras 10.1 e 10.2b). Plugin oficial do gerenciador Figura 10.1 - Plugin oficial do gerenciador Exibir plugins experimentais Figura 10.2a - Exibir plugins experimentais Plugin experimental do plugin Manager Figura 10.2b - Plugin experimental do plugin Manager Outro aspecto que vale a pena mencionar é que o gerenciador de plugins é uma funcionalidade bastante versátil que permite aos desenvolvedores adicionar seus repositórios privados (veja a figura 10.3). Adicionar repositório de plugins privado ao seu QGIS Figura 10.3 - Adicionar repositório de plugins privado ao seu QGIS Isso é útil, se por exemplo, dentro de sua organização há necessidade de mais plugins, mas que não estão em conformidade com QGIS requisitos para hospedagem pública em seu repositório oficial. Um recurso útil sobre como configurar seu próprio repositório de plugins está disponível em GIS OPS O método mais simples é preparar um pacote zip contendo um plugin e que pode ser compartilhado por meios tradicionais. No entanto, esse método não é recomendado. Além de Configurações, pode-se ter notado que existem várias outras guias do lado esquerdo, com nomes que são autoexplicativos: Todos, Instalado, Não instalado, Novo, Inválido, Instalar do ZIP e, como mencionado, Configurações. Depois de decidir quais tipos de plugins listar em seu gerenciador, pode-se alternar para a guia Todos e vamos investigar como um plugin aparece no Gerenciador de plugins. Para fins de demonstração, pesquise o plugin Cartographic Line Generalization. Como você notou, o Gerenciador de Plug-ins possui uma barra de pesquisa disponível - aqui é onde se pode digitar uma ou mais palavras-chave adequadas para um requisito específico. No nosso caso, a palavra-chave é ‘cartographic’. Buscando um plugin específico no Gerenciador de Plugins Figura 10.4 - Buscando um plugin específico no Gerenciador de Plugins Como se pode notar, do lado direito há uma janela apresentando um conjunto de elementos de documentação. Você perceberá que estes são padronizados e cada plugin deve ter as mesmas informações disponibilizadas, da mesma forma. A exibição de metadados para cada plugin é a seguinte: Nome do plugin e subtítulo descrevendo suas capacidades; Seção de descrição - dependendo do desenvolvedor, esta seção pode ser mais ou menos detalhada; O número de downloads e quantas estrelas o plugin recebeu da comunidade; As palavras-chave escolhidas pelo desenvolvedor; Uma série de links muito importantes: a página web do plugin, o bug tracker e o repositório de código O nome do(s) desenvolvedor(es), bem como a organização afiliada. Às vezes, o nome do projeto no qual o plugin foi desenvolvido também é listado; O número da versão, com a menção estável ou experimental, conforme o caso; O ícone do plugin. Na figura 10.5, todos os elementos de metadados mencionados são identificados. Documentação de um plugin Figura 10.5 - Documentação de um plugin No canto inferior esquerdo está disponível o botão Instalar plugin. Ao ativá-lo, o plugin escolhido será instalado em seu QGIS e um novo ícone ou menu será adicionado à sua interface QGIS. É importante mencionar que normalmente, devido a limitações de espaço, a descrição disponível no gerenciador de plugins não é extensa. Assim, para melhor entender se o plugin escolhido atende aos requisitos, é necessário acessar a sua página inicial. No nosso caso, observamos que a página inicial é idêntica ao repositório de código - no Gitlab, - mas isso nem sempre é o caso (veja a figura 10.6). Página inicial do plugin selecionado Figura 10.6a - Página inicial do plugin selecionado Metadados detalhados na página inicial do plugin Figura 10.6b - Metadados detalhados na página inicial do plugin Outro aspecto muito importante a destacar em relação à documentação de um plugin é o link web do bug tracker. Um sistema rastreador de bugs é um aplicativo de software que rastreia todos os problemas de software relatados (também conhecidos como bugs). Em nosso caso, o bug tracker é suportado pelo repositório de código dedicado Github (veja a figura 10.7). Sistema de rastreamento de bug no Github para um plugin QGIS Figura 10.7 - Sistema de rastreamento de bug no Github para um plugin QGIS Detalhar como relatar um problema de software no Github excede o escopo deste módulo, no entanto, é importante destacar um alguns aspectos. Em primeiro lugar, o ecossistema de código aberto - seja geoespacial ou não - funciona melhor quando todas as partes envolvidas estão ativas, ou seja, os desenvolvedores programando e os usuários testando e relatando os problemas identificados. Se alguém fizer uma pesquisa rápida nos diferentes rastreadores de bug para QGIS ou GRASS ou outra solução de código aberto, notará uma atividade intensa. E isso é bom, mostra que a comunidade está viva, que a interação entre desenvolvedores e usuários funciona normalmente. Em segundo lugar, antes de abrir um relatório de bug através de muitos canais diferentes, certifique-se de ter pesquisado exaustivamente online por uma solução para o seu problema. Caso contrário, você corre o risco de não ser atendido por não dedicar tempo para fazer seu dever de casa. 12.2.1 Quiz Você precisa do nome completo do plugin para encontrá-lo no Gerenciador de plugins? Não, uma palavra-chave é suficiente. Sim. Os plugins oficiais e experimentais estão disponíveis no mesmo repositório? Sim, desde que a opção ‘Mostrar os plugins experimentais’ no Plug-in do gerenciador esteja selecionada. Não, para experimental existem outros repositórios. Cite 2 ou 3 informações que um usuário pode encontrar na documentação de um plugin: -Título e descrição, número de downloads, página inicial, links do repositório de código, nome do desenvolvedor, uma descrição resumida. 12.3 Alguns plugins interessantes Plugins podem ser classificados em várias categorias, dependendo do que se considera importante. A seguir, identificamos os 2: Pelo nível de desenvolvimento: Oficial - o plugin é considerado estável, bem documentado e pode ser usado em produção; Experimental - o plugin está em estágio inicial de desenvolvimento, é recomendado apenas para fins de teste; Obsoleto - o plugin não é mais mantido, ou seja, não será atualizado para versões mais recentes, o desenvolvedor pode não responder ao relatório de bug, para ser usado apenas se não houver outra maneira de resolver o problema em questão. Por tipo de categoria: Vetor; Raster; Rede; Base de dados; Cartografia. Deve-se notar que alguns plugins externos agem como pontes que permitem o acesso através do QGIS a bancos de dados externos, nuvens, serviços, nesse caso, elementos adicionais podem ser necessários - como uma conta paga para o serviço externo, nuvem ou uma chave de API. Um exemplo para ilustrar isso é o plugin Planet Explorer da Planet Inc. (veja a figura 10.8). Exemplo de um plugin que requer assinatura externa para funcionar no QGIS em sua capacidade total Figura 10.8 - Exemplo de um plugin que requer assinatura externa para funcionar no QGIS em sua capacidade total Embora na descrição não haja nenhuma menção sobre isso, vá para a página inicial do plugin e veja os requisitos para seu funcionamento: “Assinatura ou teste do Planet para acessar e baixar imagens do Planet. Não tem uma assinatura? Entre em contato com nossa equipe para saber mais.” Nas páginas a seguir, identificaremos e forneceremos exemplos curto de alguns plugins que consideramos úteis. Por favor, tenha em mente que esta é uma pequena lista do extenso universo de plugins, então fique à vontade para explorar mais. 12.3.1 Discovery O plugin Figura 10.9a - O plugin Discovery é um plugin muito útil que permite pesquisar texto armazenado nos atributos de seus vetores. O plugin se conecta a um banco de dados PostgreSQL / PostGIS, MS SQL Server, ou um arquivo de geopackage e procura por texto nas colunas indicadas. Ele permite auto-completar e também oferece suporte para escalas com base em expressões flexíveis. Para testá-lo, usaremos um arquivo de geopackage preparado por The Humanitarian Data Exchange e disponível para download. É um arquivo vetorial contendo os lugares povoados das Filipinas, junto com os nomes e número de pessoas. Os dados brutos foram baixados do OpenStreetMap. Depois de usar o gerenciador de plugins para instalar o Discovery, uma nova barra de ferramentas deve estar visível em seu QGIS. Vamos configurar os parâmetros: Tipo de fonte de dados: geopackage, nome: Filipinas, escolha o arquivo de acordo e a camada será Populated Places (Locais Povoados), a coluna de pesquisa: nome. Também solicitaremos informações adicionais a serem exibidas na barra de pesquisa: is_in e population. Na nossa situação, se houver mais povoados com o mesmo nome, mas em províncias diferentes, seremos capazes de diferenciá-las. Sua configuração do Discovery deve ser semelhante à figura 10.9b. Configurando o plugin Discovery Figura 10.9b - Configurando o plugin Discovery Clique em OK e vamos procurar por “San Roque” na barra de pesquisa (ver figura 10.9c). Usando o Discovery para pesquisar rapidamente os atributos das camadas vetoriais. Figura 10.9c - Usando o Discovery para pesquisar rapidamente os atributos das camadas vetoriais. Em nosso exemplo, podemos ver que há muitos lugares povoados de San Roque nas Filipinas, escolhendo uma entrada nesta lista e o QGIS irá ampliá-la (consulte a figura 10.9d). Ampliação da geometria do elemento selecionado na barra de pesquisa. Figura 10.9d - Ampliação da geometria do elemento selecionado na barra de pesquisa. O plugin oferece a possibilidade de encontrar vetores por pesquisa de texto juntamente com vários filtros, como uma caixa delimitadora ou várias consultas SQL. Para uma descrição detalhada dos recursos do plugin, junto com um tutorial mais abrangente, verifique o plugin Discovery página da web. 12.3.2 Polygon Divider O plugin Figura 10.10a - O plugin Polygon Divider Polygon Divider é outro plugin QGIS útil que ajuda o usuário a dividir de forma eficiente polígonos em ‘aproximadamente quadrados’ de um tamanho definido, a partir de uma camada vetorial do tipo polígono. Essa ferramenta pode ser útil para uma infinidade de aplicações, como parcelamento de terras, amostragem ambiental e assim por diante. Vamos usar esta ferramenta no conjunto de dados dos limites do Rio de Janeiro e ver quais resultados obtemos. Usando o gerenciador de plugins, instale o Polygon Divider. Após a conclusão, um novo ícone aparecerá na barra de ferramentas QGIS e uma nova janela será aberta (consulte a figura 10.10b). Janela do plugin do divisor de polígono Figura 10.10b - Janela do plugin do divisor de polígono Escolha como camada de entrada a camada de polígono do Rio de Janeiro, salve o arquivo de saída como rj_polygonDivider, escolha 1000000 (significando que todas as divisões terão cerca de 100 hectares), escolha left to right (da esquerda para a direita) como direção de corte e tolerância 1. O resultado deve ser semelhante à figura 10.10c. Resultado da execução do plugin Polygon Divider na camada vetorial do Rio Figura 10.10c - Resultado da execução do plugin Polygon Divider na camada vetorial do Rio Para uma descrição detalhada dos recursos do plugin, junto com um tutorial mais abrangente, verifique o Polygon Divisor página da web. 12.3.3 Load Them All O plugin Load Them All Figura 10.11a - O plugin Load Them All Este é um plugin útil quando você tem múltiplas camadas (vetores e rasters) que você precisa carregar no QGIS. O plugin permite que você carregue tudo automaticamente, de uma vez. Mas a grande vantagem é que ele fornece uma infinidade de filtros, como alfanuméricos (por nome), data de modificação, bounding box (extensão, a partir de coordenadas inseridas manualmente), tipo de geometria e outros. Para testá-lo, carregaremos os arquivos do módulo anterior 8. Para o vetor, escolheremos os shapefiles que foram processados ​​antes de uma data selecionada, para o raster escolheremos um filtro alfanumérico - o nome do raster carregado deve começar com LandCover (veja a figura 10.11_b). Configurando os parâmetros do plugin Load Them All (vetores e rasters) Figura 10.11b - Configurando os parâmetros do plugin Load Them All (vetores e rasters) Os parâmetros identificados acima representam um exemplo baseado na estrutura disponível. Você pode alterá-lo da maneira que achar melhor, com base nos arquivos do computador. Os resultados da execução de Load Them All com os parâmetros acima são apresentados na figura 10.11c (vetores) e 10.11d (rasters). Usando o plugin Load Them All para carregar vários vetores Figura 10.11c - Usando o plugin Load Them All para carregar vários vetores Usando o plugin Load Them All para carregar vários rasters Figura 10.11d - Usando o plugin Load Them All para carregar vários rasters Para obter uma descrição detalhada dos recursos do plugin, junto com um tutorial mais abrangente, verifique a página da web do plugin. 12.3.4 Raster tracer O plugin Raster tracer Figura 10.12a - O plugin Raster tracer O Raster Tracer pode ser um plugin muito útil quando se digitaliza por sobre um mapa, em outras palavras, extraindo dados na forma de vetores. Esta atividade é geralmente realizada em mapas topográficos antigos digitalizados, dos quais queremos extrair várias informações para armazenar, processar e visualizá-las em um SIG/GIS. Um bom exemplo é a digitalização feita sobre mapas topográficos para extrair curvas de nível para construir em SIG um modelo 3D do relevo. Embora hoje, com o surgimento de modelos digitais de terreno obtidos a partir de imagens de satélite, isso possa não ser mais um problema, a digitalização ainda é amplamente empregada. O uso mais proeminente é para extrair informações de mapas antigos. Mapas históricos nos oferecem uma janela para o passado, antes de termos satélites para monitorar nossas florestas e mudanças na cobertura do solo. Como esses documentos cartográficos eram originalmente em papel, para poder usar a informação com tecnologia moderna é preciso digitalizá-los. Usando o Gerenciador de plugins, pesquise e instale o Raster Tracer. Este plugin adiciona ao QGIS uma capacidade semi-automática de traçar características lineares do mapa raster subjacente, clicando em seus pontos de inflexão no mapa raster. Uma vez instalado, um novo ícone deve aparecer na sua barra de ferramentas. Para usá-lo, precisamos de pelo menos 2 camadas - uma é a camada raster e a outra é a camada vetorial que irá capturar os dados. Identificamos para a província de Pampanga um mapa topográfico, 1: 50k no site oficial da Autoridade Nacional de Mapeamento e Informação de Recursos. Infelizmente, embora eles tenham fornecido acesso ao mapa, ele não é georreferenciado. Para fins de demonstração, continuaremos sem corrigir esse problema, no entanto, observe! Antes de fazer a digitação de vetores de um mapa raster, é fundamental que o último seja georreferenciado corretamente. Caso contrário, o trabalho - que consome muito tempo - será inútil. Dito isso, traga o mapa topográfico da cidade de Angeles (Camada - Adicionar camada - Adicionar camada raster ..). A seguir, criaremos uma camada vetorial MultiString onde todos os objetos de linha que extraímos do mapa topográfico serão armazenados (Camada - Criar Camada - Nova camada GeoPackage ..). Crie um vetor MultiLine e salve-o com o nome tracer_lines. Escolha a projeção EPSG: 3123 - a projeção oficial da região. Inicie o modo de edição nele (Clique com o botão direito - Alternar edição). Clique no ícone Raster Tracer e configure os parâmetros, como na figura 10.12b. Escolha a cor das linhas de contorno usando o seletor de cores que se abre ao clicar na opção Trace color. Configurando os parâmetros do Raster Tracer Figura 10.12b - Configurando os parâmetros do Raster Tracer Agora, tudo o que resta fazer é iniciar a digitalização. Depois de verificar se o raster do vetor é editável e se o plugin está ativado clicando mais uma vez sobre ele, clique nos pontos de inflexão da linha de contorno que iremos extrair (ver figura 10.112c). Clique nos pontos de inflexão para traçar a linha usando Raster Tracer Figura 10.12c - Clique nos pontos de inflexão para traçar a linha usando Raster Tracer A figura 10.12d apresenta o resultado. Linha desenhada semiautomática seguindo a cor indicada. Figura 10.12d - Linha desenhada semiautomática seguindo a cor indicada. 12.3.5 Active Fire O plugin Active Fire Figura 10.13a O plugin Active Fire Plugins não são apenas projetados para trabalhar com dados que você tem, mas são construídos para também trazer para o QGIS conjuntos de dados que são produzidos por outras instituições, agências, organizações ou qualquer pessoa que os compartilhe por meio de serviços padronizados de mapeamento da web. Um bom exemplo é o plugin Active Fire. Este foi desenvolvido para permitir que os usuários do QGIS exibam de forma rápida, intuitiva e sem nenhum esforço, os incêndios nas últimas 24h em qualquer região de interesse. Os produtos de incêndio são produzidos pela NASA e disponibilizados gratuitamente para todos. Os dados brutos vêm de 2 satélites: o espectrorradiômetro de imagem de resolução moderada (MODIS) (MCD14DL) e Visible Infrared Imaging Radiometer Suite (VIIRS) 375 m (VNP14IMGTDL_NRT e VJ114IMGTDL_NRT) para as últimas 24h. Para encontrá-lo, abra o Gerenciador de plugins escreva fire. Após a instalação, um novo ícone vermelho aparecerá na barra de ferramentas QGIS. Ao clicar sobre ele, aparece uma nova janela onde permite selecionar em qual sensor deseja que os pixels de incêndio sejam identificados nas últimas 24 horas (ver figura 10.13b). Usando o plugin Active Fire para carregar produtos de incêndio da NASA no QGIS Figura 10.13b - Usando o plugin Active Fire para carregar produtos de incêndio da NASA no QGIS O plugin também calcula o número de pixels de incêndio registrados. 12.3.6 Qgis2web O plugin qgis2web Figura 10.14a - O plugin qgis2web Este é um plugin que permite ao usuário exportar rapidamente seu projeto QGIS para um mapa web. Um mapa web é uma exibição interativa de informações geográficas que pode ser aberta em navegadores (browsers). Interagimos diariamente com essas representações; basta pensar em OpenStreetMap, Google Maps, Waze, Pokémon Go. Este plugin permite preparar e exportar rapidamente um mapa para a Internet, através das tecnologias web de OpenLayer3 ou Leaflet. Qgis2web faz o seu melhor para interpretar um projeto QGIS e exportar HTML, Javascript e CSS para criar um mapa web o mais próximo possível do projeto QGIS. Após a instalação do plugin qgis2web, um novo ícone aparece na barra de ferramentas QGIS, o mesmo representado no Gerenciador de Plugins. Clique nele para abrir uma janela, como a da figura 10.14b. Escolhendo o que seu mapa irá mostrar no navegador Figura 10.14b - Escolhendo o que seu mapa irá mostrar no navegador. A interface é intuitiva, mas lembre-se de que quanto mais pesados ​​os conjuntos de dados, mais tempo demorará para ser preparado e exportado. Após escolher para onde exportar, clique no botão exportar para finalizar (ver figura 10.14c). QGIS2web preparando os arquivos e pastas necessários para a tecnologia da web OpenLayer 3 Figura 10.14c - QGIS2web preparando os arquivos e pastas necessários para a tecnologia da web OpenLayer 3 A pasta exportada contém vários arquivos, dependendo de qual tecnologia de mapeamento da web foi selecionada - Leaflet ou Openlayers3 . No caso do OpenLayer3, a pasta escolhida para a exportação contém os seguintes arquivos e pastas: images, index.html, layers, resources, styles, webfonts. Clique duas vezes no arquivo index.html e seu mapa exportado será aberto em seu navegador, onde você pode alternar quais camadas ficarão visíveis (consulte a figura 10.14d). Abrindo o arquivo index.html em seu navegador Figura 10.14d - Abrindo o arquivo index.html em seu navegador Como você notou, o navegador abre este mapa de sua pasta local (onde você disse ao qgis2web para exportar). Este plugin QGIS é uma ótima ferramenta para ajudá-lo a preparar seus mapas para a web. Para uma descrição detalhada dos recursos do plugin, junto com um tutorial mais abrangente, verifique a qgis2web página da web. 12.3.7 DataPlotly O plugin DataPlotly Figura 10.14a - O plugin DataPlotly O plugin DataPlotly foi desenvolvido especificamente para suportar visualizações interativas de gráficos dos dados vetoriais carregados no QGIS. O plugin é baseado em uma biblioteca Python chamada Plotly, que é bastante poderosa, fornecendo a possibilidade de criar vários gráficos interativos com qualidade para publicação: gráficos de linha, gráficos de dispersão, gráficos de área, gráficos de barras, barras de erro, gráficos boxplot, histogramas, mapas de calor, subplots, eixos múltiplos, gráficos polares e gráficos de bolhas. Mais informações sobre esta biblioteca Python estão disponíveis no site oficial. Instale o plugin usando o gerenciador de plugins e carregue algumas camadas vetoriais para visualizar: Waterways_3123 (tipo de linha); Locais povoados (tipo de ponto); Vamos preparar um gráfico interativo mostrando quantos rios vs. canais vs. riachos vs. segmentos de drenagem que temos em nosso conjunto de dados. Ao clicar no ícone específico, uma nova janela será aberta, consulte a figura 10.24. Janela / painel do DataPlotly. Figura 10.15b - Janela / painel do DataPlotly. A seguir, configure os parâmetros, como na figura 10.15c. Configurando os parâmetros para o gráfico de pizza que representa os tipos de linhas de água Figura 10.15c - Configurando os parâmetros para o gráfico de pizza que representa os tipos de linhas de água Escolha waterways_3123 como a camada vetorial da qual extrair os dados plotados, campo de agrupamento - fclass, Campo Y - comprimento. Se o comprimento precisar ser calculado, vá para a tabela de atributos da camada vetorial e escreva no campo calculadora round($length). Para mais detalhes, consulte o módulo 8. Em seguida, selecione ‘single plot’ no tipo ploty e clique no botão Criar plotagem, no lado inferior direito. Seu resultado deve ser semelhante à figura 10.15d. Tipos de vias navegáveis ​​por gráfico circular de comprimento. Figura 10.15d - Tipos de vias navegáveis ​​por gráfico circular de comprimento. Ao passar o mouse sobre cada segmento do gráfico de pizza, um pop-up aparece mostrando o nome (retirado da coluna fclass), a soma dos comprimentos e a porcentagem do total. Uma funcionalidade significativa do DataPlotly é a conexão com a tela do mapa QGIS. Para entender o que é isso, clique em uma das seções do gráfico de pizza. Você deve ver que alguns recursos são selecionados automaticamente na tela do mapa (consulte a figura 10.15e). Teste de conexão interativa da tela do mapa DataPlotly e QGIS Figura 10.15e - Teste de conexão interativa da tela do mapa DataPlotly e QGIS Isso também significa que você pode atualizar interativamente seu gráfico, por exemplo, para mostrar apenas os recursos selecionados. Para testar, selecione apenas uma parte dos cursos d’água na tela do mapa, vá para o DataPlotly, primeira guia e nos parâmetros do gráfico, marque a opção ‘only selected features’ (consulte a figura 10.15f). Atualizar interativamente o gráfico para mostrar apenas os recursos selecionados. Figura 10.15f - Atualizar interativamente o gráfico para mostrar apenas os recursos selecionados. Em seguida, clique no botão Atualizar gráfico no canto inferior direito da janela DataPlotly. Os resultados devem ser semelhantes aos da figura 10.29 (apenas aproximadamente, porque sua seleção provavelmente difere daquela mostrada na figura 10.15g). Atualize o gráfico para mostrar apenas os recursos selecionados na tela do mapa. Figura 10.15g - Atualize o gráfico para mostrar apenas os recursos selecionados na tela do mapa. Além disso, o DataPlotly fornece ao usuário uma função de exportação - em um arquivo .pdf ou .html. Os botões correspondentes estão na parte inferior direita da janela DataPlotly, consulte a figura 10.15h. Recursos de exportação do DataPlotly Figura 10.15h - Recursos de exportação do DataPlotly Exportar como arquivo HTML permite ao usuário preparar uma ampla variedade de gráficos de dados prontos para publicação na web (consulte a figura 10.15i). Usando um navegador para abrir o arquivo HTML exportado pelo DataPlotly Figura 10.15i - Usando um navegador para abrir o arquivo HTML exportado pelo DataPlotly. O plugin também é muito bem documentado. Ele fornece um menu de ajuda para cada tipo de plotagem. Você pode acessá-lo clicando na quarta aba do DataPlotly (veja a figura 10.15j). Menu de ajuda para cada tipo de plotagem acessível através da janela do plugin. Figura 10.15j - Menu de ajuda para cada tipo de plotagem acessível através da janela do plugin. Devido ao link direto e interativo com os conjuntos de dados carregados do QGIS, as expressões também podem ser usadas ao preparar um gráfico. Para testar essa capacidade, criaremos uma base de plotagem na camada vetorial Locais povoados. Defina os seguintes parâmetros: tipo: gráfico de barras, camada: locais povoados, X_field: is_in, Y_field - abra a calculadora de campo e insira \"population\" is not null (consulte a figura 10.15k e a figura 10.15l). Abrindo o editor de campo no DataPlotly com base nos atributos da camada QGIS selecionada para aplicar uma expressão para filtrar o que o gráfico exibirá Figura 10.15k - Abrindo o editor de campo no DataPlotly com base nos atributos da camada QGIS selecionada para aplicar uma expressão para filtrar o que o gráfico exibirá Inserindo uma expressão na calculadora de campo Figura 10.15l - Inserindo uma expressão na calculadora de campo O resultado deve ser semelhante ao da figura 10.35. Resultado do DataPlotly da filtragem por expressão Figura 10.15m - Resultado do DataPlotly da filtragem por expressão Se formos interpretar este gráfico, ele nos mostra que entre todas as províncias onde existem lugares povoados, o atributo população é diferente de 0 em apenas 3 regiões, Alaminos, Sual, Pangasian e Bagac. Pode-se testar facilmente essa conclusão examinando a tabela de atributos. O DataPlotly também oferece ao usuário a possibilidade de criar subplots, o que significa que vários gráficos podem ser exibidas em uma única figura. Para testar essa funcionalidade, usaremos a camada vetorial de locais de população. Temos os seguintes atributos de interesse: place = tipo de lugar (cidade, vila, vila, etc., is_in= nome da província a que pertence (se conhecido), population = (números da população) e name = o nome do lugar (se conhecido). Vamos integrar na mesma figura, 2 gráficos de dados: um para nos mostrar quantos dos lugares povoados se enquadram em cada categoria de place e o segundo, como é a população dividida pelos 4 tipos de places. Configurando os parâmetros para o primeiro lote - tipos de assentamentos por seus números Figura 10.15n - Configurando os parâmetros para o primeiro lote - tipos de assentamentos por seus números. Configuração dos parâmetros para a segunda parcela - tipos de assentamentos por número de população Figura 10.15o - Configuração dos parâmetros para a segunda parcela - tipos de assentamentos por número de população. Subplots em uma linha Figura 10.15p - Subplots em uma linha Para uma descrição detalhada dos recursos do plugin, junto com um tutorial mais abrangente, verifique o DataPlotly webpage. 12.3.8 Plugin QuickMapServices / OpenLayers plugin QuickMapServices Plug-in OpenLayers Figura 10.16a - plugin QuickMapServices; 10.16b - Plug-in OpenLayers Estes 2 plugins são excepcionalmente úteis quando um usuário precisa adicionar mapas base ao seu projeto QGIS. Por exemplo, deseja-se ver no contexto o posicionamento de uma nova camada vetorial recebida, ou talvez apenas preparar uma representação cartográfica mais atrativa para um relatório. Para qualquer um desses objetivos, os QuickMapServices permite carregar camadas de mapa base de diferentes fornecedores, como OpenStreetMap, NASA, Bing ou Google Maps, em apenas 2 cliques. Instale os dois plugins usando o Gerenciador de plugins. Nesse caso, você notará que eles aparecerão na guia Web (consulte a figura 10.16b). Localização dos plugins QuickMapServices e OpenLayers Figura 10.16b - Localização dos plugins QuickMapServices e OpenLayers. Usá-los é bastante simples, basta clicar na camada que deseja trazer para a tela do mapa e o plugin fará todo o trabalho. Este plugin requer uma boa ligação à Internet, uma vez que utiliza dados disponibilizados pelos seus fornecedores através de serviços de mapeamento web. A Figura 10.16c apresenta o OSM Standard trazido como um mapa base para o Rio de Janeiro. Usando o plugin OpenLayer Figura 10.16c - Usando o plugin OpenLayers. A Figura 10.16d ilustra o alinhamento perfeito do mapa base carregado na tela do mapa QGIS usando o plugin OpenLayers. Mesmo que as 2 camadas não estejam na mesma projeção, o QGIS permite a projeção em tempo real, portanto, a sobreposição é possível. Dados vetoriais carregados (estradas) sobrepostos ao mapa OSM Standard Figura 10.16d - Dados vetoriais carregados (estradas) sobrepostos ao mapa OSM Standard Para uma descrição detalhada dos recursos dos plugins, juntamente com um tutorial mais abrangente, verifique seus página da web: QuickMapServices e OpenLayer Plugin. 12.3.9 Table2Style O plugin Table to Style Figura 10.17a - O plugin Table to Style Este plugin é útil para situações onde existem valores específicos para pixels dentro de uma camada raster que correspondem perfeitamente a uma cor específica. Neste currículo, encontramos esse exemplo, ao trabalhar com os dados de cobertura da terra (ver figura 10.17b). Exemplos de situações em que os valores dos pixels correspondem a uma cor exata Figura 10.17b - Exemplos de situações em que os valores dos pixels correspondem a uma cor exata Do fornecedor deste produto com base em imagens de satélite, os valores dos pixels e as cores associadas também são disponibilizados: Valor Cor Descrição 0 #282828 Desconhecido. Nenhum ou nenhum dado de satélite disponível. 20 #FFBB22 Arbustos. Plantas lenhosas perenes com caules persistentes e lenhosos e sem caule principal definido com menos de 5 m de altura. A folhagem do arbusto pode ser perene ou caduca. 30 #FFFF4C Vegetação herbácea. Plantas sem caule persistente ou brotos acima do solo e sem estrutura firme definida. A cobertura de árvores e arbustos é inferior a 10%. 40 #F096FF Vegetação / agricultura cultivada e manejada. Terras cobertas com culturas temporárias seguidas de colheita e um período de solo nu (por exemplo, sistemas de cultivo único e múltiplo) Observe que as culturas lenhosas perenes serão classificadas como o tipo apropriado de cobertura de terra de floresta ou arbusto. 50 #FA0000 Urbano / edificado. Terreno coberto por edifícios e outras estruturas feitas pelo homem. 60 #B4B4B4 Vegetação nua / esparsa. Terras com solo, areia ou rochas expostas e nunca apresentam mais de 10% de cobertura vegetal em qualquer época do ano. 70 #F0F0F0 Neve e gelo. Terras cobertas de neve ou gelo ao longo do ano. 80 #0032C8 Corpos d’água permanentes. Lagos, reservatórios e rios. Podem ser corpos de água doce ou salgada. 90 #0096A0 Pantanal.Herbáceo. Terras com mistura permanente de água e vegetação herbácea ou lenhosa. A vegetação pode estar presente em água salgada, salobra ou doce. 100 #FAE6A0 Musgo e líquen. 111 #58481F Floresta fechada, folha de agulha perene. Copa das árvores&gt; 70%, quase todas as árvores de folhas agulhas permanecem verdes o ano todo. O dossel nunca está sem folhagem verde. 112 #009900 Floresta fechada, folha larga perene. Copa das árvores&gt; 70%, quase todas as árvores de folha larga permanecem verdes durante todo o ano. O dossel nunca está sem folhagem verde. 113 #70663E Floresta fechada, folha de agulha decídua. O dossel das árvores&gt; 70% consiste em comunidades de árvores de folhas agulhas sazonais com um ciclo anual de períodos de folhagem e folhagem. 114 #00CC00 Floresta fechada, folha larga decídua. O dossel das árvores&gt; 70% consiste em comunidades sazonais de folhas largas com um ciclo anual de períodos de folhagem e folhagem. 115 #4E751F Floresta fechada, mista. 116 #007800 Floresta fechada, não correspondendo a nenhuma das outras definições. 121 #666000 Floresta aberta, folha de agulha perene. Camada superior - árvores 15-70% e segunda camada - mistura de arbustos e pastagens, quase todas as árvores de folhas agulhas permanecem verdes durante todo o ano. O dossel nunca está sem folhagem verde. 122 #8DB400 Floresta aberta, folha larga perene. Camada superior - árvores 15-70% e segunda camada - mistura de arbustos e pastagens, quase todas as árvores de folha larga permanecem verdes durante todo o ano. O dossel nunca está sem folhagem verde. 123 #8D7400 Floresta aberta, folha de agulha decídua. Camada superior - árvores 15-70% e segunda camada - mista de arbustos e pastagens, consiste em comunidades sazonais de árvores de folhas agulhas com um ciclo anual de períodos de folhagem e folhagem. 124 #A0DC00 Floresta aberta, folha caduca de folha larga. Camada superior - árvores 15-70% e segunda camada - mistura de arbustos e pastagens, consiste em comunidades sazonais de árvores de folha larga com um ciclo anual de períodos de folhagem e folhagem. 125 #929900 Floresta aberta, mista. 126 #648C00 Floresta aberta, não correspondendo a nenhuma das outras definições. 200 #000080 Oceanos, mares. Podem ser corpos de água doce ou salgada. Quando um novo conjunto de dados - raster ou vetor - é carregado, o QGIS atribui a ele uma representação visual aleatória. É o usuário que deve definir cores e esquemas apropriados para as representações. Para obter mais informações sobre o estilo das camadas, vá para o módulo 4. Para testar o plugin table2style, usaremos o conjunto de dados raster LandCover2019, usado também no módulo nº 9. Ao carregar o raster no QGIS, você deve ter um resultado semelhante ao da figura 10.17c. QGIS atribui cores aleatoriamente aos valores de pixel Figura 10.17c - QGIS atribui cores aleatoriamente aos valores de pixel De acordo com o provedor de dados, sabemos que para cada valor de pixel há uma cor claramente atribuída e no domínio da cobertura da terra, e essas cores já representam convenções, assim como na cartografia clássica. As florestas são representadas com um tipo específico de verde, as pastagens com outro, o oceano é representado com um tipo diferente de azul do que a água superficial interior e assim por diante. O pior caso seria atribuir manualmente todas essas cores aos seus respectivos valores. No entanto, o plugin table2style resolve esse problema automaticamente, em questão de segundos. Vá para o plugin Manager e instale o plugin table2style. Um novo ícone aparecerá na sua barra de ferramentas. Abra-o clicando duas vezes nele. Uma janela de configuração deve aparecer, como na figura 10.17d. Janela Table2style Figura 10.17d - Janela Table2style O plugin requer 2 parâmetros - uma camada raster e uma tabela de atributos com valores de pixel, rótulo de descrição e códigos de cores em um dos três sistemas: RGB , HSV ou Hex. De acordo com nossa tabela acima, temos códigos hexadecimais para as cores atribuídas. Portanto, carregue a tabela no QGIS (Camada - Adicionar camada - Adicionar camada de texto delimitado…), sem geometria. A tabela de valores LandCover deve ser semelhante à figura 10.17e. Tabela de atributos com valores de pixel, códigos de cores e descrição para Land Cover Figura 10.17e - Tabela de atributos com valores de pixel, códigos de cores e descrição para Land Cover Agora, vamos dar uma olhada no conjunto de dados raster. O table2style funciona apenas em um raster de 1 banda, pois conecta um valor de pixel com um código de cor. Se houver mais bandas disponíveis, ele não saberia qual escolher. No entanto, verificando as propriedades da camada LandCover2019, notamos que existem 3 bandas (Propriedades - Informações - role para baixo até Bandas). Como precisamos apenas da Banda 1 - classificação discreta, usaremos a calculadora raster para extraí-la (Raster - Calculadora raster e inserimos no campo de expressão apenas \"LandCover_2019@1\" - salvar o resultado). Para obter mais detalhes sobre como trabalhar com rasters, verifique o módulo 9. Agora, temos tudo o que precisamos para testar o plugin. Configure os parâmetros como na figura 10.17f. Configurando os parâmetros do plugin table2style para o conjunto de dados Land Cover Figura 10.17f - Configurando os parâmetros do plugin table2style para o conjunto de dados Land Cover O resultado deve ser semelhante ao da figura 10.17g. Conjunto de dados raster estilizado automaticamente usando o plugin table2style Figura 10.17g - Conjunto de dados raster estilizado automaticamente usando o plugin table2style Para uma descrição detalhada do plugin veja https://github.com/ptarroso/table2style. 12.3.10 ORS Tools O plugin ORS Tools Figura 10.48a - O plugin ORS Tools Para nosso último plugin a ser apresentado, iremos mostrar os incríveis recursos do mundo interconectado de dados, ferramentas e serviços GIS. Vimos anteriormente que existem plugins que podem nos ajudar a carregar nossos dados QGIS de outros provedores sem qualquer incômodo relacionado a baixar, armazenar e saber como abri-lo (plugin OpenLayers, Active Fire). Ainda, o plugin ORS Tools é construído para fornecer acesso a um serviço de roteamento externo - o openrouteservice.org, baseado no OpenStreetMap. Roteamento é o processo de seleção de um caminho para o tráfego em uma rede ou entre ou através de vários pontos selecionados. O conjunto de ferramentas inclui roteamento, isócronas e cálculos de matriz, tanto interativos na tela do mapa quanto de arquivos de pontos dentro da estrutura de processamento. Usando o gerenciador de plugins, instale o plugin ORS Tools. Um novo ícone aparecerá na sua barra de ferramentas. Clique duas vezes para abrir (veja a figura 10.18b). Abra a janela de ferramentas ORS Figura 10.18b - Abra a janela de ferramentas ORS. Conforme mencionado, este plugin está usando um banco de dados externo - OpenStreetMap - e algoritmos externos que fazem parte do serviço - openrouteservice. Para podermos nos conectar a este serviço externo, precisaremos fazer uma conta em sua página web e pedir uma chave API. Uma chave de API é um identificador exclusivo usado para autenticar um usuário, desenvolvedor ou programa de chamada para uma API. A API é como um portal para o interior de um software, um acesso programático a seus processos e algoritmos. Assim, para usar o openrouteservice através do QGIS, vamos pedir uma chave. Prossiga com os seguintes passos: Clique no botão Sign Up na janela ORS Tools (figura 10.49). Botão de login Figura 10.18c - Botão de login Faça uma conta gratuita no site no site openrouteservice que foi aberto. Página da conta do Openrouteservice Figura 10.18d - Página da conta do Openrouteservice Após fazer a conta, você receberá um e-mail informando sobre o que acabou de obter acesso gratuito. E-mail recebido de openrouteservice Figura 10.18e - E-mail recebido de openrouteservice Faça login em sua conta recém-criada e solicite um token. Solicitar token openrouteservice Figura 10.18f - Solicitar token openrouteservice Depois que seu token for criado, clique no longo texto para copiá-lo. Retorne ao QGIS e insira a chave API copiada. Insira a chave openrouteserviceAPI em seu QGIS Figura 10.18g - Insira a chave openrouteserviceAPI em seu QGIS Neste ponto, seu QGIS deve estar pronto para calcular rotas usando openrouteservice e OpenStreetMap. Para testar seus recursos básicos, carregue no QGIS as camadas de construção de Pampanga. Certifique-se de estar trabalhando em EPSG 3857 ou EPSG: 4326. Depois de carregar a camada, comece a inserir os pontos de roteamento. Abra as Ferramentas ORS e pressione o botão verde + (veja a figura 10.18h). Inserindo os pontos de roteamento usando ferramentas ORS. Figura 10.18h - Inserindo os pontos de roteamento usando ferramentas ORS. Escolha o algoritmo de roteamento do caixeiro viajante (traveling salesman) e clique em aplicar. Após alguns momentos, uma nova camada vetorial foi criada: Routes_ORS. Resultado da execução de ferramentas ORS Figura 10.18i - Resultado da execução de ferramentas ORS. Abrindo o OpenStreetMap, notaremos que o ORS Tools tentou construir uma rota para tocar todos os pontos dados clicando no mapa. Atenção! O QGIS tinha apenas uma camada carregada e essa era a camada de construções e agora, uma nova camada foi calculada e adicionada automaticamente à tela do mapa! A rota calculada sobreposta no OpenStreetMap Figura 10.18j - A rota calculada sobreposta no OpenStreetMap. Os resultados das Ferramentas ORS dependem muito da qualidade das bases de dados utilizadas, neste caso - o OpenStreetMap. O plugin, assim como o openroutingservice, tem mais a oferecer, mas deixamos você descobrir isso em sua jornada GIS. 12.3.11 Quiz Os plugins QGIS podem ser executados fora da plataforma QGIS? Não Sim Para usar um plugin QGIS, é necessário aprender a programar? Não Sim É altamente recomendável que todos os plugins sejam instalados através do Gerenciador de Plug-ins, mesmo se eles pudessem ser instalados baixando o arquivo zip e colocando-o na pasta QGIS correta? Não Sim "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
